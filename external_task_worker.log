2025-09-03 11:22:48,518 - __main__ - ERROR - Worker error: Retry.__init__() got an unexpected keyword argument 'method_whitelist'
2025-09-03 11:23:14,282 - __main__ - ERROR - Worker error: Retry.__init__() got an unexpected keyword argument 'method_whitelist'
2025-09-03 11:23:31,828 - __main__ - ERROR - Worker error: Retry.__init__() got an unexpected keyword argument 'method_whitelist'
2025-09-03 11:24:01,342 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756913041
2025-09-03 11:24:01,414 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:24:01,415 - services.external_task_worker - INFO - Executing task 278a6f34-88d9-11f0-916b-0242ac140006 for topic validate-document
2025-09-03 11:24:01,415 - services.external_task_worker - ERROR - Error executing task 278a6f34-88d9-11f0-916b-0242ac140006: Task execution failed: document_content variable is required
2025-09-03 11:24:01,415 - services.external_task_worker - ERROR - Traceback (most recent call last):
  File "/home/jdehart/working/ODRAS/scripts/../backend/services/external_task_worker.py", line 180, in execute_task
    result = handler(task_variables)
  File "/home/jdehart/working/ODRAS/scripts/../backend/services/external_task_worker.py", line 280, in handle_validate_document
    raise Exception("document_content variable is required")
Exception: document_content variable is required

2025-09-03 11:24:16,412 - __main__ - INFO - Received signal 2, shutting down worker...
2025-09-03 11:25:02,267 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756913102
2025-09-03 11:25:02,277 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:25:02,277 - services.external_task_worker - INFO - Executing task 22011650-88da-11f0-916b-0242ac140006 for topic validate-document
2025-09-03 11:25:02,277 - services.external_task_worker - ERROR - Error executing task 22011650-88da-11f0-916b-0242ac140006: Task execution failed: document_content variable is required
2025-09-03 11:25:02,278 - services.external_task_worker - ERROR - Traceback (most recent call last):
  File "/home/jdehart/working/ODRAS/scripts/../backend/services/external_task_worker.py", line 180, in execute_task
    result = handler(task_variables)
  File "/home/jdehart/working/ODRAS/scripts/../backend/services/external_task_worker.py", line 280, in handle_validate_document
    raise Exception("document_content variable is required")
Exception: document_content variable is required

2025-09-03 11:25:34,790 - __main__ - INFO - Received signal 2, shutting down worker...
2025-09-03 11:25:51,062 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756913151
2025-09-03 11:25:57,208 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 11:26:55,877 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756913215
2025-09-03 11:26:55,892 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:26:55,893 - services.external_task_worker - INFO - Executing task 68b49af0-88da-11f0-916b-0242ac140006 for topic validate-document
2025-09-03 11:26:55,893 - services.external_task_worker - INFO - Task variables: {'document_filename': 'test_document.txt', 'document_mime_type': 'text/plain', 'document_content': '/tmp/odras-test/test_document.txt'}
2025-09-03 11:26:55,933 - services.external_task_worker - INFO - Successfully completed task 68b49af0-88da-11f0-916b-0242ac140006
2025-09-03 11:26:55,944 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:26:55,944 - services.external_task_worker - INFO - Executing task 6cde4787-88da-11f0-916b-0242ac140006 for topic parse-document
2025-09-03 11:26:55,945 - services.external_task_worker - INFO - Task variables: {'document_filename': 'test_document.txt', 'document_mime_type': 'text/plain', 'document_content': '/tmp/odras-test/test_document.txt'}
2025-09-03 11:26:55,959 - services.external_task_worker - INFO - Successfully completed task 6cde4787-88da-11f0-916b-0242ac140006
2025-09-03 11:26:55,970 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:26:55,970 - services.external_task_worker - INFO - Executing task 6ce30283-88da-11f0-916b-0242ac140006 for topic chunk-document
2025-09-03 11:26:55,970 - services.external_task_worker - INFO - Task variables: {'parsed_content': 'This is a test document for the RAG pipeline workflow.\n\nThe system shall process documents efficiently and extract meaningful content.\nThe RAG pipeline must handle various document formats including text, PDF, and Word documents.\n\nRequirements:\n- The system shall validate all uploaded documents\n- The system must chunk documents into appropriate sizes  \n- The system shall generate vector embeddings for all chunks\n- The system must store embeddings in the vector database\n- The system shall update search indices for discoverability\n\nThis test document contains enough content to test the chunking and embedding generation processes.\nIt includes multiple paragraphs and requirements statements that should be properly processed.\n\nThe system shall ensure data integrity throughout the pipeline.\nPerformance requirements specify that documents must be processed within 60 seconds.\nThe system must support concurrent processing of multiple documents.\n', 'document_filename': 'test_document.txt', 'document_mime_type': 'text/plain', 'document_content': '/tmp/odras-test/test_document.txt'}
2025-09-03 11:26:55,973 - services.chunking_service - INFO - Chunking service initialized
2025-09-03 11:26:55,987 - services.external_task_worker - INFO - Successfully completed task 6ce30283-88da-11f0-916b-0242ac140006
2025-09-03 11:26:56,000 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:26:56,000 - services.external_task_worker - INFO - Executing task 6ce72149-88da-11f0-916b-0242ac140006 for topic generate-embeddings
2025-09-03 11:26:56,000 - services.external_task_worker - INFO - Task variables: {'parsed_content': 'This is a test document for the RAG pipeline workflow.\n\nThe system shall process documents efficiently and extract meaningful content.\nThe RAG pipeline must handle various document formats including text, PDF, and Word documents.\n\nRequirements:\n- The system shall validate all uploaded documents\n- The system must chunk documents into appropriate sizes  \n- The system shall generate vector embeddings for all chunks\n- The system must store embeddings in the vector database\n- The system shall update search indices for discoverability\n\nThis test document contains enough content to test the chunking and embedding generation processes.\nIt includes multiple paragraphs and requirements statements that should be properly processed.\n\nThe system shall ensure data integrity throughout the pipeline.\nPerformance requirements specify that documents must be processed within 60 seconds.\nThe system must support concurrent processing of multiple documents.\n', 'chunks_created': '[]', 'document_filename': 'test_document.txt', 'document_mime_type': 'text/plain', 'document_content': '/tmp/odras-test/test_document.txt'}
2025-09-03 11:26:56,016 - services.external_task_worker - INFO - Successfully completed task 6ce72149-88da-11f0-916b-0242ac140006
2025-09-03 11:26:56,029 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:26:56,029 - services.external_task_worker - INFO - Executing task 6ceb4008-88da-11f0-916b-0242ac140006 for topic store-vector-rag
2025-09-03 11:26:56,029 - services.external_task_worker - INFO - Task variables: {'embeddings_generated': '[]', 'parsed_content': 'This is a test document for the RAG pipeline workflow.\n\nThe system shall process documents efficiently and extract meaningful content.\nThe RAG pipeline must handle various document formats including text, PDF, and Word documents.\n\nRequirements:\n- The system shall validate all uploaded documents\n- The system must chunk documents into appropriate sizes  \n- The system shall generate vector embeddings for all chunks\n- The system must store embeddings in the vector database\n- The system shall update search indices for discoverability\n\nThis test document contains enough content to test the chunking and embedding generation processes.\nIt includes multiple paragraphs and requirements statements that should be properly processed.\n\nThe system shall ensure data integrity throughout the pipeline.\nPerformance requirements specify that documents must be processed within 60 seconds.\nThe system must support concurrent processing of multiple documents.\n', 'chunks_created': '[]', 'document_filename': 'test_document.txt', 'document_mime_type': 'text/plain', 'document_content': '/tmp/odras-test/test_document.txt'}
2025-09-03 11:26:56,053 - services.external_task_worker - INFO - Successfully completed task 6ceb4008-88da-11f0-916b-0242ac140006
2025-09-03 11:26:56,066 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:26:56,066 - services.external_task_worker - INFO - Executing task 6cf0e563-88da-11f0-916b-0242ac140006 for topic store-metadata
2025-09-03 11:26:56,067 - services.external_task_worker - INFO - Task variables: {'embeddings_generated': '[]', 'parsed_content': 'This is a test document for the RAG pipeline workflow.\n\nThe system shall process documents efficiently and extract meaningful content.\nThe RAG pipeline must handle various document formats including text, PDF, and Word documents.\n\nRequirements:\n- The system shall validate all uploaded documents\n- The system must chunk documents into appropriate sizes  \n- The system shall generate vector embeddings for all chunks\n- The system must store embeddings in the vector database\n- The system shall update search indices for discoverability\n\nThis test document contains enough content to test the chunking and embedding generation processes.\nIt includes multiple paragraphs and requirements statements that should be properly processed.\n\nThe system shall ensure data integrity throughout the pipeline.\nPerformance requirements specify that documents must be processed within 60 seconds.\nThe system must support concurrent processing of multiple documents.\n', 'chunks_created': '[]', 'document_filename': 'test_document.txt', 'document_mime_type': 'text/plain', 'document_content': '/tmp/odras-test/test_document.txt'}
2025-09-03 11:26:56,087 - services.external_task_worker - INFO - Successfully completed task 6cf0e563-88da-11f0-916b-0242ac140006
2025-09-03 11:26:56,098 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:26:56,098 - services.external_task_worker - INFO - Executing task 6cf5c76d-88da-11f0-916b-0242ac140006 for topic update-search-index
2025-09-03 11:26:56,099 - services.external_task_worker - INFO - Task variables: {'embeddings_generated': '[]', 'parsed_content': 'This is a test document for the RAG pipeline workflow.\n\nThe system shall process documents efficiently and extract meaningful content.\nThe RAG pipeline must handle various document formats including text, PDF, and Word documents.\n\nRequirements:\n- The system shall validate all uploaded documents\n- The system must chunk documents into appropriate sizes  \n- The system shall generate vector embeddings for all chunks\n- The system must store embeddings in the vector database\n- The system shall update search indices for discoverability\n\nThis test document contains enough content to test the chunking and embedding generation processes.\nIt includes multiple paragraphs and requirements statements that should be properly processed.\n\nThe system shall ensure data integrity throughout the pipeline.\nPerformance requirements specify that documents must be processed within 60 seconds.\nThe system must support concurrent processing of multiple documents.\n', 'chunks_created': '[]', 'document_filename': 'test_document.txt', 'document_mime_type': 'text/plain', 'document_content': '/tmp/odras-test/test_document.txt'}
2025-09-03 11:26:56,149 - services.external_task_worker - INFO - Successfully completed task 6cf5c76d-88da-11f0-916b-0242ac140006
2025-09-03 11:27:22,019 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 11:45:58,525 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756914358
2025-09-03 11:45:58,537 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:45:58,537 - services.external_task_worker - INFO - Executing task f15223ae-88dc-11f0-916b-0242ac140006 for topic process-user-query
2025-09-03 11:45:58,537 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the system requirements for document validation?', 'query_metadata': '{"user_id": "test_user", "session_id": "test_session_1"}'}
2025-09-03 11:45:58,550 - services.external_task_worker - INFO - Successfully completed task f15223ae-88dc-11f0-916b-0242ac140006
2025-09-03 11:45:58,564 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:45:58,564 - services.external_task_worker - INFO - Executing task 15ec8fe9-88dd-11f0-916b-0242ac140006 for topic retrieve-context
2025-09-03 11:45:58,564 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the system requirements for document validation?', 'query_metadata': '{"user_id": "test_user", "session_id": "test_session_1"}', 'processed_query': '{"original_query": "What are the system requirements for document validation?", "cleaned_query": "What are the system requirements for document validation?", "key_terms": ["what", "system", "requirements", "document", "validation"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements", "validation"], "word_count": 8, "char_count": 57, "query_metadata": {"user_id": "test_user", "session_id": "test_session_1"}, "processing_timestamp": 1756914358.5379062}', 'search_parameters': '{"primary_terms": ["what", "system", "requirements", "document", "validation"], "secondary_terms": [], "search_boost_terms": ["system", "requirements", "validation"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 11:45:58,566 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 11:45:58,566 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 11:45:58,667 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 11:45:58,675 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 11:45:58,677 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 11:45:58,692 - services.external_task_worker - INFO - Successfully completed task 15ec8fe9-88dd-11f0-916b-0242ac140006
2025-09-03 11:45:58,707 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:45:58,707 - services.external_task_worker - INFO - Executing task 1601ecc2-88dd-11f0-916b-0242ac140006 for topic rerank-context
2025-09-03 11:45:58,707 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the system requirements for document validation?', 'query_metadata': '{"user_id": "test_user", "session_id": "test_session_1"}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What are the system requirements for document validation?", "cleaned_query": "What are the system requirements for document validation?", "key_terms": ["what", "system", "requirements", "document", "validation"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements", "validation"], "word_count": 8, "char_count": 57, "query_metadata": {"user_id": "test_user", "session_id": "test_session_1"}, "processing_timestamp": 1756914358.5379062}', 'search_parameters': '{"primary_terms": ["what", "system", "requirements", "document", "validation"], "secondary_terms": [], "search_boost_terms": ["system", "requirements", "validation"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 11:45:58,722 - services.external_task_worker - INFO - Successfully completed task 1601ecc2-88dd-11f0-916b-0242ac140006
2025-09-03 11:45:58,736 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:45:58,736 - services.external_task_worker - INFO - Executing task 1606a7c9-88dd-11f0-916b-0242ac140006 for topic fallback-search
2025-09-03 11:45:58,736 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the system requirements for document validation?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "test_user", "session_id": "test_session_1"}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What are the system requirements for document validation?", "cleaned_query": "What are the system requirements for document validation?", "key_terms": ["what", "system", "requirements", "document", "validation"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements", "validation"], "word_count": 8, "char_count": 57, "query_metadata": {"user_id": "test_user", "session_id": "test_session_1"}, "processing_timestamp": 1756914358.5379062}', 'search_parameters': '{"primary_terms": ["what", "system", "requirements", "document", "validation"], "secondary_terms": [], "search_boost_terms": ["system", "requirements", "validation"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 11:45:58,751 - services.external_task_worker - INFO - Successfully completed task 1606a7c9-88dd-11f0-916b-0242ac140006
2025-09-03 11:45:58,764 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:45:58,764 - services.external_task_worker - INFO - Executing task 160b13ae-88dd-11f0-916b-0242ac140006 for topic construct-prompt
2025-09-03 11:45:58,764 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the system requirements for document validation?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "test_user", "session_id": "test_session_1"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the system requirements for document validation?", "cleaned_query": "What are the system requirements for document validation?", "key_terms": ["what", "system", "requirements", "document", "validation"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements", "validation"], "word_count": 8, "char_count": 57, "query_metadata": {"user_id": "test_user", "session_id": "test_session_1"}, "processing_timestamp": 1756914358.5379062}', 'search_parameters': '{"primary_terms": ["what", "system", "requirements", "document", "validation"], "secondary_terms": [], "search_boost_terms": ["system", "requirements", "validation"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 11:45:58,780 - services.external_task_worker - INFO - Successfully completed task 160b13ae-88dd-11f0-916b-0242ac140006
2025-09-03 11:45:58,791 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:45:58,791 - services.external_task_worker - INFO - Executing task 160f8091-88dd-11f0-916b-0242ac140006 for topic llm-generation
2025-09-03 11:45:58,792 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What are the system requirements for document validation?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the system requirements for document validation?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "test_user", "session_id": "test_session_1"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the system requirements for document validation?", "cleaned_query": "What are the system requirements for document validation?", "key_terms": ["what", "system", "requirements", "document", "validation"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements", "validation"], "word_count": 8, "char_count": 57, "query_metadata": {"user_id": "test_user", "session_id": "test_session_1"}, "processing_timestamp": 1756914358.5379062}', 'search_parameters': '{"primary_terms": ["what", "system", "requirements", "document", "validation"], "secondary_terms": [], "search_boost_terms": ["system", "requirements", "validation"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 11:45:58,806 - services.external_task_worker - INFO - Successfully completed task 160f8091-88dd-11f0-916b-0242ac140006
2025-09-03 11:45:58,823 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:45:58,823 - services.external_task_worker - INFO - Executing task 16135132-88dd-11f0-916b-0242ac140006 for topic process-response
2025-09-03 11:45:58,823 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What are the system requirements for document validation?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the system requirements for document validation?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "test_user", "session_id": "test_session_1"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the system requirements for document validation?", "cleaned_query": "What are the system requirements for document validation?", "key_terms": ["what", "system", "requirements", "document", "validation"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements", "validation"], "word_count": 8, "char_count": 57, "query_metadata": {"user_id": "test_user", "session_id": "test_session_1"}, "processing_timestamp": 1756914358.5379062}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "system", "requirements", "document", "validation"], "secondary_terms": [], "search_boost_terms": ["system", "requirements", "validation"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 11:45:58,838 - services.external_task_worker - INFO - Successfully completed task 16135132-88dd-11f0-916b-0242ac140006
2025-09-03 11:45:58,851 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:45:58,852 - services.external_task_worker - INFO - Executing task 16185a58-88dd-11f0-916b-0242ac140006 for topic log-interaction
2025-09-03 11:45:58,852 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What are the system requirements for document validation?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the system requirements for document validation?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "test_user", "session_id": "test_session_1"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'processed_query': '{"original_query": "What are the system requirements for document validation?", "cleaned_query": "What are the system requirements for document validation?", "key_terms": ["what", "system", "requirements", "document", "validation"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements", "validation"], "word_count": 8, "char_count": 57, "query_metadata": {"user_id": "test_user", "session_id": "test_session_1"}, "processing_timestamp": 1756914358.5379062}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "system", "requirements", "document", "validation"], "secondary_terms": [], "search_boost_terms": ["system", "requirements", "validation"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 11:45:58,880 - services.external_task_worker - INFO - Successfully completed task 16185a58-88dd-11f0-916b-0242ac140006
2025-09-03 11:46:13,820 - __main__ - INFO - Received signal 2, shutting down worker...
2025-09-03 11:51:21,985 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756914681
2025-09-03 11:51:21,996 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:51:21,996 - services.external_task_worker - INFO - Executing task cd4bc47e-88dd-11f0-916b-0242ac140006 for topic process-user-query
2025-09-03 11:51:21,996 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the main components of the ODRAS system?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756914666.166478, "session_id": "test_session_api", "interface": "api_test"}'}
2025-09-03 11:51:22,012 - services.external_task_worker - INFO - Successfully completed task cd4bc47e-88dd-11f0-916b-0242ac140006
2025-09-03 11:51:22,021 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:51:22,022 - services.external_task_worker - INFO - Executing task d6b8a3e9-88dd-11f0-916b-0242ac140006 for topic retrieve-context
2025-09-03 11:51:22,022 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the main components of the ODRAS system?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756914666.166478, "session_id": "test_session_api", "interface": "api_test"}', 'processed_query': '{"original_query": "What are the main components of the ODRAS system?", "cleaned_query": "What are the main components of the ODRAS system?", "key_terms": ["what", "main", "components", "odras", "system"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system"], "word_count": 9, "char_count": 49, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756914666.166478, "session_id": "test_session_api", "interface": "api_test"}, "processing_timestamp": 1756914681.997327}', 'search_parameters': '{"primary_terms": ["what", "main", "components", "odras", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 11:51:22,024 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 11:51:22,025 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 11:51:22,101 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 11:51:22,107 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 11:51:22,108 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 11:51:22,121 - services.external_task_worker - INFO - Successfully completed task d6b8a3e9-88dd-11f0-916b-0242ac140006
2025-09-03 11:51:22,133 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:51:22,133 - services.external_task_worker - INFO - Executing task d6c993f2-88dd-11f0-916b-0242ac140006 for topic rerank-context
2025-09-03 11:51:22,133 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the main components of the ODRAS system?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756914666.166478, "session_id": "test_session_api", "interface": "api_test"}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What are the main components of the ODRAS system?", "cleaned_query": "What are the main components of the ODRAS system?", "key_terms": ["what", "main", "components", "odras", "system"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system"], "word_count": 9, "char_count": 49, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756914666.166478, "session_id": "test_session_api", "interface": "api_test"}, "processing_timestamp": 1756914681.997327}', 'search_parameters': '{"primary_terms": ["what", "main", "components", "odras", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 11:51:22,149 - services.external_task_worker - INFO - Successfully completed task d6c993f2-88dd-11f0-916b-0242ac140006
2025-09-03 11:51:22,162 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:51:22,162 - services.external_task_worker - INFO - Executing task d6cd1679-88dd-11f0-916b-0242ac140006 for topic fallback-search
2025-09-03 11:51:22,163 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the main components of the ODRAS system?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756914666.166478, "session_id": "test_session_api", "interface": "api_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What are the main components of the ODRAS system?", "cleaned_query": "What are the main components of the ODRAS system?", "key_terms": ["what", "main", "components", "odras", "system"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system"], "word_count": 9, "char_count": 49, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756914666.166478, "session_id": "test_session_api", "interface": "api_test"}, "processing_timestamp": 1756914681.997327}', 'search_parameters': '{"primary_terms": ["what", "main", "components", "odras", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 11:51:22,177 - services.external_task_worker - INFO - Successfully completed task d6cd1679-88dd-11f0-916b-0242ac140006
2025-09-03 11:51:22,188 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:51:22,189 - services.external_task_worker - INFO - Executing task d6d1aa6e-88dd-11f0-916b-0242ac140006 for topic construct-prompt
2025-09-03 11:51:22,189 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the main components of the ODRAS system?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756914666.166478, "session_id": "test_session_api", "interface": "api_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the main components of the ODRAS system?", "cleaned_query": "What are the main components of the ODRAS system?", "key_terms": ["what", "main", "components", "odras", "system"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system"], "word_count": 9, "char_count": 49, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756914666.166478, "session_id": "test_session_api", "interface": "api_test"}, "processing_timestamp": 1756914681.997327}', 'search_parameters': '{"primary_terms": ["what", "main", "components", "odras", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 11:51:22,202 - services.external_task_worker - INFO - Successfully completed task d6d1aa6e-88dd-11f0-916b-0242ac140006
2025-09-03 11:51:22,213 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:51:22,214 - services.external_task_worker - INFO - Executing task d6d5c931-88dd-11f0-916b-0242ac140006 for topic llm-generation
2025-09-03 11:51:22,214 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What are the main components of the ODRAS system?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the main components of the ODRAS system?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756914666.166478, "session_id": "test_session_api", "interface": "api_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the main components of the ODRAS system?", "cleaned_query": "What are the main components of the ODRAS system?", "key_terms": ["what", "main", "components", "odras", "system"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system"], "word_count": 9, "char_count": 49, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756914666.166478, "session_id": "test_session_api", "interface": "api_test"}, "processing_timestamp": 1756914681.997327}', 'search_parameters': '{"primary_terms": ["what", "main", "components", "odras", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 11:51:22,225 - services.external_task_worker - INFO - Successfully completed task d6d5c931-88dd-11f0-916b-0242ac140006
2025-09-03 11:51:22,238 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:51:22,238 - services.external_task_worker - INFO - Executing task d6d94bb2-88dd-11f0-916b-0242ac140006 for topic process-response
2025-09-03 11:51:22,238 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What are the main components of the ODRAS system?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the main components of the ODRAS system?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756914666.166478, "session_id": "test_session_api", "interface": "api_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the main components of the ODRAS system?", "cleaned_query": "What are the main components of the ODRAS system?", "key_terms": ["what", "main", "components", "odras", "system"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system"], "word_count": 9, "char_count": 49, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756914666.166478, "session_id": "test_session_api", "interface": "api_test"}, "processing_timestamp": 1756914681.997327}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "main", "components", "odras", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 11:51:22,252 - services.external_task_worker - INFO - Successfully completed task d6d94bb2-88dd-11f0-916b-0242ac140006
2025-09-03 11:51:22,265 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 11:51:22,266 - services.external_task_worker - INFO - Executing task d6dd4268-88dd-11f0-916b-0242ac140006 for topic log-interaction
2025-09-03 11:51:22,266 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What are the main components of the ODRAS system?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the main components of the ODRAS system?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756914666.166478, "session_id": "test_session_api", "interface": "api_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'processed_query': '{"original_query": "What are the main components of the ODRAS system?", "cleaned_query": "What are the main components of the ODRAS system?", "key_terms": ["what", "main", "components", "odras", "system"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system"], "word_count": 9, "char_count": 49, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756914666.166478, "session_id": "test_session_api", "interface": "api_test"}, "processing_timestamp": 1756914681.997327}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "main", "components", "odras", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 11:51:22,299 - services.external_task_worker - INFO - Successfully completed task d6dd4268-88dd-11f0-916b-0242ac140006
2025-09-03 11:51:33,094 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 12:01:15,181 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756915275
2025-09-03 12:01:15,194 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:01:15,194 - services.external_task_worker - INFO - Executing task 2e9d4a58-88df-11f0-916b-0242ac140006 for topic process-user-query
2025-09-03 12:01:15,194 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the main components of the ODRAS system?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915258.9343987, "session_id": "test_session_api", "interface": "swagger_test"}'}
2025-09-03 12:01:15,207 - services.external_task_worker - INFO - Successfully completed task 2e9d4a58-88df-11f0-916b-0242ac140006
2025-09-03 12:01:15,217 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:01:15,217 - services.external_task_worker - INFO - Executing task 384b2a63-88df-11f0-916b-0242ac140006 for topic retrieve-context
2025-09-03 12:01:15,217 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the main components of the ODRAS system?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915258.9343987, "session_id": "test_session_api", "interface": "swagger_test"}', 'processed_query': '{"original_query": "What are the main components of the ODRAS system?", "cleaned_query": "What are the main components of the ODRAS system?", "key_terms": ["what", "main", "components", "odras", "system"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system"], "word_count": 9, "char_count": 49, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915258.9343987, "session_id": "test_session_api", "interface": "swagger_test"}, "processing_timestamp": 1756915275.1952994}', 'search_parameters': '{"primary_terms": ["what", "main", "components", "odras", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:01:15,220 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 12:01:15,220 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 12:01:15,305 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 12:01:15,310 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 12:01:15,312 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 12:01:15,324 - services.external_task_worker - INFO - Successfully completed task 384b2a63-88df-11f0-916b-0242ac140006
2025-09-03 12:01:15,336 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:01:15,336 - services.external_task_worker - INFO - Executing task 385d04cc-88df-11f0-916b-0242ac140006 for topic rerank-context
2025-09-03 12:01:15,336 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the main components of the ODRAS system?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915258.9343987, "session_id": "test_session_api", "interface": "swagger_test"}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What are the main components of the ODRAS system?", "cleaned_query": "What are the main components of the ODRAS system?", "key_terms": ["what", "main", "components", "odras", "system"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system"], "word_count": 9, "char_count": 49, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915258.9343987, "session_id": "test_session_api", "interface": "swagger_test"}, "processing_timestamp": 1756915275.1952994}', 'search_parameters': '{"primary_terms": ["what", "main", "components", "odras", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:01:15,351 - services.external_task_worker - INFO - Successfully completed task 385d04cc-88df-11f0-916b-0242ac140006
2025-09-03 12:01:15,361 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:01:15,361 - services.external_task_worker - INFO - Executing task 3860fc83-88df-11f0-916b-0242ac140006 for topic fallback-search
2025-09-03 12:01:15,361 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the main components of the ODRAS system?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915258.9343987, "session_id": "test_session_api", "interface": "swagger_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What are the main components of the ODRAS system?", "cleaned_query": "What are the main components of the ODRAS system?", "key_terms": ["what", "main", "components", "odras", "system"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system"], "word_count": 9, "char_count": 49, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915258.9343987, "session_id": "test_session_api", "interface": "swagger_test"}, "processing_timestamp": 1756915275.1952994}', 'search_parameters': '{"primary_terms": ["what", "main", "components", "odras", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:01:15,373 - services.external_task_worker - INFO - Successfully completed task 3860fc83-88df-11f0-916b-0242ac140006
2025-09-03 12:01:15,383 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:01:15,383 - services.external_task_worker - INFO - Executing task 3864a618-88df-11f0-916b-0242ac140006 for topic construct-prompt
2025-09-03 12:01:15,383 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the main components of the ODRAS system?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915258.9343987, "session_id": "test_session_api", "interface": "swagger_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the main components of the ODRAS system?", "cleaned_query": "What are the main components of the ODRAS system?", "key_terms": ["what", "main", "components", "odras", "system"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system"], "word_count": 9, "char_count": 49, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915258.9343987, "session_id": "test_session_api", "interface": "swagger_test"}, "processing_timestamp": 1756915275.1952994}', 'search_parameters': '{"primary_terms": ["what", "main", "components", "odras", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:01:15,396 - services.external_task_worker - INFO - Successfully completed task 3864a618-88df-11f0-916b-0242ac140006
2025-09-03 12:01:15,406 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:01:15,407 - services.external_task_worker - INFO - Executing task 3868018b-88df-11f0-916b-0242ac140006 for topic llm-generation
2025-09-03 12:01:15,407 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What are the main components of the ODRAS system?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the main components of the ODRAS system?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915258.9343987, "session_id": "test_session_api", "interface": "swagger_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the main components of the ODRAS system?", "cleaned_query": "What are the main components of the ODRAS system?", "key_terms": ["what", "main", "components", "odras", "system"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system"], "word_count": 9, "char_count": 49, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915258.9343987, "session_id": "test_session_api", "interface": "swagger_test"}, "processing_timestamp": 1756915275.1952994}', 'search_parameters': '{"primary_terms": ["what", "main", "components", "odras", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:01:15,420 - services.external_task_worker - INFO - Successfully completed task 3868018b-88df-11f0-916b-0242ac140006
2025-09-03 12:01:15,433 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:01:15,433 - services.external_task_worker - INFO - Executing task 386bab1c-88df-11f0-916b-0242ac140006 for topic process-response
2025-09-03 12:01:15,433 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What are the main components of the ODRAS system?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the main components of the ODRAS system?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915258.9343987, "session_id": "test_session_api", "interface": "swagger_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the main components of the ODRAS system?", "cleaned_query": "What are the main components of the ODRAS system?", "key_terms": ["what", "main", "components", "odras", "system"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system"], "word_count": 9, "char_count": 49, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915258.9343987, "session_id": "test_session_api", "interface": "swagger_test"}, "processing_timestamp": 1756915275.1952994}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "main", "components", "odras", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:01:15,448 - services.external_task_worker - INFO - Successfully completed task 386bab1c-88df-11f0-916b-0242ac140006
2025-09-03 12:01:15,457 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:01:15,458 - services.external_task_worker - INFO - Executing task 386fa2d2-88df-11f0-916b-0242ac140006 for topic log-interaction
2025-09-03 12:01:15,458 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What are the main components of the ODRAS system?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the main components of the ODRAS system?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915258.9343987, "session_id": "test_session_api", "interface": "swagger_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'processed_query': '{"original_query": "What are the main components of the ODRAS system?", "cleaned_query": "What are the main components of the ODRAS system?", "key_terms": ["what", "main", "components", "odras", "system"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system"], "word_count": 9, "char_count": 49, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915258.9343987, "session_id": "test_session_api", "interface": "swagger_test"}, "processing_timestamp": 1756915275.1952994}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "main", "components", "odras", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:01:15,476 - services.external_task_worker - INFO - Successfully completed task 386fa2d2-88df-11f0-916b-0242ac140006
2025-09-03 12:01:31,027 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 12:04:24,583 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756915464
2025-09-03 12:04:24,593 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:04:24,594 - services.external_task_worker - INFO - Executing task a5030bec-88df-11f0-916b-0242ac140006 for topic process-user-query
2025-09-03 12:04:24,594 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915457.5706916, "session_id": "accuracy_test", "interface": "swagger_test"}'}
2025-09-03 12:04:24,605 - services.external_task_worker - INFO - Successfully completed task a5030bec-88df-11f0-916b-0242ac140006
2025-09-03 12:04:24,617 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:04:24,617 - services.external_task_worker - INFO - Executing task a92f0277-88df-11f0-916b-0242ac140006 for topic retrieve-context
2025-09-03 12:04:24,617 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915457.5706916, "session_id": "accuracy_test", "interface": "swagger_test"}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915457.5706916, "session_id": "accuracy_test", "interface": "swagger_test"}, "processing_timestamp": 1756915464.594754}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:04:24,620 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 12:04:24,620 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 12:04:24,702 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 12:04:24,707 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 12:04:24,709 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 12:04:24,720 - services.external_task_worker - INFO - Successfully completed task a92f0277-88df-11f0-916b-0242ac140006
2025-09-03 12:04:24,729 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:04:24,730 - services.external_task_worker - INFO - Executing task a940b4d0-88df-11f0-916b-0242ac140006 for topic rerank-context
2025-09-03 12:04:24,730 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915457.5706916, "session_id": "accuracy_test", "interface": "swagger_test"}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915457.5706916, "session_id": "accuracy_test", "interface": "swagger_test"}, "processing_timestamp": 1756915464.594754}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:04:24,741 - services.external_task_worker - INFO - Successfully completed task a940b4d0-88df-11f0-916b-0242ac140006
2025-09-03 12:04:24,753 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:04:24,753 - services.external_task_worker - INFO - Executing task a943e937-88df-11f0-916b-0242ac140006 for topic fallback-search
2025-09-03 12:04:24,753 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915457.5706916, "session_id": "accuracy_test", "interface": "swagger_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915457.5706916, "session_id": "accuracy_test", "interface": "swagger_test"}, "processing_timestamp": 1756915464.594754}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:04:24,768 - services.external_task_worker - INFO - Successfully completed task a943e937-88df-11f0-916b-0242ac140006
2025-09-03 12:04:24,779 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:04:24,779 - services.external_task_worker - INFO - Executing task a947b9dc-88df-11f0-916b-0242ac140006 for topic construct-prompt
2025-09-03 12:04:24,779 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915457.5706916, "session_id": "accuracy_test", "interface": "swagger_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915457.5706916, "session_id": "accuracy_test", "interface": "swagger_test"}, "processing_timestamp": 1756915464.594754}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:04:24,791 - services.external_task_worker - INFO - Successfully completed task a947b9dc-88df-11f0-916b-0242ac140006
2025-09-03 12:04:24,802 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:04:24,802 - services.external_task_worker - INFO - Executing task a94b636f-88df-11f0-916b-0242ac140006 for topic llm-generation
2025-09-03 12:04:24,802 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915457.5706916, "session_id": "accuracy_test", "interface": "swagger_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915457.5706916, "session_id": "accuracy_test", "interface": "swagger_test"}, "processing_timestamp": 1756915464.594754}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:04:24,812 - services.external_task_worker - INFO - Successfully completed task a94b636f-88df-11f0-916b-0242ac140006
2025-09-03 12:04:24,822 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:04:24,822 - services.external_task_worker - INFO - Executing task a94ebee0-88df-11f0-916b-0242ac140006 for topic process-response
2025-09-03 12:04:24,822 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915457.5706916, "session_id": "accuracy_test", "interface": "swagger_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915457.5706916, "session_id": "accuracy_test", "interface": "swagger_test"}, "processing_timestamp": 1756915464.594754}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:04:24,834 - services.external_task_worker - INFO - Successfully completed task a94ebee0-88df-11f0-916b-0242ac140006
2025-09-03 12:04:24,844 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:04:24,844 - services.external_task_worker - INFO - Executing task a9521a56-88df-11f0-916b-0242ac140006 for topic log-interaction
2025-09-03 12:04:24,844 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915457.5706916, "session_id": "accuracy_test", "interface": "swagger_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915457.5706916, "session_id": "accuracy_test", "interface": "swagger_test"}, "processing_timestamp": 1756915464.594754}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:04:24,861 - services.external_task_worker - INFO - Successfully completed task a9521a56-88df-11f0-916b-0242ac140006
2025-09-03 12:05:28,445 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:05:28,445 - services.external_task_worker - INFO - Executing task ced2c7ec-88df-11f0-916b-0242ac140006 for topic process-user-query
2025-09-03 12:05:28,445 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915527.7238703, "session_id": "accuracy_test", "interface": "api_test"}'}
2025-09-03 12:05:28,458 - services.external_task_worker - INFO - Successfully completed task ced2c7ec-88df-11f0-916b-0242ac140006
2025-09-03 12:05:28,470 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:05:28,470 - services.external_task_worker - INFO - Executing task cf3e3407-88df-11f0-916b-0242ac140006 for topic retrieve-context
2025-09-03 12:05:28,471 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915527.7238703, "session_id": "accuracy_test", "interface": "api_test"}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915527.7238703, "session_id": "accuracy_test", "interface": "api_test"}, "processing_timestamp": 1756915528.4460487}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:05:28,475 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 12:05:28,475 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 12:05:28,568 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 12:05:28,575 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 12:05:28,576 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 12:05:28,589 - services.external_task_worker - INFO - Successfully completed task cf3e3407-88df-11f0-916b-0242ac140006
2025-09-03 12:05:28,600 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:05:28,601 - services.external_task_worker - INFO - Executing task cf525860-88df-11f0-916b-0242ac140006 for topic rerank-context
2025-09-03 12:05:28,601 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915527.7238703, "session_id": "accuracy_test", "interface": "api_test"}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915527.7238703, "session_id": "accuracy_test", "interface": "api_test"}, "processing_timestamp": 1756915528.4460487}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:05:28,620 - services.external_task_worker - INFO - Successfully completed task cf525860-88df-11f0-916b-0242ac140006
2025-09-03 12:05:28,630 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:05:28,631 - services.external_task_worker - INFO - Executing task cf565017-88df-11f0-916b-0242ac140006 for topic fallback-search
2025-09-03 12:05:28,631 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915527.7238703, "session_id": "accuracy_test", "interface": "api_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915527.7238703, "session_id": "accuracy_test", "interface": "api_test"}, "processing_timestamp": 1756915528.4460487}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:05:28,643 - services.external_task_worker - INFO - Successfully completed task cf565017-88df-11f0-916b-0242ac140006
2025-09-03 12:05:28,654 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:05:28,654 - services.external_task_worker - INFO - Executing task cf5a95ec-88df-11f0-916b-0242ac140006 for topic construct-prompt
2025-09-03 12:05:28,654 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915527.7238703, "session_id": "accuracy_test", "interface": "api_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915527.7238703, "session_id": "accuracy_test", "interface": "api_test"}, "processing_timestamp": 1756915528.4460487}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:05:28,667 - services.external_task_worker - INFO - Successfully completed task cf5a95ec-88df-11f0-916b-0242ac140006
2025-09-03 12:05:28,676 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:05:28,676 - services.external_task_worker - INFO - Executing task cf5dc94f-88df-11f0-916b-0242ac140006 for topic llm-generation
2025-09-03 12:05:28,676 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915527.7238703, "session_id": "accuracy_test", "interface": "api_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915527.7238703, "session_id": "accuracy_test", "interface": "api_test"}, "processing_timestamp": 1756915528.4460487}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:05:28,688 - services.external_task_worker - INFO - Successfully completed task cf5dc94f-88df-11f0-916b-0242ac140006
2025-09-03 12:05:28,699 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:05:28,699 - services.external_task_worker - INFO - Executing task cf6172e0-88df-11f0-916b-0242ac140006 for topic process-response
2025-09-03 12:05:28,699 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915527.7238703, "session_id": "accuracy_test", "interface": "api_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915527.7238703, "session_id": "accuracy_test", "interface": "api_test"}, "processing_timestamp": 1756915528.4460487}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:05:28,712 - services.external_task_worker - INFO - Successfully completed task cf6172e0-88df-11f0-916b-0242ac140006
2025-09-03 12:05:28,723 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:05:28,723 - services.external_task_worker - INFO - Executing task cf64a746-88df-11f0-916b-0242ac140006 for topic log-interaction
2025-09-03 12:05:28,723 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915527.7238703, "session_id": "accuracy_test", "interface": "api_test"}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.6, "timestamp": 1756915527.7238703, "session_id": "accuracy_test", "interface": "api_test"}, "processing_timestamp": 1756915528.4460487}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:05:28,742 - services.external_task_worker - INFO - Successfully completed task cf64a746-88df-11f0-916b-0242ac140006
2025-09-03 12:06:23,251 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:06:23,252 - services.external_task_worker - INFO - Executing task efa6b5e0-88df-11f0-916b-0242ac140006 for topic process-user-query
2025-09-03 12:06:23,252 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915582.7994206}'}
2025-09-03 12:06:23,273 - services.external_task_worker - INFO - Successfully completed task efa6b5e0-88df-11f0-916b-0242ac140006
2025-09-03 12:06:23,283 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:06:23,283 - services.external_task_worker - INFO - Executing task efe98b5b-88df-11f0-916b-0242ac140006 for topic retrieve-context
2025-09-03 12:06:23,283 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915582.7994206}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915582.7994206}, "processing_timestamp": 1756915583.2527933}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:06:23,286 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 12:06:23,286 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 12:06:23,350 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 12:06:23,358 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 12:06:23,359 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 12:06:23,370 - services.external_task_worker - INFO - Successfully completed task efe98b5b-88df-11f0-916b-0242ac140006
2025-09-03 12:06:23,380 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:06:23,381 - services.external_task_worker - INFO - Executing task eff942e4-88df-11f0-916b-0242ac140006 for topic rerank-context
2025-09-03 12:06:23,381 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915582.7994206}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915582.7994206}, "processing_timestamp": 1756915583.2527933}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:06:23,392 - services.external_task_worker - INFO - Successfully completed task eff942e4-88df-11f0-916b-0242ac140006
2025-09-03 12:06:23,402 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:06:23,402 - services.external_task_worker - INFO - Executing task effc774b-88df-11f0-916b-0242ac140006 for topic fallback-search
2025-09-03 12:06:23,402 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915582.7994206}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915582.7994206}, "processing_timestamp": 1756915583.2527933}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:06:23,413 - services.external_task_worker - INFO - Successfully completed task effc774b-88df-11f0-916b-0242ac140006
2025-09-03 12:06:23,423 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:06:23,423 - services.external_task_worker - INFO - Executing task efffabb0-88df-11f0-916b-0242ac140006 for topic construct-prompt
2025-09-03 12:06:23,423 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915582.7994206}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915582.7994206}, "processing_timestamp": 1756915583.2527933}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:06:23,434 - services.external_task_worker - INFO - Successfully completed task efffabb0-88df-11f0-916b-0242ac140006
2025-09-03 12:06:23,444 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:06:23,444 - services.external_task_worker - INFO - Executing task f002e013-88df-11f0-916b-0242ac140006 for topic llm-generation
2025-09-03 12:06:23,445 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915582.7994206}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915582.7994206}, "processing_timestamp": 1756915583.2527933}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:06:23,454 - services.external_task_worker - INFO - Successfully completed task f002e013-88df-11f0-916b-0242ac140006
2025-09-03 12:06:23,463 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:06:23,464 - services.external_task_worker - INFO - Executing task f0063b84-88df-11f0-916b-0242ac140006 for topic process-response
2025-09-03 12:06:23,464 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915582.7994206}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915582.7994206}, "processing_timestamp": 1756915583.2527933}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:06:23,473 - services.external_task_worker - INFO - Successfully completed task f0063b84-88df-11f0-916b-0242ac140006
2025-09-03 12:06:23,482 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:06:23,483 - services.external_task_worker - INFO - Executing task f00921ca-88df-11f0-916b-0242ac140006 for topic log-interaction
2025-09-03 12:06:23,483 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915582.7994206}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915582.7994206}, "processing_timestamp": 1756915583.2527933}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:06:23,501 - services.external_task_worker - INFO - Successfully completed task f00921ca-88df-11f0-916b-0242ac140006
2025-09-03 12:11:29,092 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:29,092 - services.external_task_worker - INFO - Executing task a61d1224-88e0-11f0-916b-0242ac140006 for topic process-user-query
2025-09-03 12:11:29,093 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915888.921439}'}
2025-09-03 12:11:29,103 - services.external_task_worker - INFO - Successfully completed task a61d1224-88e0-11f0-916b-0242ac140006
2025-09-03 12:11:29,110 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:29,110 - services.external_task_worker - INFO - Executing task a63469cf-88e0-11f0-916b-0242ac140006 for topic retrieve-context
2025-09-03 12:11:29,110 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915888.921439}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915888.921439}, "processing_timestamp": 1756915889.0935133}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:11:29,113 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 12:11:29,113 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 12:11:29,169 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 12:11:29,174 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 12:11:29,175 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 12:11:29,186 - services.external_task_worker - INFO - Successfully completed task a63469cf-88e0-11f0-916b-0242ac140006
2025-09-03 12:11:29,196 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:29,196 - services.external_task_worker - INFO - Executing task a640ed08-88e0-11f0-916b-0242ac140006 for topic rerank-context
2025-09-03 12:11:29,196 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915888.921439}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915888.921439}, "processing_timestamp": 1756915889.0935133}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:11:29,207 - services.external_task_worker - INFO - Successfully completed task a640ed08-88e0-11f0-916b-0242ac140006
2025-09-03 12:11:29,218 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:29,218 - services.external_task_worker - INFO - Executing task a644216f-88e0-11f0-916b-0242ac140006 for topic fallback-search
2025-09-03 12:11:29,218 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915888.921439}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915888.921439}, "processing_timestamp": 1756915889.0935133}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:11:29,227 - services.external_task_worker - INFO - Successfully completed task a644216f-88e0-11f0-916b-0242ac140006
2025-09-03 12:11:29,237 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:29,237 - services.external_task_worker - INFO - Executing task a6477ce4-88e0-11f0-916b-0242ac140006 for topic construct-prompt
2025-09-03 12:11:29,237 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915888.921439}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915888.921439}, "processing_timestamp": 1756915889.0935133}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:11:29,250 - services.external_task_worker - INFO - Successfully completed task a6477ce4-88e0-11f0-916b-0242ac140006
2025-09-03 12:11:29,261 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:29,261 - services.external_task_worker - INFO - Executing task a64ab147-88e0-11f0-916b-0242ac140006 for topic llm-generation
2025-09-03 12:11:29,261 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915888.921439}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915888.921439}, "processing_timestamp": 1756915889.0935133}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:11:29,271 - services.external_task_worker - INFO - Successfully completed task a64ab147-88e0-11f0-916b-0242ac140006
2025-09-03 12:11:29,280 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:29,281 - services.external_task_worker - INFO - Executing task a64e33c8-88e0-11f0-916b-0242ac140006 for topic process-response
2025-09-03 12:11:29,281 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915888.921439}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915888.921439}, "processing_timestamp": 1756915889.0935133}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:11:29,291 - services.external_task_worker - INFO - Successfully completed task a64e33c8-88e0-11f0-916b-0242ac140006
2025-09-03 12:11:29,300 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:29,300 - services.external_task_worker - INFO - Executing task a6511a0e-88e0-11f0-916b-0242ac140006 for topic log-interaction
2025-09-03 12:11:29,300 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915888.921439}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.5, "timestamp": 1756915888.921439}, "processing_timestamp": 1756915889.0935133}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:11:29,315 - services.external_task_worker - INFO - Successfully completed task a6511a0e-88e0-11f0-916b-0242ac140006
2025-09-03 12:11:47,488 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:47,488 - services.external_task_worker - INFO - Executing task b11c7808-88e0-11f0-916b-0242ac140006 for topic process-user-query
2025-09-03 12:11:47,488 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.4, "timestamp": 1756915907.374871}'}
2025-09-03 12:11:47,498 - services.external_task_worker - INFO - Successfully completed task b11c7808-88e0-11f0-916b-0242ac140006
2025-09-03 12:11:47,504 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:47,504 - services.external_task_worker - INFO - Executing task b12b1e23-88e0-11f0-916b-0242ac140006 for topic retrieve-context
2025-09-03 12:11:47,504 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.4, "timestamp": 1756915907.374871}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.4, "timestamp": 1756915907.374871}, "processing_timestamp": 1756915907.4884052}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:11:47,507 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 12:11:47,507 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 12:11:47,560 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 12:11:47,567 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 12:11:47,568 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 12:11:47,578 - services.external_task_worker - INFO - Successfully completed task b12b1e23-88e0-11f0-916b-0242ac140006
2025-09-03 12:11:47,587 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:47,587 - services.external_task_worker - INFO - Executing task b1377a4c-88e0-11f0-916b-0242ac140006 for topic rerank-context
2025-09-03 12:11:47,587 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.4, "timestamp": 1756915907.374871}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.4, "timestamp": 1756915907.374871}, "processing_timestamp": 1756915907.4884052}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:11:47,599 - services.external_task_worker - INFO - Successfully completed task b1377a4c-88e0-11f0-916b-0242ac140006
2025-09-03 12:11:47,607 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:47,608 - services.external_task_worker - INFO - Executing task b13a6093-88e0-11f0-916b-0242ac140006 for topic fallback-search
2025-09-03 12:11:47,608 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.4, "timestamp": 1756915907.374871}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.4, "timestamp": 1756915907.374871}, "processing_timestamp": 1756915907.4884052}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:11:47,619 - services.external_task_worker - INFO - Successfully completed task b13a6093-88e0-11f0-916b-0242ac140006
2025-09-03 12:11:47,627 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:47,628 - services.external_task_worker - INFO - Executing task b13d93f8-88e0-11f0-916b-0242ac140006 for topic construct-prompt
2025-09-03 12:11:47,628 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.4, "timestamp": 1756915907.374871}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.4, "timestamp": 1756915907.374871}, "processing_timestamp": 1756915907.4884052}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:11:47,637 - services.external_task_worker - INFO - Successfully completed task b13d93f8-88e0-11f0-916b-0242ac140006
2025-09-03 12:11:47,646 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:47,646 - services.external_task_worker - INFO - Executing task b140a14b-88e0-11f0-916b-0242ac140006 for topic llm-generation
2025-09-03 12:11:47,646 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.4, "timestamp": 1756915907.374871}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.4, "timestamp": 1756915907.374871}, "processing_timestamp": 1756915907.4884052}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:11:47,655 - services.external_task_worker - INFO - Successfully completed task b140a14b-88e0-11f0-916b-0242ac140006
2025-09-03 12:11:47,664 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:47,664 - services.external_task_worker - INFO - Executing task b143396c-88e0-11f0-916b-0242ac140006 for topic process-response
2025-09-03 12:11:47,664 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.4, "timestamp": 1756915907.374871}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.4, "timestamp": 1756915907.374871}, "processing_timestamp": 1756915907.4884052}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:11:47,672 - services.external_task_worker - INFO - Successfully completed task b143396c-88e0-11f0-916b-0242ac140006
2025-09-03 12:11:47,682 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:11:47,682 - services.external_task_worker - INFO - Executing task b145f8a2-88e0-11f0-916b-0242ac140006 for topic log-interaction
2025-09-03 12:11:47,682 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.4, "timestamp": 1756915907.374871}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.4, "timestamp": 1756915907.374871}, "processing_timestamp": 1756915907.4884052}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:11:47,696 - services.external_task_worker - INFO - Successfully completed task b145f8a2-88e0-11f0-916b-0242ac140006
2025-09-03 12:12:16,913 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:12:16,913 - services.external_task_worker - INFO - Executing task c2287b3c-88e0-11f0-916b-0242ac140006 for topic process-user-query
2025-09-03 12:12:16,914 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.3, "timestamp": 1756915935.9736836}'}
2025-09-03 12:12:16,921 - services.external_task_worker - INFO - Successfully completed task c2287b3c-88e0-11f0-916b-0242ac140006
2025-09-03 12:12:16,929 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:12:16,929 - services.external_task_worker - INFO - Executing task c2b503e7-88e0-11f0-916b-0242ac140006 for topic retrieve-context
2025-09-03 12:12:16,929 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.3, "timestamp": 1756915935.9736836}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.3, "timestamp": 1756915935.9736836}, "processing_timestamp": 1756915936.914275}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:12:16,933 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 12:12:16,934 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 12:12:16,983 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 12:12:16,987 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 12:12:16,987 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 12:12:16,997 - services.external_task_worker - INFO - Successfully completed task c2b503e7-88e0-11f0-916b-0242ac140006
2025-09-03 12:12:17,006 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:12:17,006 - services.external_task_worker - INFO - Executing task c2c075b0-88e0-11f0-916b-0242ac140006 for topic rerank-context
2025-09-03 12:12:17,006 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.3, "timestamp": 1756915935.9736836}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.3, "timestamp": 1756915935.9736836}, "processing_timestamp": 1756915936.914275}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:12:17,015 - services.external_task_worker - INFO - Successfully completed task c2c075b0-88e0-11f0-916b-0242ac140006
2025-09-03 12:12:17,024 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:12:17,024 - services.external_task_worker - INFO - Executing task c2c334e7-88e0-11f0-916b-0242ac140006 for topic fallback-search
2025-09-03 12:12:17,024 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.3, "timestamp": 1756915935.9736836}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.3, "timestamp": 1756915935.9736836}, "processing_timestamp": 1756915936.914275}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:12:17,034 - services.external_task_worker - INFO - Successfully completed task c2c334e7-88e0-11f0-916b-0242ac140006
2025-09-03 12:12:17,042 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:12:17,042 - services.external_task_worker - INFO - Executing task c2c61b2c-88e0-11f0-916b-0242ac140006 for topic construct-prompt
2025-09-03 12:12:17,042 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.3, "timestamp": 1756915935.9736836}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.3, "timestamp": 1756915935.9736836}, "processing_timestamp": 1756915936.914275}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:12:17,051 - services.external_task_worker - INFO - Successfully completed task c2c61b2c-88e0-11f0-916b-0242ac140006
2025-09-03 12:12:17,058 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:12:17,058 - services.external_task_worker - INFO - Executing task c2c8b34f-88e0-11f0-916b-0242ac140006 for topic llm-generation
2025-09-03 12:12:17,058 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.3, "timestamp": 1756915935.9736836}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.3, "timestamp": 1756915935.9736836}, "processing_timestamp": 1756915936.914275}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:12:17,067 - services.external_task_worker - INFO - Successfully completed task c2c8b34f-88e0-11f0-916b-0242ac140006
2025-09-03 12:12:17,075 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:12:17,075 - services.external_task_worker - INFO - Executing task c2cb2460-88e0-11f0-916b-0242ac140006 for topic process-response
2025-09-03 12:12:17,075 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.3, "timestamp": 1756915935.9736836}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.3, "timestamp": 1756915935.9736836}, "processing_timestamp": 1756915936.914275}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:12:17,085 - services.external_task_worker - INFO - Successfully completed task c2cb2460-88e0-11f0-916b-0242ac140006
2025-09-03 12:12:17,093 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:12:17,093 - services.external_task_worker - INFO - Executing task c2cdbc86-88e0-11f0-916b-0242ac140006 for topic log-interaction
2025-09-03 12:12:17,093 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.3, "timestamp": 1756915935.9736836}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.3, "timestamp": 1756915935.9736836}, "processing_timestamp": 1756915936.914275}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:12:17,107 - services.external_task_worker - INFO - Successfully completed task c2cdbc86-88e0-11f0-916b-0242ac140006
2025-09-03 12:13:24,475 - urllib3.connectionpool - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x7f3f1a69bc50>, 'Connection to localhost timed out. (connect timeout=30)')': /engine-rest/external-task/fetchAndLock
2025-09-03 12:23:53,781 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756916633
2025-09-03 12:23:53,792 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:23:53,793 - services.external_task_worker - INFO - Executing task 4ef94229-88e2-11f0-916b-0242ac140006 for topic process-user-query
2025-09-03 12:23:53,793 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916601.7154953}'}
2025-09-03 12:23:53,802 - services.external_task_worker - INFO - Successfully completed task 4ef94229-88e2-11f0-916b-0242ac140006
2025-09-03 12:23:53,814 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:23:53,814 - services.external_task_worker - INFO - Executing task 621476b4-88e2-11f0-916b-0242ac140006 for topic retrieve-context
2025-09-03 12:23:53,814 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916601.7154953}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916601.7154953}, "processing_timestamp": 1756916633.7937107}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:23:53,827 - services.external_task_worker - INFO - Successfully completed task 621476b4-88e2-11f0-916b-0242ac140006
2025-09-03 12:23:53,838 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:23:53,838 - services.external_task_worker - INFO - Executing task 6217f938-88e2-11f0-916b-0242ac140006 for topic rerank-context
2025-09-03 12:23:53,839 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916601.7154953}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916601.7154953}, "processing_timestamp": 1756916633.7937107}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:23:53,850 - services.external_task_worker - INFO - Successfully completed task 6217f938-88e2-11f0-916b-0242ac140006
2025-09-03 12:23:53,861 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:23:53,861 - services.external_task_worker - INFO - Executing task 621bc9df-88e2-11f0-916b-0242ac140006 for topic fallback-search
2025-09-03 12:23:53,861 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916601.7154953}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916601.7154953}, "processing_timestamp": 1756916633.7937107}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:23:53,872 - services.external_task_worker - INFO - Successfully completed task 621bc9df-88e2-11f0-916b-0242ac140006
2025-09-03 12:23:53,881 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:23:53,882 - services.external_task_worker - INFO - Executing task 621efe44-88e2-11f0-916b-0242ac140006 for topic construct-prompt
2025-09-03 12:23:53,882 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916601.7154953}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916601.7154953}, "processing_timestamp": 1756916633.7937107}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:23:53,894 - services.external_task_worker - INFO - Successfully completed task 621efe44-88e2-11f0-916b-0242ac140006
2025-09-03 12:23:53,902 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:23:53,903 - services.external_task_worker - INFO - Executing task 622259b7-88e2-11f0-916b-0242ac140006 for topic llm-generation
2025-09-03 12:23:53,903 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916601.7154953}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916601.7154953}, "processing_timestamp": 1756916633.7937107}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:23:53,914 - services.external_task_worker - INFO - Successfully completed task 622259b7-88e2-11f0-916b-0242ac140006
2025-09-03 12:23:53,925 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:23:53,925 - services.external_task_worker - INFO - Executing task 62258e18-88e2-11f0-916b-0242ac140006 for topic process-response
2025-09-03 12:23:53,925 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916601.7154953}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916601.7154953}, "processing_timestamp": 1756916633.7937107}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:23:53,936 - services.external_task_worker - INFO - Successfully completed task 62258e18-88e2-11f0-916b-0242ac140006
2025-09-03 12:23:53,949 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:23:53,949 - services.external_task_worker - INFO - Executing task 6228c27e-88e2-11f0-916b-0242ac140006 for topic log-interaction
2025-09-03 12:23:53,950 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916601.7154953}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916601.7154953}, "processing_timestamp": 1756916633.7937107}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:23:53,969 - services.external_task_worker - INFO - Successfully completed task 6228c27e-88e2-11f0-916b-0242ac140006
2025-09-03 12:24:50,456 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:24:50,457 - services.external_task_worker - INFO - Executing task 83af37f8-88e2-11f0-916b-0242ac140006 for topic process-user-query
2025-09-03 12:24:50,457 - services.external_task_worker - INFO - Task variables: {'user_query': 'navigation system', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.2, "timestamp": 1756916690.1382434}'}
2025-09-03 12:24:50,466 - services.external_task_worker - INFO - Successfully completed task 83af37f8-88e2-11f0-916b-0242ac140006
2025-09-03 12:24:50,473 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:24:50,473 - services.external_task_worker - INFO - Executing task 83dab4e3-88e2-11f0-916b-0242ac140006 for topic retrieve-context
2025-09-03 12:24:50,473 - services.external_task_worker - INFO - Task variables: {'user_query': 'navigation system', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.2, "timestamp": 1756916690.1382434}', 'processed_query': '{"original_query": "navigation system", "cleaned_query": "navigation system", "key_terms": ["navigation", "system"], "question_intent": [], "query_type": "informational", "domain_terms": ["system"], "word_count": 2, "char_count": 17, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.2, "timestamp": 1756916690.1382434}, "processing_timestamp": 1756916690.4574249}', 'search_parameters': '{"primary_terms": ["navigation", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:24:50,481 - services.external_task_worker - INFO - Successfully completed task 83dab4e3-88e2-11f0-916b-0242ac140006
2025-09-03 12:24:50,487 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:24:50,487 - services.external_task_worker - INFO - Executing task 83dd24f7-88e2-11f0-916b-0242ac140006 for topic rerank-context
2025-09-03 12:24:50,488 - services.external_task_worker - INFO - Task variables: {'user_query': 'navigation system', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.2, "timestamp": 1756916690.1382434}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "navigation system", "cleaned_query": "navigation system", "key_terms": ["navigation", "system"], "question_intent": [], "query_type": "informational", "domain_terms": ["system"], "word_count": 2, "char_count": 17, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.2, "timestamp": 1756916690.1382434}, "processing_timestamp": 1756916690.4574249}', 'search_parameters': '{"primary_terms": ["navigation", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:24:50,500 - services.external_task_worker - INFO - Successfully completed task 83dd24f7-88e2-11f0-916b-0242ac140006
2025-09-03 12:24:50,508 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:24:50,509 - services.external_task_worker - INFO - Executing task 83dfe42e-88e2-11f0-916b-0242ac140006 for topic fallback-search
2025-09-03 12:24:50,509 - services.external_task_worker - INFO - Task variables: {'user_query': 'navigation system', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.2, "timestamp": 1756916690.1382434}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "navigation system", "cleaned_query": "navigation system", "key_terms": ["navigation", "system"], "question_intent": [], "query_type": "informational", "domain_terms": ["system"], "word_count": 2, "char_count": 17, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.2, "timestamp": 1756916690.1382434}, "processing_timestamp": 1756916690.4574249}', 'search_parameters': '{"primary_terms": ["navigation", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:24:50,519 - services.external_task_worker - INFO - Successfully completed task 83dfe42e-88e2-11f0-916b-0242ac140006
2025-09-03 12:24:50,527 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:24:50,528 - services.external_task_worker - INFO - Executing task 83e2ca73-88e2-11f0-916b-0242ac140006 for topic construct-prompt
2025-09-03 12:24:50,528 - services.external_task_worker - INFO - Task variables: {'user_query': 'navigation system', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.2, "timestamp": 1756916690.1382434}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "navigation system", "cleaned_query": "navigation system", "key_terms": ["navigation", "system"], "question_intent": [], "query_type": "informational", "domain_terms": ["system"], "word_count": 2, "char_count": 17, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.2, "timestamp": 1756916690.1382434}, "processing_timestamp": 1756916690.4574249}', 'search_parameters': '{"primary_terms": ["navigation", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:24:50,539 - services.external_task_worker - INFO - Successfully completed task 83e2ca73-88e2-11f0-916b-0242ac140006
2025-09-03 12:24:50,548 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:24:50,548 - services.external_task_worker - INFO - Executing task 83e5d7c6-88e2-11f0-916b-0242ac140006 for topic llm-generation
2025-09-03 12:24:50,548 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: navigation system\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'navigation system', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.2, "timestamp": 1756916690.1382434}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "navigation system", "cleaned_query": "navigation system", "key_terms": ["navigation", "system"], "question_intent": [], "query_type": "informational", "domain_terms": ["system"], "word_count": 2, "char_count": 17, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.2, "timestamp": 1756916690.1382434}, "processing_timestamp": 1756916690.4574249}', 'search_parameters': '{"primary_terms": ["navigation", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:24:50,558 - services.external_task_worker - INFO - Successfully completed task 83e5d7c6-88e2-11f0-916b-0242ac140006
2025-09-03 12:24:50,567 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:24:50,567 - services.external_task_worker - INFO - Executing task 83e8be07-88e2-11f0-916b-0242ac140006 for topic process-response
2025-09-03 12:24:50,567 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: navigation system\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'navigation system', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.2, "timestamp": 1756916690.1382434}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "navigation system", "cleaned_query": "navigation system", "key_terms": ["navigation", "system"], "question_intent": [], "query_type": "informational", "domain_terms": ["system"], "word_count": 2, "char_count": 17, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.2, "timestamp": 1756916690.1382434}, "processing_timestamp": 1756916690.4574249}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["navigation", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:24:50,576 - services.external_task_worker - INFO - Successfully completed task 83e8be07-88e2-11f0-916b-0242ac140006
2025-09-03 12:24:50,583 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:24:50,583 - services.external_task_worker - INFO - Executing task 83eb7d3d-88e2-11f0-916b-0242ac140006 for topic log-interaction
2025-09-03 12:24:50,583 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: navigation system\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'navigation system', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.2, "timestamp": 1756916690.1382434}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'processed_query': '{"original_query": "navigation system", "cleaned_query": "navigation system", "key_terms": ["navigation", "system"], "question_intent": [], "query_type": "informational", "domain_terms": ["system"], "word_count": 2, "char_count": 17, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 3, "similarity_threshold": 0.2, "timestamp": 1756916690.1382434}, "processing_timestamp": 1756916690.4574249}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["navigation", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:24:50,601 - services.external_task_worker - INFO - Successfully completed task 83eb7d3d-88e2-11f0-916b-0242ac140006
2025-09-03 12:25:07,519 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 12:25:14,737 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756916714
2025-09-03 12:25:42,978 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:25:42,978 - services.external_task_worker - INFO - Executing task a2ffe147-88e2-11f0-916b-0242ac140006 for topic process-user-query
2025-09-03 12:25:42,978 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916742.688858}'}
2025-09-03 12:25:42,988 - services.external_task_worker - INFO - Successfully completed task a2ffe147-88e2-11f0-916b-0242ac140006
2025-09-03 12:25:42,997 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:25:42,998 - services.external_task_worker - INFO - Executing task a328ed32-88e2-11f0-916b-0242ac140006 for topic retrieve-context
2025-09-03 12:25:42,998 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916742.688858}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916742.688858}, "processing_timestamp": 1756916742.9787588}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:25:43,009 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 12:25:43,081 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 12:25:43,087 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 12:25:43,089 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 12:25:43,107 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 12:25:43,107 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 12:25:45,648 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 12:25:45,648 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 12:25:47,786 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 12:25:48,148 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 12:25:48,156 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 12:25:48,158 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 12:25:48,158 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 12:25:48,175 - services.external_task_worker - INFO - Successfully completed task a328ed32-88e2-11f0-916b-0242ac140006
2025-09-03 12:25:48,184 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:25:48,184 - services.external_task_worker - INFO - Executing task a6408d86-88e2-11f0-916b-0242ac140006 for topic rerank-context
2025-09-03 12:25:48,185 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916742.688858}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916742.688858}, "processing_timestamp": 1756916742.9787588}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:25:48,195 - services.external_task_worker - INFO - Successfully completed task a6408d86-88e2-11f0-916b-0242ac140006
2025-09-03 12:25:48,203 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:25:48,203 - services.external_task_worker - INFO - Executing task a6434cbd-88e2-11f0-916b-0242ac140006 for topic fallback-search
2025-09-03 12:25:48,203 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916742.688858}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916742.688858}, "processing_timestamp": 1756916742.9787588}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:25:48,214 - services.external_task_worker - INFO - Successfully completed task a6434cbd-88e2-11f0-916b-0242ac140006
2025-09-03 12:25:48,221 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:25:48,222 - services.external_task_worker - INFO - Executing task a6463302-88e2-11f0-916b-0242ac140006 for topic construct-prompt
2025-09-03 12:25:48,222 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916742.688858}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916742.688858}, "processing_timestamp": 1756916742.9787588}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:25:48,234 - services.external_task_worker - INFO - Successfully completed task a6463302-88e2-11f0-916b-0242ac140006
2025-09-03 12:25:48,243 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:25:48,243 - services.external_task_worker - INFO - Executing task a6493f55-88e2-11f0-916b-0242ac140006 for topic llm-generation
2025-09-03 12:25:48,243 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916742.688858}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916742.688858}, "processing_timestamp": 1756916742.9787588}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:25:48,256 - services.external_task_worker - INFO - Successfully completed task a6493f55-88e2-11f0-916b-0242ac140006
2025-09-03 12:25:48,265 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:25:48,265 - services.external_task_worker - INFO - Executing task a64c73b6-88e2-11f0-916b-0242ac140006 for topic process-response
2025-09-03 12:25:48,265 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916742.688858}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916742.688858}, "processing_timestamp": 1756916742.9787588}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:25:48,278 - services.external_task_worker - INFO - Successfully completed task a64c73b6-88e2-11f0-916b-0242ac140006
2025-09-03 12:25:48,289 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:25:48,289 - services.external_task_worker - INFO - Executing task a64ff63c-88e2-11f0-916b-0242ac140006 for topic log-interaction
2025-09-03 12:25:48,289 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916742.688858}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916742.688858}, "processing_timestamp": 1756916742.9787588}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:25:48,310 - services.external_task_worker - INFO - Successfully completed task a64ff63c-88e2-11f0-916b-0242ac140006
2025-09-03 12:28:13,451 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:28:13,452 - services.external_task_worker - INFO - Executing task fc9a1c76-88e2-11f0-916b-0242ac140006 for topic process-user-query
2025-09-03 12:28:13,452 - services.external_task_worker - INFO - Task variables: {'user_query': 'string', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756916893.0180008, "additionalProp1": {}}'}
2025-09-03 12:28:13,459 - services.external_task_worker - INFO - Successfully completed task fc9a1c76-88e2-11f0-916b-0242ac140006
2025-09-03 12:28:13,467 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:28:13,467 - services.external_task_worker - INFO - Executing task fcd92161-88e2-11f0-916b-0242ac140006 for topic retrieve-context
2025-09-03 12:28:13,467 - services.external_task_worker - INFO - Task variables: {'user_query': 'string', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756916893.0180008, "additionalProp1": {}}', 'processed_query': '{"original_query": "string", "cleaned_query": "string", "key_terms": ["string"], "question_intent": [], "query_type": "informational", "domain_terms": [], "word_count": 1, "char_count": 6, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756916893.0180008, "additionalProp1": {}}, "processing_timestamp": 1756916893.452256}', 'search_parameters': '{"primary_terms": ["string"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:28:13,470 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 12:28:13,526 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 12:28:13,531 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 12:28:13,532 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 12:28:13,551 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 12:28:13,552 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 12:28:13,552 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 12:28:13,552 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 12:28:14,518 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 12:28:14,525 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 12:28:14,540 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 12:28:14,540 - services.qdrant_service - INFO - Found 0 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 12:28:14,540 - services.qdrant_service - INFO - Found 0 similar chunks for query: 'string...'
2025-09-03 12:28:14,548 - services.external_task_worker - INFO - Successfully completed task fcd92161-88e2-11f0-916b-0242ac140006
2025-09-03 12:28:14,553 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:28:14,553 - services.external_task_worker - INFO - Executing task fd7f4c85-88e2-11f0-916b-0242ac140006 for topic rerank-context
2025-09-03 12:28:14,553 - services.external_task_worker - INFO - Task variables: {'user_query': 'string', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756916893.0180008, "additionalProp1": {}}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "string", "cleaned_query": "string", "key_terms": ["string"], "question_intent": [], "query_type": "informational", "domain_terms": [], "word_count": 1, "char_count": 6, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756916893.0180008, "additionalProp1": {}}, "processing_timestamp": 1756916893.452256}', 'search_parameters': '{"primary_terms": ["string"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:28:14,559 - services.external_task_worker - INFO - Successfully completed task fd7f4c85-88e2-11f0-916b-0242ac140006
2025-09-03 12:28:14,565 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:28:14,565 - services.external_task_worker - INFO - Executing task fd81215c-88e2-11f0-916b-0242ac140006 for topic fallback-search
2025-09-03 12:28:14,566 - services.external_task_worker - INFO - Task variables: {'user_query': 'string', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756916893.0180008, "additionalProp1": {}}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "string", "cleaned_query": "string", "key_terms": ["string"], "question_intent": [], "query_type": "informational", "domain_terms": [], "word_count": 1, "char_count": 6, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756916893.0180008, "additionalProp1": {}}, "processing_timestamp": 1756916893.452256}', 'search_parameters': '{"primary_terms": ["string"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:28:14,571 - services.external_task_worker - INFO - Successfully completed task fd81215c-88e2-11f0-916b-0242ac140006
2025-09-03 12:28:14,577 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:28:14,578 - services.external_task_worker - INFO - Executing task fd82f631-88e2-11f0-916b-0242ac140006 for topic construct-prompt
2025-09-03 12:28:14,578 - services.external_task_worker - INFO - Task variables: {'user_query': 'string', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756916893.0180008, "additionalProp1": {}}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "string", "cleaned_query": "string", "key_terms": ["string"], "question_intent": [], "query_type": "informational", "domain_terms": [], "word_count": 1, "char_count": 6, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756916893.0180008, "additionalProp1": {}}, "processing_timestamp": 1756916893.452256}', 'search_parameters': '{"primary_terms": ["string"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:28:14,584 - services.external_task_worker - INFO - Successfully completed task fd82f631-88e2-11f0-916b-0242ac140006
2025-09-03 12:28:14,588 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:28:14,589 - services.external_task_worker - INFO - Executing task fd84cb04-88e2-11f0-916b-0242ac140006 for topic llm-generation
2025-09-03 12:28:14,589 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: string\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'string', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756916893.0180008, "additionalProp1": {}}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "string", "cleaned_query": "string", "key_terms": ["string"], "question_intent": [], "query_type": "informational", "domain_terms": [], "word_count": 1, "char_count": 6, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756916893.0180008, "additionalProp1": {}}, "processing_timestamp": 1756916893.452256}', 'search_parameters': '{"primary_terms": ["string"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:28:14,595 - services.external_task_worker - INFO - Successfully completed task fd84cb04-88e2-11f0-916b-0242ac140006
2025-09-03 12:28:14,601 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:28:14,601 - services.external_task_worker - INFO - Executing task fd8678c5-88e2-11f0-916b-0242ac140006 for topic process-response
2025-09-03 12:28:14,602 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: string\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'string', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756916893.0180008, "additionalProp1": {}}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "string", "cleaned_query": "string", "key_terms": ["string"], "question_intent": [], "query_type": "informational", "domain_terms": [], "word_count": 1, "char_count": 6, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756916893.0180008, "additionalProp1": {}}, "processing_timestamp": 1756916893.452256}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["string"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:28:14,609 - services.external_task_worker - INFO - Successfully completed task fd8678c5-88e2-11f0-916b-0242ac140006
2025-09-03 12:28:14,615 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:28:14,615 - services.external_task_worker - INFO - Executing task fd889bbb-88e2-11f0-916b-0242ac140006 for topic log-interaction
2025-09-03 12:28:14,615 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: string\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'string', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756916893.0180008, "additionalProp1": {}}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'processed_query': '{"original_query": "string", "cleaned_query": "string", "key_terms": ["string"], "question_intent": [], "query_type": "informational", "domain_terms": [], "word_count": 1, "char_count": 6, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756916893.0180008, "additionalProp1": {}}, "processing_timestamp": 1756916893.452256}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["string"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:28:14,626 - services.external_task_worker - INFO - Successfully completed task fd889bbb-88e2-11f0-916b-0242ac140006
2025-09-03 12:29:05,056 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:29:05,056 - services.external_task_worker - INFO - Executing task 1b6ae865-88e3-11f0-916b-0242ac140006 for topic process-user-query
2025-09-03 12:29:05,056 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916944.7210171}'}
2025-09-03 12:29:05,068 - services.external_task_worker - INFO - Successfully completed task 1b6ae865-88e3-11f0-916b-0242ac140006
2025-09-03 12:29:05,073 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:29:05,073 - services.external_task_worker - INFO - Executing task 1b9be390-88e3-11f0-916b-0242ac140006 for topic retrieve-context
2025-09-03 12:29:05,073 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916944.7210171}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916944.7210171}, "processing_timestamp": 1756916945.0564342}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:29:05,076 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 12:29:05,118 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 12:29:05,121 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 12:29:05,121 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 12:29:05,132 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 12:29:05,133 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 12:29:05,133 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 12:29:05,133 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 12:29:06,136 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 12:29:06,146 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 12:29:06,159 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 12:29:06,159 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 12:29:06,160 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 12:29:06,172 - services.external_task_worker - INFO - Successfully completed task 1b9be390-88e3-11f0-916b-0242ac140006
2025-09-03 12:29:06,177 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:29:06,177 - services.external_task_worker - INFO - Executing task 1c44a5c4-88e3-11f0-916b-0242ac140006 for topic rerank-context
2025-09-03 12:29:06,178 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916944.7210171}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916944.7210171}, "processing_timestamp": 1756916945.0564342}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:29:06,185 - services.external_task_worker - INFO - Successfully completed task 1c44a5c4-88e3-11f0-916b-0242ac140006
2025-09-03 12:29:06,190 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:29:06,190 - services.external_task_worker - INFO - Executing task 1c46538b-88e3-11f0-916b-0242ac140006 for topic fallback-search
2025-09-03 12:29:06,190 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916944.7210171}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916944.7210171}, "processing_timestamp": 1756916945.0564342}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:29:06,196 - services.external_task_worker - INFO - Successfully completed task 1c46538b-88e3-11f0-916b-0242ac140006
2025-09-03 12:29:06,202 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:29:06,202 - services.external_task_worker - INFO - Executing task 1c484f70-88e3-11f0-916b-0242ac140006 for topic construct-prompt
2025-09-03 12:29:06,202 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916944.7210171}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916944.7210171}, "processing_timestamp": 1756916945.0564342}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:29:06,210 - services.external_task_worker - INFO - Successfully completed task 1c484f70-88e3-11f0-916b-0242ac140006
2025-09-03 12:29:06,216 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:29:06,216 - services.external_task_worker - INFO - Executing task 1c4a2443-88e3-11f0-916b-0242ac140006 for topic llm-generation
2025-09-03 12:29:06,216 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916944.7210171}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916944.7210171}, "processing_timestamp": 1756916945.0564342}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:29:06,224 - services.external_task_worker - INFO - Successfully completed task 1c4a2443-88e3-11f0-916b-0242ac140006
2025-09-03 12:29:06,232 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:29:06,232 - services.external_task_worker - INFO - Executing task 1c4c6e44-88e3-11f0-916b-0242ac140006 for topic process-response
2025-09-03 12:29:06,233 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916944.7210171}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916944.7210171}, "processing_timestamp": 1756916945.0564342}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:29:06,240 - services.external_task_worker - INFO - Successfully completed task 1c4c6e44-88e3-11f0-916b-0242ac140006
2025-09-03 12:29:06,248 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:29:06,248 - services.external_task_worker - INFO - Executing task 1c4edf5a-88e3-11f0-916b-0242ac140006 for topic log-interaction
2025-09-03 12:29:06,248 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916944.7210171}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756916944.7210171}, "processing_timestamp": 1756916945.0564342}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:29:06,262 - services.external_task_worker - INFO - Successfully completed task 1c4edf5a-88e3-11f0-916b-0242ac140006
2025-09-03 12:42:39,688 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:42:39,689 - services.external_task_worker - INFO - Executing task 00946a10-88e5-11f0-916b-0242ac140006 for topic process-user-query
2025-09-03 12:42:39,689 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756917758.6849022}'}
2025-09-03 12:42:39,697 - services.external_task_worker - INFO - Successfully completed task 00946a10-88e5-11f0-916b-0242ac140006
2025-09-03 12:42:39,705 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:42:39,705 - services.external_task_worker - INFO - Executing task 012a8fab-88e5-11f0-916b-0242ac140006 for topic retrieve-context
2025-09-03 12:42:39,705 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756917758.6849022}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756917758.6849022}, "processing_timestamp": 1756917759.6896346}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:42:39,709 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 12:42:39,771 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 12:42:39,777 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 12:42:39,777 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 12:42:39,793 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 12:42:39,793 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 12:42:39,794 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 12:42:39,794 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 12:42:40,815 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 12:42:40,825 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 12:42:40,834 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 12:42:40,835 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 12:42:40,835 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 12:42:40,851 - services.external_task_worker - INFO - Successfully completed task 012a8fab-88e5-11f0-916b-0242ac140006
2025-09-03 12:42:40,858 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:42:40,858 - services.external_task_worker - INFO - Executing task 01da7ecf-88e5-11f0-916b-0242ac140006 for topic rerank-context
2025-09-03 12:42:40,858 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756917758.6849022}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756917758.6849022}, "processing_timestamp": 1756917759.6896346}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:42:40,867 - services.external_task_worker - INFO - Successfully completed task 01da7ecf-88e5-11f0-916b-0242ac140006
2025-09-03 12:42:40,874 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:42:40,874 - services.external_task_worker - INFO - Executing task 01dd16f6-88e5-11f0-916b-0242ac140006 for topic fallback-search
2025-09-03 12:42:40,875 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756917758.6849022}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756917758.6849022}, "processing_timestamp": 1756917759.6896346}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:42:40,883 - services.external_task_worker - INFO - Successfully completed task 01dd16f6-88e5-11f0-916b-0242ac140006
2025-09-03 12:42:40,892 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:42:40,892 - services.external_task_worker - INFO - Executing task 01df870b-88e5-11f0-916b-0242ac140006 for topic construct-prompt
2025-09-03 12:42:40,892 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756917758.6849022}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756917758.6849022}, "processing_timestamp": 1756917759.6896346}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:42:40,903 - services.external_task_worker - INFO - Successfully completed task 01df870b-88e5-11f0-916b-0242ac140006
2025-09-03 12:42:40,911 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:42:40,911 - services.external_task_worker - INFO - Executing task 01e2463e-88e5-11f0-916b-0242ac140006 for topic llm-generation
2025-09-03 12:42:40,911 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756917758.6849022}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756917758.6849022}, "processing_timestamp": 1756917759.6896346}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:42:40,922 - services.external_task_worker - INFO - Successfully completed task 01e2463e-88e5-11f0-916b-0242ac140006
2025-09-03 12:42:40,932 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:42:40,933 - services.external_task_worker - INFO - Executing task 01e5538f-88e5-11f0-916b-0242ac140006 for topic process-response
2025-09-03 12:42:40,933 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756917758.6849022}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756917758.6849022}, "processing_timestamp": 1756917759.6896346}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:42:40,943 - services.external_task_worker - INFO - Successfully completed task 01e5538f-88e5-11f0-916b-0242ac140006
2025-09-03 12:42:40,952 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 12:42:40,952 - services.external_task_worker - INFO - Executing task 01e860e5-88e5-11f0-916b-0242ac140006 for topic log-interaction
2025-09-03 12:42:40,952 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756917758.6849022}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756917758.6849022}, "processing_timestamp": 1756917759.6896346}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 12:42:40,969 - services.external_task_worker - INFO - Successfully completed task 01e860e5-88e5-11f0-916b-0242ac140006
2025-09-03 12:44:58,825 - urllib3.connectionpool - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPConnectionPool(host='localhost', port=8080): Read timed out. (read timeout=30)")': /engine-rest/external-task/fetchAndLock
2025-09-03 12:45:28,851 - urllib3.connectionpool - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPConnectionPool(host='localhost', port=8080): Read timed out. (read timeout=30)")': /engine-rest/external-task/fetchAndLock
2025-09-03 12:45:58,882 - urllib3.connectionpool - WARNING - Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPConnectionPool(host='localhost', port=8080): Read timed out. (read timeout=30)")': /engine-rest/external-task/fetchAndLock
2025-09-03 12:45:58,883 - services.external_task_worker - ERROR - Error fetching tasks: HTTPConnectionPool(host='localhost', port=8080): Max retries exceeded with url: /engine-rest/external-task/fetchAndLock (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f6638596d70>: Failed to establish a new connection: [Errno 99] Cannot assign requested address'))
2025-09-03 12:46:29,910 - urllib3.connectionpool - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPConnectionPool(host='localhost', port=8080): Read timed out. (read timeout=30)")': /engine-rest/external-task/fetchAndLock
2025-09-03 12:46:59,924 - urllib3.connectionpool - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPConnectionPool(host='localhost', port=8080): Read timed out. (read timeout=30)")': /engine-rest/external-task/fetchAndLock
2025-09-03 12:46:59,926 - urllib3.connectionpool - WARNING - Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f66381ed8c0>: Failed to establish a new connection: [Errno 99] Cannot assign requested address')': /engine-rest/external-task/fetchAndLock
2025-09-03 12:46:59,926 - services.external_task_worker - ERROR - Error fetching tasks: HTTPConnectionPool(host='localhost', port=8080): Max retries exceeded with url: /engine-rest/external-task/fetchAndLock (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f66381ee8b0>: Failed to establish a new connection: [Errno 99] Cannot assign requested address'))
2025-09-03 12:47:30,940 - urllib3.connectionpool - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPConnectionPool(host='localhost', port=8080): Read timed out. (read timeout=30)")': /engine-rest/external-task/fetchAndLock
2025-09-03 12:47:30,940 - urllib3.connectionpool - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f66381ee030>: Failed to establish a new connection: [Errno 99] Cannot assign requested address')': /engine-rest/external-task/fetchAndLock
2025-09-03 12:47:30,941 - urllib3.connectionpool - WARNING - Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f66381edd00>: Failed to establish a new connection: [Errno 99] Cannot assign requested address')': /engine-rest/external-task/fetchAndLock
2025-09-03 12:47:30,941 - services.external_task_worker - ERROR - Error fetching tasks: HTTPConnectionPool(host='localhost', port=8080): Max retries exceeded with url: /engine-rest/external-task/fetchAndLock (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f6637d90270>: Failed to establish a new connection: [Errno 99] Cannot assign requested address'))
2025-09-03 12:48:01,968 - urllib3.connectionpool - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPConnectionPool(host='localhost', port=8080): Read timed out. (read timeout=30)")': /engine-rest/external-task/fetchAndLock
2025-09-03 12:48:01,969 - urllib3.connectionpool - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f6637d908d0>: Failed to establish a new connection: [Errno 99] Cannot assign requested address')': /engine-rest/external-task/fetchAndLock
2025-09-03 12:48:01,970 - urllib3.connectionpool - WARNING - Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f6637d90c00>: Failed to establish a new connection: [Errno 99] Cannot assign requested address')': /engine-rest/external-task/fetchAndLock
2025-09-03 12:48:01,971 - services.external_task_worker - ERROR - Error fetching tasks: HTTPConnectionPool(host='localhost', port=8080): Max retries exceeded with url: /engine-rest/external-task/fetchAndLock (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f6637d90f30>: Failed to establish a new connection: [Errno 99] Cannot assign requested address'))
2025-09-03 12:48:32,991 - urllib3.connectionpool - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPConnectionPool(host='localhost', port=8080): Read timed out. (read timeout=30)")': /engine-rest/external-task/fetchAndLock
2025-09-03 12:48:32,992 - urllib3.connectionpool - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f6637d91590>: Failed to establish a new connection: [Errno 99] Cannot assign requested address')': /engine-rest/external-task/fetchAndLock
2025-09-03 12:48:32,992 - urllib3.connectionpool - WARNING - Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f6637d918c0>: Failed to establish a new connection: [Errno 99] Cannot assign requested address')': /engine-rest/external-task/fetchAndLock
2025-09-03 12:48:32,993 - services.external_task_worker - ERROR - Error fetching tasks: HTTPConnectionPool(host='localhost', port=8080): Max retries exceeded with url: /engine-rest/external-task/fetchAndLock (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f6637d91bf0>: Failed to establish a new connection: [Errno 99] Cannot assign requested address'))
2025-09-03 12:49:04,012 - urllib3.connectionpool - WARNING - Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPConnectionPool(host='localhost', port=8080): Read timed out. (read timeout=30)")': /engine-rest/external-task/fetchAndLock
2025-09-03 12:49:04,012 - urllib3.connectionpool - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f6637d92250>: Failed to establish a new connection: [Errno 99] Cannot assign requested address')': /engine-rest/external-task/fetchAndLock
2025-09-03 12:49:04,013 - urllib3.connectionpool - WARNING - Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f6637d92580>: Failed to establish a new connection: [Errno 99] Cannot assign requested address')': /engine-rest/external-task/fetchAndLock
2025-09-03 12:49:04,013 - services.external_task_worker - ERROR - Error fetching tasks: HTTPConnectionPool(host='localhost', port=8080): Max retries exceeded with url: /engine-rest/external-task/fetchAndLock (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f6637d928b0>: Failed to establish a new connection: [Errno 99] Cannot assign requested address'))
2025-09-03 13:20:19,264 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756920019
2025-09-03 13:20:19,351 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:20:19,351 - services.external_task_worker - INFO - Executing task 226feaa2-88ea-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:20:19,352 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919962.7990487}'}
2025-09-03 13:20:19,406 - services.external_task_worker - INFO - Successfully completed task 226feaa2-88ea-11f0-bc34-0242ac160003
2025-09-03 13:20:19,406 - services.external_task_worker - INFO - Executing task 2b5daeec-88ea-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:20:19,406 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919977.9348042}'}
2025-09-03 13:20:19,432 - services.external_task_worker - INFO - Successfully completed task 2b5daeec-88ea-11f0-bc34-0242ac160003
2025-09-03 13:20:19,463 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:20:19,463 - services.external_task_worker - INFO - Executing task 440d1c77-88ea-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 13:20:19,464 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919962.7990487}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919962.7990487}, "processing_timestamp": 1756920019.3528643}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:20:19,486 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 13:20:19,566 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 13:20:19,571 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 13:20:19,572 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 13:20:19,590 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 13:20:19,590 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 13:20:19,916 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 13:20:19,917 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 13:20:21,122 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 13:20:21,534 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 13:20:21,572 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 13:20:21,574 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 13:20:21,574 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 13:20:21,634 - services.external_task_worker - INFO - Successfully completed task 440d1c77-88ea-11f0-bc34-0242ac160003
2025-09-03 13:20:21,634 - services.external_task_worker - INFO - Executing task 44116252-88ea-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 13:20:21,634 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919977.9348042}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919977.9348042}, "processing_timestamp": 1756920019.4067898}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:20:21,639 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 13:20:21,697 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 13:20:21,703 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 13:20:21,703 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 13:20:21,722 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 13:20:21,722 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 13:20:21,723 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 13:20:21,723 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 13:20:22,714 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 13:20:22,721 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 13:20:22,728 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 13:20:22,729 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 13:20:22,729 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 13:20:22,765 - services.external_task_worker - INFO - Successfully completed task 44116252-88ea-11f0-bc34-0242ac160003
2025-09-03 13:20:22,794 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:20:22,794 - services.external_task_worker - INFO - Executing task 45600276-88ea-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 13:20:22,794 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919962.7990487}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919962.7990487}, "processing_timestamp": 1756920019.3528643}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:20:22,831 - services.external_task_worker - INFO - Successfully completed task 45600276-88ea-11f0-bc34-0242ac160003
2025-09-03 13:20:22,832 - services.external_task_worker - INFO - Executing task 460d809a-88ea-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 13:20:22,832 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919977.9348042}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919977.9348042}, "processing_timestamp": 1756920019.4067898}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:20:22,866 - services.external_task_worker - INFO - Successfully completed task 460d809a-88ea-11f0-bc34-0242ac160003
2025-09-03 13:20:22,890 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:20:22,891 - services.external_task_worker - INFO - Executing task 46180801-88ea-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 13:20:22,891 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919962.7990487}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919962.7990487}, "processing_timestamp": 1756920019.3528643}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:20:22,922 - services.external_task_worker - INFO - Successfully completed task 46180801-88ea-11f0-bc34-0242ac160003
2025-09-03 13:20:22,922 - services.external_task_worker - INFO - Executing task 461d1128-88ea-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 13:20:22,922 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919977.9348042}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919977.9348042}, "processing_timestamp": 1756920019.4067898}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:20:22,950 - services.external_task_worker - INFO - Successfully completed task 461d1128-88ea-11f0-bc34-0242ac160003
2025-09-03 13:20:22,973 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:20:22,973 - services.external_task_worker - INFO - Executing task 4625278d-88ea-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 13:20:22,973 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919962.7990487}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919962.7990487}, "processing_timestamp": 1756920019.3528643}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:20:22,998 - services.external_task_worker - INFO - Successfully completed task 4625278d-88ea-11f0-bc34-0242ac160003
2025-09-03 13:20:22,999 - services.external_task_worker - INFO - Executing task 462a08a2-88ea-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 13:20:22,999 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919977.9348042}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919977.9348042}, "processing_timestamp": 1756920019.4067898}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:20:23,019 - services.external_task_worker - INFO - Successfully completed task 462a08a2-88ea-11f0-bc34-0242ac160003
2025-09-03 13:20:23,038 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:20:23,039 - services.external_task_worker - INFO - Executing task 4631f7f5-88ea-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 13:20:23,039 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919962.7990487}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919962.7990487}, "processing_timestamp": 1756920019.3528643}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:20:23,058 - services.external_task_worker - INFO - Successfully completed task 4631f7f5-88ea-11f0-bc34-0242ac160003
2025-09-03 13:20:23,059 - services.external_task_worker - INFO - Executing task 46357a78-88ea-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 13:20:23,059 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919977.9348042}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919977.9348042}, "processing_timestamp": 1756920019.4067898}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:20:23,079 - services.external_task_worker - INFO - Successfully completed task 46357a78-88ea-11f0-bc34-0242ac160003
2025-09-03 13:20:23,097 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:20:23,097 - services.external_task_worker - INFO - Executing task 463b6df9-88ea-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 13:20:23,097 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919962.7990487}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919962.7990487}, "processing_timestamp": 1756920019.3528643}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:20:23,119 - services.external_task_worker - INFO - Successfully completed task 463b6df9-88ea-11f0-bc34-0242ac160003
2025-09-03 13:20:23,119 - services.external_task_worker - INFO - Executing task 463e7b4a-88ea-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 13:20:23,120 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919977.9348042}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919977.9348042}, "processing_timestamp": 1756920019.4067898}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:20:23,142 - services.external_task_worker - INFO - Successfully completed task 463e7b4a-88ea-11f0-bc34-0242ac160003
2025-09-03 13:20:23,164 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:20:23,164 - services.external_task_worker - INFO - Executing task 464495e0-88ea-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 13:20:23,164 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919962.7990487}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919962.7990487}, "processing_timestamp": 1756920019.3528643}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:20:23,209 - services.external_task_worker - INFO - Successfully completed task 464495e0-88ea-11f0-bc34-0242ac160003
2025-09-03 13:20:23,210 - services.external_task_worker - INFO - Executing task 4647f156-88ea-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 13:20:23,210 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919977.9348042}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756919977.9348042}, "processing_timestamp": 1756920019.4067898}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:20:23,252 - services.external_task_worker - INFO - Successfully completed task 4647f156-88ea-11f0-bc34-0242ac160003
2025-09-03 13:21:47,246 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:21:47,246 - services.external_task_worker - INFO - Executing task 77e5d130-88ea-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:21:47,246 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 10, "similarity_threshold": 0.6, "timestamp": 1756920106.3516312}'}
2025-09-03 13:21:47,246 - services.external_task_worker - ERROR - Error executing task 77e5d130-88ea-11f0-bc34-0242ac160003: Task execution failed: [Errno 5] Input/output error
2025-09-03 13:21:47,247 - services.external_task_worker - ERROR - Traceback (most recent call last):
  File "/home/jdehart/working/ODRAS/scripts/task_process_user_query.py", line 117, in process_user_query
    print(f"Processed user query successfully")
    ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
OSError: [Errno 5] Input/output error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jdehart/working/ODRAS/scripts/../backend/services/external_task_worker.py", line 213, in execute_task
    result = handler(task_variables)
  File "/home/jdehart/working/ODRAS/scripts/../backend/services/external_task_worker.py", line 497, in handle_process_user_query
    result = process_user_query(query, query_metadata)
  File "/home/jdehart/working/ODRAS/scripts/task_process_user_query.py", line 125, in process_user_query
    print(f"Query processing failed: {str(e)}")
    ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
OSError: [Errno 5] Input/output error

2025-09-03 13:21:57,377 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:21:57,377 - services.external_task_worker - INFO - Executing task 7ddfa9de-88ea-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:21:57,377 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920116.3733003}'}
2025-09-03 13:21:57,377 - services.external_task_worker - ERROR - Error executing task 7ddfa9de-88ea-11f0-bc34-0242ac160003: Task execution failed: [Errno 5] Input/output error
2025-09-03 13:21:57,378 - services.external_task_worker - ERROR - Traceback (most recent call last):
  File "/home/jdehart/working/ODRAS/scripts/task_process_user_query.py", line 117, in process_user_query
    print(f"Processed user query successfully")
    ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
OSError: [Errno 5] Input/output error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/jdehart/working/ODRAS/scripts/../backend/services/external_task_worker.py", line 213, in execute_task
    result = handler(task_variables)
  File "/home/jdehart/working/ODRAS/scripts/../backend/services/external_task_worker.py", line 497, in handle_process_user_query
    result = process_user_query(query, query_metadata)
  File "/home/jdehart/working/ODRAS/scripts/task_process_user_query.py", line 125, in process_user_query
    print(f"Query processing failed: {str(e)}")
    ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
OSError: [Errno 5] Input/output error

2025-09-03 13:26:31,531 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 13:26:36,829 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756920396
2025-09-03 13:26:37,850 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:26:37,850 - services.external_task_worker - INFO - Executing task 258d142e-88eb-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:26:37,850 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920397.6901603}'}
2025-09-03 13:26:37,865 - services.external_task_worker - INFO - Successfully completed task 258d142e-88eb-11f0-bc34-0242ac160003
2025-09-03 13:26:37,878 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:26:37,879 - services.external_task_worker - INFO - Executing task 25a2e639-88eb-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 13:26:37,879 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920397.6901603}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920397.6901603}, "processing_timestamp": 1756920397.8512287}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:26:37,890 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 13:26:37,966 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 13:26:37,972 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 13:26:37,974 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 13:26:37,992 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 13:26:37,992 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 13:26:39,862 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 13:26:39,863 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 13:26:42,063 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 13:26:42,547 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 13:26:42,558 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 13:26:42,559 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 13:26:42,559 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 13:26:42,580 - services.external_task_worker - INFO - Successfully completed task 25a2e639-88eb-11f0-bc34-0242ac160003
2025-09-03 13:26:42,590 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:26:42,590 - services.external_task_worker - INFO - Executing task 287232ed-88eb-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 13:26:42,590 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920397.6901603}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920397.6901603}, "processing_timestamp": 1756920397.8512287}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:26:42,603 - services.external_task_worker - INFO - Successfully completed task 287232ed-88eb-11f0-bc34-0242ac160003
2025-09-03 13:26:42,615 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:26:42,615 - services.external_task_worker - INFO - Executing task 2875b474-88eb-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 13:26:42,615 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920397.6901603}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920397.6901603}, "processing_timestamp": 1756920397.8512287}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:26:42,629 - services.external_task_worker - INFO - Successfully completed task 2875b474-88eb-11f0-bc34-0242ac160003
2025-09-03 13:26:42,636 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:26:42,637 - services.external_task_worker - INFO - Executing task 28795e09-88eb-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 13:26:42,637 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920397.6901603}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920397.6901603}, "processing_timestamp": 1756920397.8512287}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:26:42,651 - services.external_task_worker - INFO - Successfully completed task 28795e09-88eb-11f0-bc34-0242ac160003
2025-09-03 13:26:42,664 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:26:42,664 - services.external_task_worker - INFO - Executing task 287ce08c-88eb-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 13:26:42,664 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920397.6901603}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920397.6901603}, "processing_timestamp": 1756920397.8512287}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:26:42,680 - services.external_task_worker - INFO - Successfully completed task 287ce08c-88eb-11f0-bc34-0242ac160003
2025-09-03 13:26:42,691 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:26:42,691 - services.external_task_worker - INFO - Executing task 28814d6d-88eb-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 13:26:42,691 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920397.6901603}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920397.6901603}, "processing_timestamp": 1756920397.8512287}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:26:42,707 - services.external_task_worker - INFO - Successfully completed task 28814d6d-88eb-11f0-bc34-0242ac160003
2025-09-03 13:26:42,718 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:26:42,718 - services.external_task_worker - INFO - Executing task 28851e13-88eb-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 13:26:42,718 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920397.6901603}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920397.6901603}, "processing_timestamp": 1756920397.8512287}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:26:42,749 - services.external_task_worker - INFO - Successfully completed task 28851e13-88eb-11f0-bc34-0242ac160003
2025-09-03 13:26:51,787 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 13:26:59,272 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756920419
2025-09-03 13:27:00,217 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 13:27:47,577 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756920467
2025-09-03 13:27:47,587 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:27:47,587 - services.external_task_worker - INFO - Executing task 32ff75dd-88eb-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:27:47,587 - services.external_task_worker - INFO - Task variables: {'user_query': 'test query', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920420.2484093}'}
2025-09-03 13:27:47,599 - services.external_task_worker - INFO - Successfully completed task 32ff75dd-88eb-11f0-bc34-0242ac160003
2025-09-03 13:27:47,610 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:27:47,610 - services.external_task_worker - INFO - Executing task 4f337648-88eb-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 13:27:47,610 - services.external_task_worker - INFO - Task variables: {'user_query': 'test query', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920420.2484093}', 'processed_query': '{"original_query": "test query", "cleaned_query": "test query", "key_terms": ["test", "query"], "question_intent": [], "query_type": "informational", "domain_terms": [], "word_count": 2, "char_count": 10, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920420.2484093}, "processing_timestamp": 1756920467.5883243}', 'search_parameters': '{"primary_terms": ["test", "query"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:27:47,621 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 13:27:47,692 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 13:27:47,697 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 13:27:47,698 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 13:27:47,716 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 13:27:47,716 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 13:27:50,559 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 13:27:50,559 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 13:27:52,657 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 13:27:53,056 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 13:27:53,068 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 13:27:53,069 - services.qdrant_service - INFO - Found 0 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 13:27:53,070 - services.qdrant_service - INFO - Found 0 similar chunks for query: 'test query...'
2025-09-03 13:27:53,082 - services.external_task_worker - INFO - Successfully completed task 4f337648-88eb-11f0-bc34-0242ac160003
2025-09-03 13:27:53,094 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:27:53,094 - services.external_task_worker - INFO - Executing task 4fbf3b92-88eb-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:27:53,094 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920468.4846509}'}
2025-09-03 13:27:53,105 - services.external_task_worker - INFO - Successfully completed task 4fbf3b92-88eb-11f0-bc34-0242ac160003
2025-09-03 13:27:53,105 - services.external_task_worker - INFO - Executing task 52781a16-88eb-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 13:27:53,105 - services.external_task_worker - INFO - Task variables: {'user_query': 'test query', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920420.2484093}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "test query", "cleaned_query": "test query", "key_terms": ["test", "query"], "question_intent": [], "query_type": "informational", "domain_terms": [], "word_count": 2, "char_count": 10, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920420.2484093}, "processing_timestamp": 1756920467.5883243}', 'search_parameters': '{"primary_terms": ["test", "query"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:27:53,117 - services.external_task_worker - INFO - Successfully completed task 52781a16-88eb-11f0-bc34-0242ac160003
2025-09-03 13:27:53,129 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:27:53,129 - services.external_task_worker - INFO - Executing task 527b7591-88eb-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 13:27:53,129 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920468.4846509}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920468.4846509}, "processing_timestamp": 1756920473.0946865}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:27:53,132 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 13:27:53,176 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 13:27:53,181 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 13:27:53,181 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 13:27:53,200 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 13:27:53,200 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 13:27:53,200 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 13:27:53,200 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 13:27:54,151 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 13:27:54,159 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 13:27:54,169 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 13:27:54,169 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 13:27:54,170 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 13:27:54,194 - services.external_task_worker - INFO - Successfully completed task 527b7591-88eb-11f0-bc34-0242ac160003
2025-09-03 13:27:54,194 - services.external_task_worker - INFO - Executing task 527d4a68-88eb-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 13:27:54,194 - services.external_task_worker - INFO - Task variables: {'user_query': 'test query', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920420.2484093}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "test query", "cleaned_query": "test query", "key_terms": ["test", "query"], "question_intent": [], "query_type": "informational", "domain_terms": [], "word_count": 2, "char_count": 10, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920420.2484093}, "processing_timestamp": 1756920467.5883243}', 'search_parameters': '{"primary_terms": ["test", "query"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:27:54,211 - services.external_task_worker - INFO - Successfully completed task 527d4a68-88eb-11f0-bc34-0242ac160003
2025-09-03 13:27:54,225 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:27:54,226 - services.external_task_worker - INFO - Executing task 532179bc-88eb-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 13:27:54,226 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920468.4846509}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920468.4846509}, "processing_timestamp": 1756920473.0946865}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:27:54,239 - services.external_task_worker - INFO - Successfully completed task 532179bc-88eb-11f0-bc34-0242ac160003
2025-09-03 13:27:54,239 - services.external_task_worker - INFO - Executing task 5323e9d1-88eb-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 13:27:54,239 - services.external_task_worker - INFO - Task variables: {'user_query': 'test query', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920420.2484093}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "test query", "cleaned_query": "test query", "key_terms": ["test", "query"], "question_intent": [], "query_type": "informational", "domain_terms": [], "word_count": 2, "char_count": 10, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920420.2484093}, "processing_timestamp": 1756920467.5883243}', 'search_parameters': '{"primary_terms": ["test", "query"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:27:54,252 - services.external_task_worker - INFO - Successfully completed task 5323e9d1-88eb-11f0-bc34-0242ac160003
2025-09-03 13:27:54,264 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:27:54,264 - services.external_task_worker - INFO - Executing task 53287dc8-88eb-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 13:27:54,265 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920468.4846509}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920468.4846509}, "processing_timestamp": 1756920473.0946865}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:27:54,279 - services.external_task_worker - INFO - Successfully completed task 53287dc8-88eb-11f0-bc34-0242ac160003
2025-09-03 13:27:54,279 - services.external_task_worker - INFO - Executing task 532aa0bb-88eb-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 13:27:54,279 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: test query\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'test query', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920420.2484093}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "test query", "cleaned_query": "test query", "key_terms": ["test", "query"], "question_intent": [], "query_type": "informational", "domain_terms": [], "word_count": 2, "char_count": 10, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920420.2484093}, "processing_timestamp": 1756920467.5883243}', 'search_parameters': '{"primary_terms": ["test", "query"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:27:54,292 - services.external_task_worker - INFO - Successfully completed task 532aa0bb-88eb-11f0-bc34-0242ac160003
2025-09-03 13:27:54,304 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:27:54,304 - services.external_task_worker - INFO - Executing task 532e7160-88eb-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 13:27:54,304 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920468.4846509}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920468.4846509}, "processing_timestamp": 1756920473.0946865}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:27:54,318 - services.external_task_worker - INFO - Successfully completed task 532e7160-88eb-11f0-bc34-0242ac160003
2025-09-03 13:27:54,318 - services.external_task_worker - INFO - Executing task 53306d41-88eb-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 13:27:54,319 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: test query\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'test query', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920420.2484093}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "test query", "cleaned_query": "test query", "key_terms": ["test", "query"], "question_intent": [], "query_type": "informational", "domain_terms": [], "word_count": 2, "char_count": 10, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920420.2484093}, "processing_timestamp": 1756920467.5883243}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["test", "query"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:27:54,332 - services.external_task_worker - INFO - Successfully completed task 53306d41-88eb-11f0-bc34-0242ac160003
2025-09-03 13:27:54,345 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:27:54,345 - services.external_task_worker - INFO - Executing task 533464f4-88eb-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 13:27:54,345 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920468.4846509}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920468.4846509}, "processing_timestamp": 1756920473.0946865}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:27:54,359 - services.external_task_worker - INFO - Successfully completed task 533464f4-88eb-11f0-bc34-0242ac160003
2025-09-03 13:27:54,359 - services.external_task_worker - INFO - Executing task 5336aefa-88eb-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 13:27:54,359 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: test query\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'test query', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920420.2484093}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'processed_query': '{"original_query": "test query", "cleaned_query": "test query", "key_terms": ["test", "query"], "question_intent": [], "query_type": "informational", "domain_terms": [], "word_count": 2, "char_count": 10, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920420.2484093}, "processing_timestamp": 1756920467.5883243}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["test", "query"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:27:54,379 - services.external_task_worker - INFO - Successfully completed task 5336aefa-88eb-11f0-bc34-0242ac160003
2025-09-03 13:27:54,390 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:27:54,390 - services.external_task_worker - INFO - Executing task 533a7f9b-88eb-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 13:27:54,390 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920468.4846509}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920468.4846509}, "processing_timestamp": 1756920473.0946865}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:27:54,404 - services.external_task_worker - INFO - Successfully completed task 533a7f9b-88eb-11f0-bc34-0242ac160003
2025-09-03 13:27:54,415 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:27:54,416 - services.external_task_worker - INFO - Executing task 5341abb1-88eb-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 13:27:54,416 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920468.4846509}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920468.4846509}, "processing_timestamp": 1756920473.0946865}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:27:54,439 - services.external_task_worker - INFO - Successfully completed task 5341abb1-88eb-11f0-bc34-0242ac160003
2025-09-03 13:28:30,001 - __main__ - INFO - Received signal 2, shutting down worker...
2025-09-03 13:28:30,002 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 13:28:56,961 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756920536
2025-09-03 13:28:58,985 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:28:58,985 - services.external_task_worker - INFO - Executing task 7955e6ab-88eb-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:28:58,985 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920538.2579508}'}
2025-09-03 13:28:58,996 - services.external_task_worker - INFO - Successfully completed task 7955e6ab-88eb-11f0-bc34-0242ac160003
2025-09-03 13:28:59,006 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:28:59,006 - services.external_task_worker - INFO - Executing task 79c1a0e6-88eb-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 13:28:59,006 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920538.2579508}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920538.2579508}, "processing_timestamp": 1756920538.985693}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:28:59,018 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 13:28:59,083 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 13:28:59,089 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 13:28:59,090 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 13:28:59,110 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 13:28:59,111 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 13:29:01,734 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 13:29:01,734 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 13:29:03,817 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 13:29:04,156 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 13:29:04,168 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 13:29:04,169 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 13:29:04,170 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 13:29:04,195 - services.external_task_worker - INFO - Successfully completed task 79c1a0e6-88eb-11f0-bc34-0242ac160003
2025-09-03 13:29:04,208 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:29:04,208 - services.external_task_worker - INFO - Executing task 7cdac6da-88eb-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 13:29:04,208 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920538.2579508}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920538.2579508}, "processing_timestamp": 1756920538.985693}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:29:04,219 - services.external_task_worker - INFO - Successfully completed task 7cdac6da-88eb-11f0-bc34-0242ac160003
2025-09-03 13:29:04,226 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:29:04,227 - services.external_task_worker - INFO - Executing task 7cdebe91-88eb-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 13:29:04,227 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920538.2579508}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920538.2579508}, "processing_timestamp": 1756920538.985693}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:29:04,235 - services.external_task_worker - INFO - Successfully completed task 7cdebe91-88eb-11f0-bc34-0242ac160003
2025-09-03 13:29:04,243 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:29:04,243 - services.external_task_worker - INFO - Executing task 7ce12fa6-88eb-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 13:29:04,243 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920538.2579508}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920538.2579508}, "processing_timestamp": 1756920538.985693}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:29:04,253 - services.external_task_worker - INFO - Successfully completed task 7ce12fa6-88eb-11f0-bc34-0242ac160003
2025-09-03 13:29:04,262 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:29:04,262 - services.external_task_worker - INFO - Executing task 7ce3c7c9-88eb-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 13:29:04,262 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920538.2579508}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920538.2579508}, "processing_timestamp": 1756920538.985693}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:29:04,274 - services.external_task_worker - INFO - Successfully completed task 7ce3c7c9-88eb-11f0-bc34-0242ac160003
2025-09-03 13:29:04,282 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:29:04,282 - services.external_task_worker - INFO - Executing task 7ce6d51a-88eb-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 13:29:04,282 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920538.2579508}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920538.2579508}, "processing_timestamp": 1756920538.985693}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:29:04,294 - services.external_task_worker - INFO - Successfully completed task 7ce6d51a-88eb-11f0-bc34-0242ac160003
2025-09-03 13:29:04,302 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:29:04,303 - services.external_task_worker - INFO - Executing task 7cea0980-88eb-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 13:29:04,303 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920538.2579508}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920538.2579508}, "processing_timestamp": 1756920538.985693}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:29:04,328 - services.external_task_worker - INFO - Successfully completed task 7cea0980-88eb-11f0-bc34-0242ac160003
2025-09-03 13:30:01,330 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 13:32:00,811 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756920720
2025-09-03 13:32:02,837 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:32:02,837 - services.external_task_worker - INFO - Executing task e6ce7f46-88eb-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:32:02,837 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920721.9199748}'}
2025-09-03 13:32:02,848 - services.external_task_worker - INFO - Successfully completed task e6ce7f46-88eb-11f0-bc34-0242ac160003
2025-09-03 13:32:02,855 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:32:02,855 - services.external_task_worker - INFO - Executing task e7575e71-88eb-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 13:32:02,855 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920721.9199748}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920721.9199748}, "processing_timestamp": 1756920722.837785}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:32:02,866 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 13:32:02,930 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 13:32:02,935 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 13:32:02,936 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 13:32:02,952 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 13:32:02,952 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 13:32:05,843 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 13:32:05,843 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 13:32:07,717 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 13:32:08,055 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 13:32:08,065 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 13:32:08,066 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 13:32:08,066 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 13:32:08,085 - services.external_task_worker - INFO - Successfully completed task e7575e71-88eb-11f0-bc34-0242ac160003
2025-09-03 13:32:08,095 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:32:08,095 - services.external_task_worker - INFO - Executing task ea7678d5-88eb-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 13:32:08,095 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920721.9199748}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920721.9199748}, "processing_timestamp": 1756920722.837785}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:32:08,108 - services.external_task_worker - INFO - Successfully completed task ea7678d5-88eb-11f0-bc34-0242ac160003
2025-09-03 13:32:08,117 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:32:08,117 - services.external_task_worker - INFO - Executing task ea79ad3c-88eb-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 13:32:08,117 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920721.9199748}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920721.9199748}, "processing_timestamp": 1756920722.837785}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:32:08,129 - services.external_task_worker - INFO - Successfully completed task ea79ad3c-88eb-11f0-bc34-0242ac160003
2025-09-03 13:32:08,138 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:32:08,139 - services.external_task_worker - INFO - Executing task ea7d2fc1-88eb-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 13:32:08,139 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920721.9199748}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920721.9199748}, "processing_timestamp": 1756920722.837785}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:32:08,150 - services.external_task_worker - INFO - Successfully completed task ea7d2fc1-88eb-11f0-bc34-0242ac160003
2025-09-03 13:32:08,162 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:32:08,163 - services.external_task_worker - INFO - Executing task ea806324-88eb-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 13:32:08,163 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920721.9199748}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920721.9199748}, "processing_timestamp": 1756920722.837785}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:32:08,175 - services.external_task_worker - INFO - Successfully completed task ea806324-88eb-11f0-bc34-0242ac160003
2025-09-03 13:32:08,185 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:32:08,185 - services.external_task_worker - INFO - Executing task ea840cb5-88eb-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 13:32:08,185 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920721.9199748}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920721.9199748}, "processing_timestamp": 1756920722.837785}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:32:08,198 - services.external_task_worker - INFO - Successfully completed task ea840cb5-88eb-11f0-bc34-0242ac160003
2025-09-03 13:32:08,208 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:32:08,208 - services.external_task_worker - INFO - Executing task ea87b64b-88eb-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 13:32:08,208 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920721.9199748}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920721.9199748}, "processing_timestamp": 1756920722.837785}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:32:08,229 - services.external_task_worker - INFO - Successfully completed task ea87b64b-88eb-11f0-bc34-0242ac160003
2025-09-03 13:32:31,978 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 13:34:46,936 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756920886
2025-09-03 13:34:48,964 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:34:48,964 - services.external_task_worker - INFO - Executing task 49e79b25-88ec-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:34:48,964 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920888.1797144}'}
2025-09-03 13:34:48,974 - services.external_task_worker - INFO - Successfully completed task 49e79b25-88ec-11f0-bc34-0242ac160003
2025-09-03 13:34:48,982 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:34:48,983 - services.external_task_worker - INFO - Executing task 4a5c2f00-88ec-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 13:34:48,983 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920888.1797144}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920888.1797144}, "processing_timestamp": 1756920888.9651916}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:34:48,994 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 13:34:49,061 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 13:34:49,066 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 13:34:49,067 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 13:34:49,083 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 13:34:49,084 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 13:34:51,991 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 13:34:51,991 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 13:34:53,998 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 13:34:54,311 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 13:34:54,319 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 13:34:54,320 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 13:34:54,321 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 13:34:54,338 - services.external_task_worker - INFO - Successfully completed task 4a5c2f00-88ec-11f0-bc34-0242ac160003
2025-09-03 13:34:54,347 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:34:54,348 - services.external_task_worker - INFO - Executing task 4d8eaa54-88ec-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 13:34:54,348 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920888.1797144}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920888.1797144}, "processing_timestamp": 1756920888.9651916}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:34:54,359 - services.external_task_worker - INFO - Successfully completed task 4d8eaa54-88ec-11f0-bc34-0242ac160003
2025-09-03 13:34:54,368 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:34:54,369 - services.external_task_worker - INFO - Executing task 4d91909b-88ec-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 13:34:54,369 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920888.1797144}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920888.1797144}, "processing_timestamp": 1756920888.9651916}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:34:54,382 - services.external_task_worker - INFO - Successfully completed task 4d91909b-88ec-11f0-bc34-0242ac160003
2025-09-03 13:34:54,398 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:34:54,399 - services.external_task_worker - INFO - Executing task 4d951320-88ec-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 13:34:54,399 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920888.1797144}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920888.1797144}, "processing_timestamp": 1756920888.9651916}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:34:54,417 - services.external_task_worker - INFO - Successfully completed task 4d951320-88ec-11f0-bc34-0242ac160003
2025-09-03 13:34:54,429 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:34:54,430 - services.external_task_worker - INFO - Executing task 4d9a1c43-88ec-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 13:34:54,430 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920888.1797144}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920888.1797144}, "processing_timestamp": 1756920888.9651916}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:34:54,445 - services.external_task_worker - INFO - Successfully completed task 4d9a1c43-88ec-11f0-bc34-0242ac160003
2025-09-03 13:34:54,456 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:34:54,456 - services.external_task_worker - INFO - Executing task 4d9eb034-88ec-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 13:34:54,456 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920888.1797144}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920888.1797144}, "processing_timestamp": 1756920888.9651916}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:34:54,469 - services.external_task_worker - INFO - Successfully completed task 4d9eb034-88ec-11f0-bc34-0242ac160003
2025-09-03 13:34:54,480 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:34:54,480 - services.external_task_worker - INFO - Executing task 4da280da-88ec-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 13:34:54,480 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920888.1797144}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756920888.1797144}, "processing_timestamp": 1756920888.9651916}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:34:54,500 - services.external_task_worker - INFO - Successfully completed task 4da280da-88ec-11f0-bc34-0242ac160003
2025-09-03 13:34:55,373 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 13:38:10,879 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756921090
2025-09-03 13:38:10,891 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:38:10,891 - services.external_task_worker - INFO - Executing task c2486964-88ec-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:38:10,891 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921090.1427448}'}
2025-09-03 13:38:10,903 - services.external_task_worker - INFO - Successfully completed task c2486964-88ec-11f0-bc34-0242ac160003
2025-09-03 13:38:10,915 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:38:10,915 - services.external_task_worker - INFO - Executing task c2b7f32f-88ec-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 13:38:10,915 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921090.1427448}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921090.1427448}, "processing_timestamp": 1756921090.8920193}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:38:10,928 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 13:38:10,997 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 13:38:11,002 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 13:38:11,003 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 13:38:11,021 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 13:38:11,021 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 13:38:13,921 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 13:38:13,921 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 13:38:16,413 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 13:38:16,732 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 13:38:16,742 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 13:38:16,743 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 13:38:16,744 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 13:38:16,763 - services.external_task_worker - INFO - Successfully completed task c2b7f32f-88ec-11f0-bc34-0242ac160003
2025-09-03 13:38:16,771 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:38:16,771 - services.external_task_worker - INFO - Executing task c6361d83-88ec-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 13:38:16,771 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921090.1427448}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921090.1427448}, "processing_timestamp": 1756921090.8920193}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:38:16,783 - services.external_task_worker - INFO - Successfully completed task c6361d83-88ec-11f0-bc34-0242ac160003
2025-09-03 13:38:16,795 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:38:16,796 - services.external_task_worker - INFO - Executing task c63951ea-88ec-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 13:38:16,796 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921090.1427448}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921090.1427448}, "processing_timestamp": 1756921090.8920193}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:38:16,809 - services.external_task_worker - INFO - Successfully completed task c63951ea-88ec-11f0-bc34-0242ac160003
2025-09-03 13:38:16,819 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:38:16,819 - services.external_task_worker - INFO - Executing task c63cd46f-88ec-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 13:38:16,819 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921090.1427448}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921090.1427448}, "processing_timestamp": 1756921090.8920193}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:38:16,832 - services.external_task_worker - INFO - Successfully completed task c63cd46f-88ec-11f0-bc34-0242ac160003
2025-09-03 13:38:16,841 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:38:16,842 - services.external_task_worker - INFO - Executing task c640a512-88ec-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 13:38:16,842 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921090.1427448}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921090.1427448}, "processing_timestamp": 1756921090.8920193}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:38:16,852 - services.external_task_worker - INFO - Successfully completed task c640a512-88ec-11f0-bc34-0242ac160003
2025-09-03 13:38:16,863 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:38:16,863 - services.external_task_worker - INFO - Executing task c6440083-88ec-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 13:38:16,863 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921090.1427448}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921090.1427448}, "processing_timestamp": 1756921090.8920193}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:38:16,872 - services.external_task_worker - INFO - Successfully completed task c6440083-88ec-11f0-bc34-0242ac160003
2025-09-03 13:38:16,881 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:38:16,881 - services.external_task_worker - INFO - Executing task c646e6c9-88ec-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 13:38:16,881 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921090.1427448}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921090.1427448}, "processing_timestamp": 1756921090.8920193}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:38:16,897 - services.external_task_worker - INFO - Successfully completed task c646e6c9-88ec-11f0-bc34-0242ac160003
2025-09-03 13:38:30,290 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 13:39:26,289 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756921166
2025-09-03 13:39:26,318 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:39:26,318 - services.external_task_worker - INFO - Executing task ef71d7a3-88ec-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:39:26,318 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921165.907779}'}
2025-09-03 13:39:26,351 - services.external_task_worker - INFO - Successfully completed task ef71d7a3-88ec-11f0-bc34-0242ac160003
2025-09-03 13:39:26,382 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:39:26,382 - services.external_task_worker - INFO - Executing task efaf2ede-88ec-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 13:39:26,382 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921165.907779}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921165.907779}, "processing_timestamp": 1756921166.3189824}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:39:26,392 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 13:39:26,452 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 13:39:26,459 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 13:39:26,460 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 13:39:26,474 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 13:39:26,474 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 13:39:29,242 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 13:39:29,243 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 13:39:31,354 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 13:39:31,651 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 13:39:31,662 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 13:39:31,663 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 13:39:31,663 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 13:39:31,683 - services.external_task_worker - INFO - Successfully completed task efaf2ede-88ec-11f0-bc34-0242ac160003
2025-09-03 13:39:31,693 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:39:31,693 - services.external_task_worker - INFO - Executing task f2de00b2-88ec-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 13:39:31,693 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921165.907779}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921165.907779}, "processing_timestamp": 1756921166.3189824}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:39:31,706 - services.external_task_worker - INFO - Successfully completed task f2de00b2-88ec-11f0-bc34-0242ac160003
2025-09-03 13:39:31,717 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:39:31,718 - services.external_task_worker - INFO - Executing task f2e15c29-88ec-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 13:39:31,718 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921165.907779}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921165.907779}, "processing_timestamp": 1756921166.3189824}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:39:31,730 - services.external_task_worker - INFO - Successfully completed task f2e15c29-88ec-11f0-bc34-0242ac160003
2025-09-03 13:39:31,742 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:39:31,742 - services.external_task_worker - INFO - Executing task f2e52cce-88ec-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 13:39:31,743 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921165.907779}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921165.907779}, "processing_timestamp": 1756921166.3189824}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:39:31,755 - services.external_task_worker - INFO - Successfully completed task f2e52cce-88ec-11f0-bc34-0242ac160003
2025-09-03 13:39:31,764 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:39:31,765 - services.external_task_worker - INFO - Executing task f2e8fc71-88ec-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 13:39:31,765 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921165.907779}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921165.907779}, "processing_timestamp": 1756921166.3189824}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:39:31,775 - services.external_task_worker - INFO - Successfully completed task f2e8fc71-88ec-11f0-bc34-0242ac160003
2025-09-03 13:39:31,783 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:39:31,784 - services.external_task_worker - INFO - Executing task f2ec30d2-88ec-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 13:39:31,784 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921165.907779}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921165.907779}, "processing_timestamp": 1756921166.3189824}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:39:31,794 - services.external_task_worker - INFO - Successfully completed task f2ec30d2-88ec-11f0-bc34-0242ac160003
2025-09-03 13:39:31,802 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:39:31,803 - services.external_task_worker - INFO - Executing task f2eef008-88ec-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 13:39:31,803 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921165.907779}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921165.907779}, "processing_timestamp": 1756921166.3189824}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:39:31,821 - services.external_task_worker - INFO - Successfully completed task f2eef008-88ec-11f0-bc34-0242ac160003
2025-09-03 13:39:45,992 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 13:40:45,572 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756921245
2025-09-03 13:40:45,704 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 13:40:51,446 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756921251
2025-09-03 13:40:51,454 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:40:51,454 - services.external_task_worker - INFO - Executing task 1f627c32-88ed-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:40:51,454 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921246.3362563}'}
2025-09-03 13:40:51,464 - services.external_task_worker - INFO - Successfully completed task 1f627c32-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:51,464 - services.external_task_worker - INFO - Executing task 2202064c-88ed-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:40:51,464 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921250.7387056}'}
2025-09-03 13:40:51,474 - services.external_task_worker - INFO - Successfully completed task 2202064c-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:51,484 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:40:51,484 - services.external_task_worker - INFO - Executing task 226b9da7-88ed-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 13:40:51,484 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921246.3362563}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921246.3362563}, "processing_timestamp": 1756921251.4549668}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:40:51,497 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 13:40:51,566 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 13:40:51,572 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 13:40:51,573 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 13:40:51,591 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 13:40:51,591 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 13:40:54,274 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 13:40:54,274 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 13:40:56,278 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 13:40:56,568 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 13:40:56,575 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 13:40:56,577 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 13:40:56,577 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 13:40:56,596 - services.external_task_worker - INFO - Successfully completed task 226b9da7-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:56,596 - services.external_task_worker - INFO - Executing task 226d4b72-88ed-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 13:40:56,596 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921250.7387056}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921250.7387056}, "processing_timestamp": 1756921251.4649065}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:40:56,599 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 13:40:56,645 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 13:40:56,649 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 13:40:56,649 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 13:40:56,664 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 13:40:56,664 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 13:40:56,665 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 13:40:56,665 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 13:40:57,550 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 13:40:57,556 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 13:40:57,564 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 13:40:57,564 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 13:40:57,564 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 13:40:57,581 - services.external_task_worker - INFO - Successfully completed task 226d4b72-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:57,592 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:40:57,592 - services.external_task_worker - INFO - Executing task 257a8b86-88ed-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 13:40:57,592 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921246.3362563}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921246.3362563}, "processing_timestamp": 1756921251.4549668}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:40:57,605 - services.external_task_worker - INFO - Successfully completed task 257a8b86-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:57,605 - services.external_task_worker - INFO - Executing task 2610ff3a-88ed-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 13:40:57,605 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921250.7387056}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921250.7387056}, "processing_timestamp": 1756921251.4649065}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:40:57,617 - services.external_task_worker - INFO - Successfully completed task 2610ff3a-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:57,630 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:40:57,630 - services.external_task_worker - INFO - Executing task 261481c1-88ed-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 13:40:57,630 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921246.3362563}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921246.3362563}, "processing_timestamp": 1756921251.4549668}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:40:57,643 - services.external_task_worker - INFO - Successfully completed task 261481c1-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:57,643 - services.external_task_worker - INFO - Executing task 26167da8-88ed-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 13:40:57,643 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921250.7387056}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921250.7387056}, "processing_timestamp": 1756921251.4649065}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:40:57,660 - services.external_task_worker - INFO - Successfully completed task 26167da8-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:57,676 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:40:57,677 - services.external_task_worker - INFO - Executing task 261a4e4d-88ed-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 13:40:57,677 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921246.3362563}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921246.3362563}, "processing_timestamp": 1756921251.4549668}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:40:57,696 - services.external_task_worker - INFO - Successfully completed task 261a4e4d-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:57,696 - services.external_task_worker - INFO - Executing task 261cbe62-88ed-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 13:40:57,696 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921250.7387056}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921250.7387056}, "processing_timestamp": 1756921251.4649065}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:40:57,713 - services.external_task_worker - INFO - Successfully completed task 261cbe62-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:57,730 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:40:57,731 - services.external_task_worker - INFO - Executing task 262215a5-88ed-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 13:40:57,731 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921246.3362563}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921246.3362563}, "processing_timestamp": 1756921251.4549668}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:40:57,749 - services.external_task_worker - INFO - Successfully completed task 262215a5-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:57,750 - services.external_task_worker - INFO - Executing task 2624adc8-88ed-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 13:40:57,750 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921250.7387056}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921250.7387056}, "processing_timestamp": 1756921251.4649065}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:40:57,766 - services.external_task_worker - INFO - Successfully completed task 2624adc8-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:57,783 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:40:57,783 - services.external_task_worker - INFO - Executing task 262a5329-88ed-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 13:40:57,783 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921246.3362563}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921246.3362563}, "processing_timestamp": 1756921251.4549668}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:40:57,802 - services.external_task_worker - INFO - Successfully completed task 262a5329-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:57,802 - services.external_task_worker - INFO - Executing task 262d125a-88ed-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 13:40:57,802 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921250.7387056}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921250.7387056}, "processing_timestamp": 1756921251.4649065}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:40:57,820 - services.external_task_worker - INFO - Successfully completed task 262d125a-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:57,837 - services.external_task_worker - INFO - Received 2 tasks
2025-09-03 13:40:57,838 - services.external_task_worker - INFO - Executing task 263269a0-88ed-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 13:40:57,838 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921246.3362563}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921246.3362563}, "processing_timestamp": 1756921251.4549668}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:40:57,882 - services.external_task_worker - INFO - Successfully completed task 263269a0-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:57,882 - services.external_task_worker - INFO - Executing task 263528d6-88ed-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 13:40:57,883 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921250.7387056}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921250.7387056}, "processing_timestamp": 1756921251.4649065}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:40:57,921 - services.external_task_worker - INFO - Successfully completed task 263528d6-88ed-11f0-bc34-0242ac160003
2025-09-03 13:40:58,900 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 13:41:16,229 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756921276
2025-09-03 13:41:16,240 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:41:16,240 - services.external_task_worker - INFO - Executing task 30702dc0-88ed-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:41:16,240 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921274.9348338}'}
2025-09-03 13:41:16,251 - services.external_task_worker - INFO - Successfully completed task 30702dc0-88ed-11f0-bc34-0242ac160003
2025-09-03 13:41:16,260 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:41:16,260 - services.external_task_worker - INFO - Executing task 3131f73b-88ed-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 13:41:16,260 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921274.9348338}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921274.9348338}, "processing_timestamp": 1756921276.2408845}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:41:16,270 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 13:41:16,337 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 13:41:16,342 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 13:41:16,343 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 13:41:16,358 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 13:41:16,358 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 13:41:19,263 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 13:41:19,263 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 13:41:21,493 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 13:41:21,899 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 13:41:21,910 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 13:41:21,912 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 13:41:21,912 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 13:41:21,938 - services.external_task_worker - INFO - Successfully completed task 3131f73b-88ed-11f0-bc34-0242ac160003
2025-09-03 13:41:21,948 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:41:21,949 - services.external_task_worker - INFO - Executing task 3494d15f-88ed-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 13:41:21,949 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921274.9348338}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921274.9348338}, "processing_timestamp": 1756921276.2408845}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:41:21,959 - services.external_task_worker - INFO - Successfully completed task 3494d15f-88ed-11f0-bc34-0242ac160003
2025-09-03 13:41:21,969 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:41:21,970 - services.external_task_worker - INFO - Executing task 3498f026-88ed-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 13:41:21,970 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921274.9348338}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921274.9348338}, "processing_timestamp": 1756921276.2408845}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:41:21,981 - services.external_task_worker - INFO - Successfully completed task 3498f026-88ed-11f0-bc34-0242ac160003
2025-09-03 13:41:21,990 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:41:21,990 - services.external_task_worker - INFO - Executing task 349c238b-88ed-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 13:41:21,990 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921274.9348338}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921274.9348338}, "processing_timestamp": 1756921276.2408845}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:41:22,002 - services.external_task_worker - INFO - Successfully completed task 349c238b-88ed-11f0-bc34-0242ac160003
2025-09-03 13:41:22,014 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:41:22,014 - services.external_task_worker - INFO - Executing task 349f57ee-88ed-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 13:41:22,014 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921274.9348338}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921274.9348338}, "processing_timestamp": 1756921276.2408845}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:41:22,026 - services.external_task_worker - INFO - Successfully completed task 349f57ee-88ed-11f0-bc34-0242ac160003
2025-09-03 13:41:22,035 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:41:22,035 - services.external_task_worker - INFO - Executing task 34a3017f-88ed-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 13:41:22,035 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921274.9348338}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921274.9348338}, "processing_timestamp": 1756921276.2408845}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:41:22,047 - services.external_task_worker - INFO - Successfully completed task 34a3017f-88ed-11f0-bc34-0242ac160003
2025-09-03 13:41:22,055 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:41:22,055 - services.external_task_worker - INFO - Executing task 34a635e5-88ed-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 13:41:22,055 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921274.9348338}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921274.9348338}, "processing_timestamp": 1756921276.2408845}', 'llm_response': 'Based on the provided context, I can provide the following information:\n\nThe system processes user requests through a structured pipeline that includes validation, analysis, and response generation. The requirements specify that all inputs must be validated before processing to ensure system reliability and security.\n\nKey points from the context:\n- Input validation is mandatory for all user requests\n- The system follows established requirements for processing\n- Quality assurance processes ensure reliable operation\n\nThis response is generated based on the available context chunks retrieved from the knowledge base.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:41:22,072 - services.external_task_worker - INFO - Successfully completed task 34a635e5-88ed-11f0-bc34-0242ac160003
2025-09-03 13:41:23,108 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 13:46:14,433 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756921574
2025-09-03 13:46:14,444 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:46:14,445 - services.external_task_worker - INFO - Executing task e27af17f-88ed-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 13:46:14,445 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921573.6534402}'}
2025-09-03 13:46:14,455 - services.external_task_worker - INFO - Successfully completed task e27af17f-88ed-11f0-bc34-0242ac160003
2025-09-03 13:46:14,465 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:46:14,465 - services.external_task_worker - INFO - Executing task e2f0219a-88ed-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 13:46:14,465 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921573.6534402}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921573.6534402}, "processing_timestamp": 1756921574.4456499}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:46:14,476 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 13:46:14,538 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 13:46:14,543 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 13:46:14,544 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 13:46:14,559 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 13:46:14,560 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 13:46:16,444 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 13:46:16,444 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 13:46:18,662 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 13:46:18,989 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 13:46:19,006 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 13:46:19,007 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 13:46:19,008 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 13:46:19,028 - services.external_task_worker - INFO - Successfully completed task e2f0219a-88ed-11f0-bc34-0242ac160003
2025-09-03 13:46:19,044 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:46:19,044 - services.external_task_worker - INFO - Executing task e5a9ea7e-88ed-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 13:46:19,044 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921573.6534402}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921573.6534402}, "processing_timestamp": 1756921574.4456499}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:46:19,054 - services.external_task_worker - INFO - Successfully completed task e5a9ea7e-88ed-11f0-bc34-0242ac160003
2025-09-03 13:46:19,065 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:46:19,065 - services.external_task_worker - INFO - Executing task e5ae0945-88ed-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 13:46:19,065 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921573.6534402}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921573.6534402}, "processing_timestamp": 1756921574.4456499}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:46:19,077 - services.external_task_worker - INFO - Successfully completed task e5ae0945-88ed-11f0-bc34-0242ac160003
2025-09-03 13:46:19,086 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:46:19,087 - services.external_task_worker - INFO - Executing task e5b164ba-88ed-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 13:46:19,087 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921573.6534402}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921573.6534402}, "processing_timestamp": 1756921574.4456499}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:46:19,098 - services.external_task_worker - INFO - Successfully completed task e5b164ba-88ed-11f0-bc34-0242ac160003
2025-09-03 13:46:19,108 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:46:19,108 - services.external_task_worker - INFO - Executing task e5b4c02d-88ed-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 13:46:19,109 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921573.6534402}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921573.6534402}, "processing_timestamp": 1756921574.4456499}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:46:19,119 - services.external_task_worker - INFO - Successfully completed task e5b4c02d-88ed-11f0-bc34-0242ac160003
2025-09-03 13:46:19,129 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:46:19,129 - services.external_task_worker - INFO - Executing task e5b7cd7e-88ed-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 13:46:19,129 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921573.6534402}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921573.6534402}, "processing_timestamp": 1756921574.4456499}', 'llm_response': 'Based on the navigation system requirements provided in the context:\n\nThe required position accuracy is 3 meters CEP (Circular Error Probable).\n\nAdditional accuracy specifications from the context:\n- Heading accuracy: 2 degrees  \n- Speed accuracy: 0.1 m/s\n\nThis information is sourced from the Navigation System Requirements documentation.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:46:19,139 - services.external_task_worker - INFO - Successfully completed task e5b7cd7e-88ed-11f0-bc34-0242ac160003
2025-09-03 13:46:19,149 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 13:46:19,149 - services.external_task_worker - INFO - Executing task e5badad4-88ed-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 13:46:19,149 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921573.6534402}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the navigation system requirements provided in the context:\n\nThe required position accuracy is 3 meters CEP (Circular Error Probable).\n\nAdditional accuracy specifications from the context:\n- Heading accuracy: 2 degrees  \n- Speed accuracy: 0.1 m/s\n\nThis information is sourced from the Navigation System Requirements documentation.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756921573.6534402}, "processing_timestamp": 1756921574.4456499}', 'llm_response': 'Based on the navigation system requirements provided in the context:\n\nThe required position accuracy is 3 meters CEP (Circular Error Probable).\n\nAdditional accuracy specifications from the context:\n- Heading accuracy: 2 degrees  \n- Speed accuracy: 0.1 m/s\n\nThis information is sourced from the Navigation System Requirements documentation.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 13:46:19,168 - services.external_task_worker - INFO - Successfully completed task e5badad4-88ed-11f0-bc34-0242ac160003
2025-09-03 13:46:19,833 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 14:03:51,292 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756922631
2025-09-03 14:03:51,300 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:03:51,300 - services.external_task_worker - INFO - Executing task 58925926-88f0-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:03:51,300 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756922630.7783544}'}
2025-09-03 14:03:51,308 - services.external_task_worker - INFO - Successfully completed task 58925926-88f0-11f0-bc34-0242ac160003
2025-09-03 14:03:51,313 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:03:51,313 - services.external_task_worker - INFO - Executing task 58df67d1-88f0-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:03:51,313 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756922630.7783544}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756922630.7783544}, "processing_timestamp": 1756922631.300992}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:03:51,323 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:03:51,382 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:03:51,389 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:03:51,390 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:03:51,439 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:03:51,439 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:03:53,661 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:03:53,662 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:03:55,930 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:03:56,262 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:03:56,272 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:03:56,273 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 14:03:56,273 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 14:03:56,289 - services.external_task_worker - INFO - Successfully completed task 58df67d1-88f0-11f0-bc34-0242ac160003
2025-09-03 14:03:56,295 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:03:56,296 - services.external_task_worker - INFO - Executing task 5bd74b25-88f0-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:03:56,296 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756922630.7783544}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756922630.7783544}, "processing_timestamp": 1756922631.300992}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:03:56,303 - services.external_task_worker - INFO - Successfully completed task 5bd74b25-88f0-11f0-bc34-0242ac160003
2025-09-03 14:03:56,311 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:03:56,311 - services.external_task_worker - INFO - Executing task 5bd9952c-88f0-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:03:56,312 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756922630.7783544}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756922630.7783544}, "processing_timestamp": 1756922631.300992}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:03:56,321 - services.external_task_worker - INFO - Successfully completed task 5bd9952c-88f0-11f0-bc34-0242ac160003
2025-09-03 14:03:56,330 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:03:56,330 - services.external_task_worker - INFO - Executing task 5bdc2d51-88f0-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:03:56,330 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756922630.7783544}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756922630.7783544}, "processing_timestamp": 1756922631.300992}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:03:56,343 - services.external_task_worker - INFO - Successfully completed task 5bdc2d51-88f0-11f0-bc34-0242ac160003
2025-09-03 14:03:56,353 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:03:56,353 - services.external_task_worker - INFO - Executing task 5bdf3aa4-88f0-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:03:56,353 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756922630.7783544}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756922630.7783544}, "processing_timestamp": 1756922631.300992}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:03:56,363 - services.external_task_worker - INFO - Successfully completed task 5bdf3aa4-88f0-11f0-bc34-0242ac160003
2025-09-03 14:03:56,373 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:03:56,373 - services.external_task_worker - INFO - Executing task 5be29615-88f0-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:03:56,373 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756922630.7783544}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756922630.7783544}, "processing_timestamp": 1756922631.300992}', 'llm_response': 'Based on the navigation system requirements provided in the context:\n\nThe required position accuracy is 3 meters CEP (Circular Error Probable).\n\nAdditional accuracy specifications from the context:\n- Heading accuracy: 2 degrees  \n- Speed accuracy: 0.1 m/s\n\nThis information is sourced from the Navigation System Requirements documentation.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:03:56,384 - services.external_task_worker - INFO - Successfully completed task 5be29615-88f0-11f0-bc34-0242ac160003
2025-09-03 14:03:56,393 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:03:56,394 - services.external_task_worker - INFO - Executing task 5be5a36b-88f0-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:03:56,394 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756922630.7783544}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the navigation system requirements provided in the context:\n\nThe required position accuracy is 3 meters CEP (Circular Error Probable).\n\nAdditional accuracy specifications from the context:\n- Heading accuracy: 2 degrees  \n- Speed accuracy: 0.1 m/s\n\nThis information is sourced from the Navigation System Requirements documentation.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756922630.7783544}, "processing_timestamp": 1756922631.300992}', 'llm_response': 'Based on the navigation system requirements provided in the context:\n\nThe required position accuracy is 3 meters CEP (Circular Error Probable).\n\nAdditional accuracy specifications from the context:\n- Heading accuracy: 2 degrees  \n- Speed accuracy: 0.1 m/s\n\nThis information is sourced from the Navigation System Requirements documentation.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:03:56,411 - services.external_task_worker - INFO - Successfully completed task 5be5a36b-88f0-11f0-bc34-0242ac160003
2025-09-03 14:03:56,893 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 14:12:33,658 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756923153
2025-09-03 14:12:33,668 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:12:33,668 - services.external_task_worker - INFO - Executing task 8ff81035-88f1-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:12:33,669 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923153.2125268}'}
2025-09-03 14:12:33,678 - services.external_task_worker - INFO - Successfully completed task 8ff81035-88f1-11f0-bc34-0242ac160003
2025-09-03 14:12:33,685 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:12:33,685 - services.external_task_worker - INFO - Executing task 903a9790-88f1-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:12:33,685 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923153.2125268}', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923153.2125268}, "processing_timestamp": 1756923153.6693544}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:12:33,697 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:12:33,773 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:12:33,781 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:12:33,782 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:12:33,799 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:12:33,799 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:12:36,581 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:12:36,582 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:12:38,684 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:12:38,994 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:12:39,003 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:12:39,004 - services.qdrant_service - INFO - Found 0 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 14:12:39,004 - services.qdrant_service - INFO - Found 0 similar chunks for query: 'What frequency does the Communication Interfaces o...'
2025-09-03 14:12:39,014 - services.external_task_worker - INFO - Successfully completed task 903a9790-88f1-11f0-bc34-0242ac160003
2025-09-03 14:12:39,021 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:12:39,021 - services.external_task_worker - INFO - Executing task 9368cd24-88f1-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:12:39,021 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923153.2125268}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923153.2125268}, "processing_timestamp": 1756923153.6693544}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:12:39,030 - services.external_task_worker - INFO - Successfully completed task 9368cd24-88f1-11f0-bc34-0242ac160003
2025-09-03 14:12:39,036 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:12:39,036 - services.external_task_worker - INFO - Executing task 936b3d3b-88f1-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:12:39,036 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923153.2125268}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923153.2125268}, "processing_timestamp": 1756923153.6693544}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:12:39,044 - services.external_task_worker - INFO - Successfully completed task 936b3d3b-88f1-11f0-bc34-0242ac160003
2025-09-03 14:12:39,050 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:12:39,050 - services.external_task_worker - INFO - Executing task 936d8740-88f1-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:12:39,050 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923153.2125268}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923153.2125268}, "processing_timestamp": 1756923153.6693544}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:12:39,057 - services.external_task_worker - INFO - Successfully completed task 936d8740-88f1-11f0-bc34-0242ac160003
2025-09-03 14:12:39,063 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:12:39,063 - services.external_task_worker - INFO - Executing task 936f8323-88f1-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:12:39,064 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What frequency does the Communication Interfaces operate at?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923153.2125268}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923153.2125268}, "processing_timestamp": 1756923153.6693544}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:12:39,070 - services.external_task_worker - INFO - Successfully completed task 936f8323-88f1-11f0-bc34-0242ac160003
2025-09-03 14:12:39,076 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:12:39,076 - services.external_task_worker - INFO - Executing task 93717f04-88f1-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:12:39,076 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What frequency does the Communication Interfaces operate at?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923153.2125268}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923153.2125268}, "processing_timestamp": 1756923153.6693544}', 'llm_response': "I don't have enough specific information in the provided context to answer your question accurately. Please try rephrasing your question or ensure the relevant documentation is available in the knowledge base.", 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:12:39,083 - services.external_task_worker - INFO - Successfully completed task 93717f04-88f1-11f0-bc34-0242ac160003
2025-09-03 14:12:39,094 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:12:39,095 - services.external_task_worker - INFO - Executing task 93737aea-88f1-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:12:39,095 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: What frequency does the Communication Interfaces operate at?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923153.2125268}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': "I don't have enough specific information in the provided context to answer your question accurately. Please try rephrasing your question or ensure the relevant documentation is available in the knowledge base.", 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923153.2125268}, "processing_timestamp": 1756923153.6693544}', 'llm_response': "I don't have enough specific information in the provided context to answer your question accurately. Please try rephrasing your question or ensure the relevant documentation is available in the knowledge base.", 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:12:39,113 - services.external_task_worker - INFO - Successfully completed task 93737aea-88f1-11f0-bc34-0242ac160003
2025-09-03 14:12:39,353 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 14:13:08,884 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756923188
2025-09-03 14:13:08,903 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:08,903 - services.external_task_worker - INFO - Executing task a506afe4-88f1-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:13:08,903 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923188.540046}'}
2025-09-03 14:13:08,914 - services.external_task_worker - INFO - Successfully completed task a506afe4-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:08,921 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:08,922 - services.external_task_worker - INFO - Executing task a53b2d7f-88f1-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:13:08,922 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923188.540046}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923188.540046}, "processing_timestamp": 1756923188.9035883}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:13:08,933 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:13:09,002 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:13:09,008 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:13:09,009 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:13:09,026 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:13:09,026 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:13:11,903 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:13:11,903 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:13:13,899 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:13:14,193 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:13:14,206 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:13:14,207 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 14:13:14,207 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 14:13:14,234 - services.external_task_worker - INFO - Successfully completed task a53b2d7f-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:14,245 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:14,245 - services.external_task_worker - INFO - Executing task a866a3f3-88f1-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:13:14,245 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923188.540046}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923188.540046}, "processing_timestamp": 1756923188.9035883}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:13:14,255 - services.external_task_worker - INFO - Successfully completed task a866a3f3-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:14,263 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:14,264 - services.external_task_worker - INFO - Executing task a869ff6a-88f1-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:13:14,264 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923188.540046}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923188.540046}, "processing_timestamp": 1756923188.9035883}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:13:14,273 - services.external_task_worker - INFO - Successfully completed task a869ff6a-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:14,281 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:14,281 - services.external_task_worker - INFO - Executing task a86ce5af-88f1-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:13:14,281 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923188.540046}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923188.540046}, "processing_timestamp": 1756923188.9035883}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:13:14,292 - services.external_task_worker - INFO - Successfully completed task a86ce5af-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:14,301 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:14,301 - services.external_task_worker - INFO - Executing task a86fa4e2-88f1-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:13:14,301 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923188.540046}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923188.540046}, "processing_timestamp": 1756923188.9035883}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:13:14,310 - services.external_task_worker - INFO - Successfully completed task a86fa4e2-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:14,320 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:14,320 - services.external_task_worker - INFO - Executing task a8728a23-88f1-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:13:14,320 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923188.540046}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923188.540046}, "processing_timestamp": 1756923188.9035883}', 'llm_response': 'Based on the navigation system requirements provided in the context:\n\nThe required position accuracy is 3 meters CEP (Circular Error Probable).\n\nAdditional accuracy specifications from the context:\n- Heading accuracy: 2 degrees  \n- Speed accuracy: 0.1 m/s\n\nThis information is sourced from the Navigation System Requirements documentation.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:13:14,330 - services.external_task_worker - INFO - Successfully completed task a8728a23-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:14,339 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:14,339 - services.external_task_worker - INFO - Executing task a8757069-88f1-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:13:14,339 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923188.540046}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the navigation system requirements provided in the context:\n\nThe required position accuracy is 3 meters CEP (Circular Error Probable).\n\nAdditional accuracy specifications from the context:\n- Heading accuracy: 2 degrees  \n- Speed accuracy: 0.1 m/s\n\nThis information is sourced from the Navigation System Requirements documentation.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923188.540046}, "processing_timestamp": 1756923188.9035883}', 'llm_response': 'Based on the navigation system requirements provided in the context:\n\nThe required position accuracy is 3 meters CEP (Circular Error Probable).\n\nAdditional accuracy specifications from the context:\n- Heading accuracy: 2 degrees  \n- Speed accuracy: 0.1 m/s\n\nThis information is sourced from the Navigation System Requirements documentation.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:13:14,359 - services.external_task_worker - INFO - Successfully completed task a8757069-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:14,656 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 14:13:35,568 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756923215
2025-09-03 14:13:35,576 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:35,576 - services.external_task_worker - INFO - Executing task b4e44533-88f1-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:13:35,576 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923215.1605694}'}
2025-09-03 14:13:35,582 - services.external_task_worker - INFO - Successfully completed task b4e44533-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:35,588 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:35,588 - services.external_task_worker - INFO - Executing task b5208afe-88f1-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:13:35,588 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923215.1605694}', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923215.1605694}, "processing_timestamp": 1756923215.5765445}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:13:35,598 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:13:35,661 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:13:35,666 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:13:35,667 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:13:35,684 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:13:35,685 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:13:38,085 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:13:38,085 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:13:39,946 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:13:40,261 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:13:40,270 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:13:40,271 - services.qdrant_service - INFO - Found 0 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 14:13:40,272 - services.qdrant_service - INFO - Found 0 similar chunks for query: 'For Hardware Components what is our memory require...'
2025-09-03 14:13:40,281 - services.external_task_worker - INFO - Successfully completed task b5208afe-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:40,287 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:40,287 - services.external_task_worker - INFO - Executing task b7ed8dc2-88f1-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:13:40,287 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923215.1605694}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923215.1605694}, "processing_timestamp": 1756923215.5765445}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:13:40,294 - services.external_task_worker - INFO - Successfully completed task b7ed8dc2-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:40,300 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:40,301 - services.external_task_worker - INFO - Executing task b7efb0b9-88f1-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:13:40,301 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923215.1605694}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923215.1605694}, "processing_timestamp": 1756923215.5765445}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:13:40,307 - services.external_task_worker - INFO - Successfully completed task b7efb0b9-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:40,313 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:40,313 - services.external_task_worker - INFO - Executing task b7f1ac9e-88f1-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:13:40,313 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923215.1605694}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923215.1605694}, "processing_timestamp": 1756923215.5765445}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:13:40,320 - services.external_task_worker - INFO - Successfully completed task b7f1ac9e-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:40,325 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:40,325 - services.external_task_worker - INFO - Executing task b7f38171-88f1-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:13:40,325 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923215.1605694}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923215.1605694}, "processing_timestamp": 1756923215.5765445}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:13:40,330 - services.external_task_worker - INFO - Successfully completed task b7f38171-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:40,336 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:40,336 - services.external_task_worker - INFO - Executing task b7f52f32-88f1-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:13:40,336 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923215.1605694}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923215.1605694}, "processing_timestamp": 1756923215.5765445}', 'llm_response': "I don't have enough specific information in the provided context to answer your question accurately. Please try rephrasing your question or ensure the relevant documentation is available in the knowledge base.", 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:13:40,342 - services.external_task_worker - INFO - Successfully completed task b7f52f32-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:40,348 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:13:40,348 - services.external_task_worker - INFO - Executing task b7f70408-88f1-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:13:40,348 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923215.1605694}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': "I don't have enough specific information in the provided context to answer your question accurately. Please try rephrasing your question or ensure the relevant documentation is available in the knowledge base.", 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923215.1605694}, "processing_timestamp": 1756923215.5765445}', 'llm_response': "I don't have enough specific information in the provided context to answer your question accurately. Please try rephrasing your question or ensure the relevant documentation is available in the knowledge base.", 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:13:40,359 - services.external_task_worker - INFO - Successfully completed task b7f70408-88f1-11f0-bc34-0242ac160003
2025-09-03 14:13:41,273 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 14:15:13,783 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756923313
2025-09-03 14:15:13,793 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:15:13,793 - services.external_task_worker - INFO - Executing task ef2fd392-88f1-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:15:13,793 - services.external_task_worker - INFO - Task variables: {'user_query': 'navigation system', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923312.960018}'}
2025-09-03 14:15:13,800 - services.external_task_worker - INFO - Successfully completed task ef2fd392-88f1-11f0-bc34-0242ac160003
2025-09-03 14:15:13,808 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:15:13,808 - services.external_task_worker - INFO - Executing task efab6c4d-88f1-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:15:13,808 - services.external_task_worker - INFO - Task variables: {'user_query': 'navigation system', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923312.960018}', 'processed_query': '{"original_query": "navigation system", "cleaned_query": "navigation system", "key_terms": ["navigation", "system"], "question_intent": [], "query_type": "informational", "domain_terms": ["system"], "word_count": 2, "char_count": 17, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923312.960018}, "processing_timestamp": 1756923313.7937825}', 'search_parameters': '{"primary_terms": ["navigation", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:15:13,819 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:15:13,890 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:15:13,894 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:15:13,895 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:15:13,910 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:15:13,910 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:15:16,184 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:15:16,184 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:15:18,256 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:15:18,602 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:15:18,613 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:15:18,616 - services.qdrant_service - INFO - Found 2 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 14:15:18,616 - services.qdrant_service - INFO - Found 2 similar chunks for query: 'navigation system...'
2025-09-03 14:15:18,634 - services.external_task_worker - INFO - Successfully completed task efab6c4d-88f1-11f0-bc34-0242ac160003
2025-09-03 14:15:18,641 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:15:18,641 - services.external_task_worker - INFO - Executing task f28d0781-88f1-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:15:18,641 - services.external_task_worker - INFO - Task variables: {'user_query': 'navigation system', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923312.960018}', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.6541817, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.62585217, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "navigation system", "cleaned_query": "navigation system", "key_terms": ["navigation", "system"], "question_intent": [], "query_type": "informational", "domain_terms": ["system"], "word_count": 2, "char_count": 17, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923312.960018}, "processing_timestamp": 1756923313.7937825}', 'search_parameters': '{"primary_terms": ["navigation", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:15:18,650 - services.external_task_worker - INFO - Successfully completed task f28d0781-88f1-11f0-bc34-0242ac160003
2025-09-03 14:15:18,659 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:15:18,659 - services.external_task_worker - INFO - Executing task f28f7898-88f1-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:15:18,659 - services.external_task_worker - INFO - Task variables: {'user_query': 'navigation system', 'context_quality_score': 0.640016935, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923312.960018}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.6541817, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.62585217, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.6541817, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.62585217, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "navigation system", "cleaned_query": "navigation system", "key_terms": ["navigation", "system"], "question_intent": [], "query_type": "informational", "domain_terms": ["system"], "word_count": 2, "char_count": 17, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923312.960018}, "processing_timestamp": 1756923313.7937825}', 'search_parameters': '{"primary_terms": ["navigation", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:15:18,668 - services.external_task_worker - INFO - Successfully completed task f28f7898-88f1-11f0-bc34-0242ac160003
2025-09-03 14:15:18,677 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:15:18,677 - services.external_task_worker - INFO - Executing task f29237cd-88f1-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:15:18,677 - services.external_task_worker - INFO - Task variables: {'user_query': 'navigation system', 'context_quality_score': 0.640016935, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923312.960018}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.6541817, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.62585217, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "navigation system", "cleaned_query": "navigation system", "key_terms": ["navigation", "system"], "question_intent": [], "query_type": "informational", "domain_terms": ["system"], "word_count": 2, "char_count": 17, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923312.960018}, "processing_timestamp": 1756923313.7937825}', 'search_parameters': '{"primary_terms": ["navigation", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:15:18,686 - services.external_task_worker - INFO - Successfully completed task f29237cd-88f1-11f0-bc34-0242ac160003
2025-09-03 14:15:18,697 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:15:18,697 - services.external_task_worker - INFO - Executing task f294cff0-88f1-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:15:18,697 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: navigation system\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'navigation system', 'context_quality_score': 0.640016935, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923312.960018}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.6541817, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.62585217, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "navigation system", "cleaned_query": "navigation system", "key_terms": ["navigation", "system"], "question_intent": [], "query_type": "informational", "domain_terms": ["system"], "word_count": 2, "char_count": 17, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923312.960018}, "processing_timestamp": 1756923313.7937825}', 'search_parameters': '{"primary_terms": ["navigation", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:15:18,707 - services.external_task_worker - INFO - Successfully completed task f294cff0-88f1-11f0-bc34-0242ac160003
2025-09-03 14:15:18,717 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:15:18,718 - services.external_task_worker - INFO - Executing task f297dd41-88f1-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:15:18,718 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: navigation system\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'navigation system', 'context_quality_score': 0.640016935, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923312.960018}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.6541817, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.62585217, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "navigation system", "cleaned_query": "navigation system", "key_terms": ["navigation", "system"], "question_intent": [], "query_type": "informational", "domain_terms": ["system"], "word_count": 2, "char_count": 17, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923312.960018}, "processing_timestamp": 1756923313.7937825}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["navigation", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:15:18,729 - services.external_task_worker - INFO - Successfully completed task f297dd41-88f1-11f0-bc34-0242ac160003
2025-09-03 14:15:18,738 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:15:18,739 - services.external_task_worker - INFO - Executing task f29b5fc7-88f1-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:15:18,739 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: navigation system\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'navigation system', 'context_quality_score': 0.640016935, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923312.960018}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.6541817, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.62585217, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Navigation System Requirements\n[2] Technical Specifications\n', 'processed_query': '{"original_query": "navigation system", "cleaned_query": "navigation system", "key_terms": ["navigation", "system"], "question_intent": [], "query_type": "informational", "domain_terms": ["system"], "word_count": 2, "char_count": 17, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923312.960018}, "processing_timestamp": 1756923313.7937825}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["navigation", "system"], "secondary_terms": [], "search_boost_terms": ["system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:15:18,762 - services.external_task_worker - INFO - Successfully completed task f29b5fc7-88f1-11f0-bc34-0242ac160003
2025-09-03 14:15:19,076 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 14:16:18,395 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756923378
2025-09-03 14:16:18,404 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:16:18,404 - services.external_task_worker - INFO - Executing task 15f16521-88f2-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:16:18,404 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923377.9839675}'}
2025-09-03 14:16:18,411 - services.external_task_worker - INFO - Successfully completed task 15f16521-88f2-11f0-bc34-0242ac160003
2025-09-03 14:16:18,416 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:16:18,417 - services.external_task_worker - INFO - Executing task 162e472c-88f2-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:16:18,417 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923377.9839675}', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923377.9839675}, "processing_timestamp": 1756923378.4046757}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:16:18,427 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:16:18,488 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:16:18,493 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:16:18,494 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:16:18,508 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:16:18,508 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:16:20,884 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:16:20,885 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:16:22,891 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:16:23,177 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:16:23,183 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:16:23,184 - services.qdrant_service - INFO - Found 0 results in collection 'knowledge_chunks' with threshold 0.6
2025-09-03 14:16:23,184 - services.qdrant_service - INFO - Found 0 similar chunks for query: 'For Hardware Components what is our memory require...'
2025-09-03 14:16:23,192 - services.external_task_worker - INFO - Successfully completed task 162e472c-88f2-11f0-bc34-0242ac160003
2025-09-03 14:16:23,197 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:16:23,197 - services.external_task_worker - INFO - Executing task 1907cd10-88f2-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:16:23,197 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923377.9839675}', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923377.9839675}, "processing_timestamp": 1756923378.4046757}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:16:23,204 - services.external_task_worker - INFO - Successfully completed task 1907cd10-88f2-11f0-bc34-0242ac160003
2025-09-03 14:16:23,209 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:16:23,209 - services.external_task_worker - INFO - Executing task 1909a1e7-88f2-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:16:23,209 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923377.9839675}', 'reranked_context': '[]', 'retrieved_chunks': '[]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923377.9839675}, "processing_timestamp": 1756923378.4046757}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:16:23,216 - services.external_task_worker - INFO - Successfully completed task 1909a1e7-88f2-11f0-bc34-0242ac160003
2025-09-03 14:16:23,224 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:16:23,224 - services.external_task_worker - INFO - Executing task 190b76bc-88f2-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:16:23,224 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923377.9839675}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923377.9839675}, "processing_timestamp": 1756923378.4046757}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:16:23,232 - services.external_task_worker - INFO - Successfully completed task 190b76bc-88f2-11f0-bc34-0242ac160003
2025-09-03 14:16:23,239 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:16:23,239 - services.external_task_worker - INFO - Executing task 190de7cf-88f2-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:16:23,239 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923377.9839675}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923377.9839675}, "processing_timestamp": 1756923378.4046757}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:16:23,245 - services.external_task_worker - INFO - Successfully completed task 190de7cf-88f2-11f0-bc34-0242ac160003
2025-09-03 14:16:23,258 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:16:23,258 - services.external_task_worker - INFO - Executing task 191009c0-88f2-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:16:23,258 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923377.9839675}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923377.9839675}, "processing_timestamp": 1756923378.4046757}', 'llm_response': "I couldn't find relevant information in the knowledge base to answer your question. You may want to try rephrasing your question or adding more relevant documentation to your knowledge assets.", 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:16:23,265 - services.external_task_worker - INFO - Successfully completed task 191009c0-88f2-11f0-bc34-0242ac160003
2025-09-03 14:16:23,272 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:16:23,272 - services.external_task_worker - INFO - Executing task 1912f006-88f2-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:16:23,272 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.0, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923377.9839675}', 'reranked_context': '[]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': "I couldn't find relevant information in the knowledge base to answer your question. You may want to try rephrasing your question or adding more relevant documentation to your knowledge assets.", 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923377.9839675}, "processing_timestamp": 1756923378.4046757}', 'llm_response': "I couldn't find relevant information in the knowledge base to answer your question. You may want to try rephrasing your question or adding more relevant documentation to your knowledge assets.", 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:16:23,284 - services.external_task_worker - INFO - Successfully completed task 1912f006-88f2-11f0-bc34-0242ac160003
2025-09-03 14:16:24,116 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 14:18:17,683 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756923497
2025-09-03 14:18:17,692 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:18:17,692 - services.external_task_worker - INFO - Executing task 5cf41adc-88f2-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:18:17,692 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923497.1202424}'}
2025-09-03 14:18:17,701 - services.external_task_worker - INFO - Successfully completed task 5cf41adc-88f2-11f0-bc34-0242ac160003
2025-09-03 14:18:17,708 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:18:17,708 - services.external_task_worker - INFO - Executing task 5d485577-88f2-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:18:17,708 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923497.1202424}', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923497.1202424}, "processing_timestamp": 1756923497.6930585}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:18:17,720 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:18:17,786 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:18:17,790 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:18:17,791 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:18:17,806 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:18:17,806 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:18:19,449 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:18:19,449 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:18:21,638 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:18:21,957 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:18:21,967 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:18:21,969 - services.qdrant_service - INFO - Found 2 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:18:21,969 - services.qdrant_service - INFO - Found 2 similar chunks for query: 'For Hardware Components what is our memory require...'
2025-09-03 14:18:21,992 - services.external_task_worker - INFO - Successfully completed task 5d485577-88f2-11f0-bc34-0242ac160003
2025-09-03 14:18:22,000 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:18:22,000 - services.external_task_worker - INFO - Executing task 5fd716bb-88f2-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:18:22,000 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923497.1202424}', 'retrieved_chunks': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923497.1202424}, "processing_timestamp": 1756923497.6930585}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:18:22,008 - services.external_task_worker - INFO - Successfully completed task 5fd716bb-88f2-11f0-bc34-0242ac160003
2025-09-03 14:18:22,016 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:18:22,016 - services.external_task_worker - INFO - Executing task 5fd9aee2-88f2-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:18:22,017 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923497.1202424}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923497.1202424}, "processing_timestamp": 1756923497.6930585}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:18:22,027 - services.external_task_worker - INFO - Successfully completed task 5fd9aee2-88f2-11f0-bc34-0242ac160003
2025-09-03 14:18:22,037 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:18:22,037 - services.external_task_worker - INFO - Executing task 5fdc4707-88f2-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:18:22,037 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923497.1202424}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923497.1202424}, "processing_timestamp": 1756923497.6930585}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:18:22,048 - services.external_task_worker - INFO - Successfully completed task 5fdc4707-88f2-11f0-bc34-0242ac160003
2025-09-03 14:18:22,056 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:18:22,056 - services.external_task_worker - INFO - Executing task 5fdfa27a-88f2-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:18:22,056 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': 'You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn\'t contain enough information to fully answer the question, acknowledge this and provide what information you can.', 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923497.1202424}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923497.1202424}, "processing_timestamp": 1756923497.6930585}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:18:22,066 - services.external_task_worker - INFO - Successfully completed task 5fdfa27a-88f2-11f0-bc34-0242ac160003
2025-09-03 14:18:22,075 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:18:22,075 - services.external_task_worker - INFO - Executing task 5fe261ab-88f2-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:18:22,075 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': 'You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn\'t contain enough information to fully answer the question, acknowledge this and provide what information you can.', 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923497.1202424}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923497.1202424}, "processing_timestamp": 1756923497.6930585}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:18:22,084 - services.external_task_worker - INFO - Successfully completed task 5fe261ab-88f2-11f0-bc34-0242ac160003
2025-09-03 14:18:22,094 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:18:22,094 - services.external_task_worker - INFO - Executing task 5fe520e1-88f2-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:18:22,094 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': 'You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn\'t contain enough information to fully answer the question, acknowledge this and provide what information you can.', 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923497.1202424}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Technical Specifications\n[2] Technical Specifications\n', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923497.1202424}, "processing_timestamp": 1756923497.6930585}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:18:22,108 - services.external_task_worker - INFO - Successfully completed task 5fe520e1-88f2-11f0-bc34-0242ac160003
2025-09-03 14:18:22,237 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 14:23:44,719 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756923824
2025-09-03 14:24:02,870 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:02,871 - services.external_task_worker - INFO - Executing task 2a9a707b-88f3-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:24:02,871 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923842.1391628}'}
2025-09-03 14:24:02,881 - services.external_task_worker - INFO - Successfully completed task 2a9a707b-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:02,887 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:02,887 - services.external_task_worker - INFO - Executing task 2b0677d6-88f3-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:24:02,888 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923842.1391628}', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923842.1391628}, "processing_timestamp": 1756923842.8716376}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:02,898 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:24:02,961 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:24:02,964 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:24:02,965 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:24:02,977 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:24:02,977 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:24:03,044 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:24:03,044 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:24:04,328 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:24:04,601 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:24:04,609 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:24:04,610 - services.qdrant_service - INFO - Found 10 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:24:04,610 - services.qdrant_service - INFO - Found 10 similar chunks for query: 'What are the navigation system requirements?...'
2025-09-03 14:24:04,681 - services.external_task_worker - INFO - Successfully completed task 2b0677d6-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:04,689 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:04,689 - services.external_task_worker - INFO - Executing task 2c19206a-88f3-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:24:04,689 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923842.1391628}', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923842.1391628}, "processing_timestamp": 1756923842.8716376}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:04,699 - services.external_task_worker - INFO - Successfully completed task 2c19206a-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:04,706 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:04,707 - services.external_task_worker - INFO - Executing task 2c1c06b1-88f3-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:24:04,707 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923842.1391628}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923842.1391628}, "processing_timestamp": 1756923842.8716376}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:04,716 - services.external_task_worker - INFO - Successfully completed task 2c1c06b1-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:04,723 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:04,723 - services.external_task_worker - INFO - Executing task 2c1e9ed6-88f3-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:24:04,723 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923842.1391628}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923842.1391628}, "processing_timestamp": 1756923842.8716376}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:04,737 - services.external_task_worker - INFO - Successfully completed task 2c1e9ed6-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:04,745 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:04,745 - services.external_task_worker - INFO - Executing task 2c21d339-88f3-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:24:04,745 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923842.1391628}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923842.1391628}, "processing_timestamp": 1756923842.8716376}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:04,754 - services.external_task_worker - INFO - Successfully completed task 2c21d339-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:04,761 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:04,761 - services.external_task_worker - INFO - Executing task 2c24926a-88f3-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:24:04,761 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923842.1391628}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923842.1391628}, "processing_timestamp": 1756923842.8716376}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:04,771 - services.external_task_worker - INFO - Successfully completed task 2c24926a-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:04,778 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:04,779 - services.external_task_worker - INFO - Executing task 2c270380-88f3-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:24:04,779 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923842.1391628}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Navigation System Requirements\n[2] Navigation System Requirements\n[3] Technical Specifications\n', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923842.1391628}, "processing_timestamp": 1756923842.8716376}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:04,795 - services.external_task_worker - INFO - Successfully completed task 2c270380-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:08,837 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:08,837 - services.external_task_worker - INFO - Executing task 2e8fed4a-88f3-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:24:08,837 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923848.7883997}'}
2025-09-03 14:24:08,844 - services.external_task_worker - INFO - Successfully completed task 2e8fed4a-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:08,852 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:08,852 - services.external_task_worker - INFO - Executing task 2e948145-88f3-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:24:08,852 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923848.7883997}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923848.7883997}, "processing_timestamp": 1756923848.837524}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:08,855 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:24:08,903 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:24:08,907 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:24:08,908 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:24:08,920 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:24:08,920 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:24:08,921 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:24:08,921 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:24:10,101 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:24:10,109 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:24:10,116 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:24:10,116 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:24:10,116 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 14:24:10,129 - services.external_task_worker - INFO - Successfully completed task 2e948145-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:10,136 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:10,136 - services.external_task_worker - INFO - Executing task 2f5894a9-88f3-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:24:10,136 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923848.7883997}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923848.7883997}, "processing_timestamp": 1756923848.837524}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:10,143 - services.external_task_worker - INFO - Successfully completed task 2f5894a9-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:10,151 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:10,152 - services.external_task_worker - INFO - Executing task 2f5adeb0-88f3-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:24:10,152 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923848.7883997}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923848.7883997}, "processing_timestamp": 1756923848.837524}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:10,159 - services.external_task_worker - INFO - Successfully completed task 2f5adeb0-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:10,167 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:10,167 - services.external_task_worker - INFO - Executing task 2f5d28b5-88f3-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:24:10,167 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923848.7883997}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923848.7883997}, "processing_timestamp": 1756923848.837524}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:10,175 - services.external_task_worker - INFO - Successfully completed task 2f5d28b5-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:10,184 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:10,184 - services.external_task_worker - INFO - Executing task 2f5f98c8-88f3-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:24:10,184 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923848.7883997}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923848.7883997}, "processing_timestamp": 1756923848.837524}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:10,191 - services.external_task_worker - INFO - Successfully completed task 2f5f98c8-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:10,200 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:10,200 - services.external_task_worker - INFO - Executing task 2f6230e9-88f3-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:24:10,200 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923848.7883997}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923848.7883997}, "processing_timestamp": 1756923848.837524}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:10,208 - services.external_task_worker - INFO - Successfully completed task 2f6230e9-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:10,217 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:10,217 - services.external_task_worker - INFO - Executing task 2f64c90f-88f3-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:24:10,217 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923848.7883997}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923848.7883997}, "processing_timestamp": 1756923848.837524}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:10,232 - services.external_task_worker - INFO - Successfully completed task 2f64c90f-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:19,317 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:19,317 - services.external_task_worker - INFO - Executing task 343e8bc9-88f3-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:24:19,317 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923858.319555}'}
2025-09-03 14:24:19,329 - services.external_task_worker - INFO - Successfully completed task 343e8bc9-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:19,340 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:19,340 - services.external_task_worker - INFO - Executing task 34d43c34-88f3-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:24:19,340 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923858.319555}', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923858.319555}, "processing_timestamp": 1756923859.3178687}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:19,343 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:24:19,398 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:24:19,406 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:24:19,407 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:24:19,426 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:24:19,426 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:24:19,427 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:24:19,427 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:24:20,595 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:24:20,605 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:24:20,613 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:24:20,613 - services.qdrant_service - INFO - Found 5 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:24:20,613 - services.qdrant_service - INFO - Found 5 similar chunks for query: 'What safety procedures should be followed?...'
2025-09-03 14:24:20,661 - services.external_task_worker - INFO - Successfully completed task 34d43c34-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:20,669 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:20,669 - services.external_task_worker - INFO - Executing task 359fa298-88f3-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:24:20,669 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923858.319555}', 'retrieved_chunks': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923858.319555}, "processing_timestamp": 1756923859.3178687}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:20,679 - services.external_task_worker - INFO - Successfully completed task 359fa298-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:20,688 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:20,688 - services.external_task_worker - INFO - Executing task 35a288df-88f3-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:24:20,688 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923858.319555}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923858.319555}, "processing_timestamp": 1756923859.3178687}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:20,697 - services.external_task_worker - INFO - Successfully completed task 35a288df-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:20,705 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:20,706 - services.external_task_worker - INFO - Executing task 35a54814-88f3-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:24:20,706 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923858.319555}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923858.319555}, "processing_timestamp": 1756923859.3178687}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:20,714 - services.external_task_worker - INFO - Successfully completed task 35a54814-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:20,721 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:20,721 - services.external_task_worker - INFO - Executing task 35a7b927-88f3-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:24:20,721 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nUser Question: What safety procedures should be followed?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923858.319555}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923858.319555}, "processing_timestamp": 1756923859.3178687}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:20,730 - services.external_task_worker - INFO - Successfully completed task 35a7b927-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:20,737 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:20,737 - services.external_task_worker - INFO - Executing task 35aa2a38-88f3-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:24:20,737 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nUser Question: What safety procedures should be followed?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923858.319555}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923858.319555}, "processing_timestamp": 1756923859.3178687}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:20,745 - services.external_task_worker - INFO - Successfully completed task 35aa2a38-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:20,752 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:20,752 - services.external_task_worker - INFO - Executing task 35ac9b4e-88f3-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:24:20,752 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nUser Question: What safety procedures should be followed?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923858.319555}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Safety Protocols\n[2] Safety Protocols\n[3] Safety Protocols\n', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923858.319555}, "processing_timestamp": 1756923859.3178687}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:20,764 - services.external_task_worker - INFO - Successfully completed task 35ac9b4e-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:24,809 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:24,809 - services.external_task_worker - INFO - Executing task 381201a8-88f3-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:24:24,809 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923864.7359197}'}
2025-09-03 14:24:24,817 - services.external_task_worker - INFO - Successfully completed task 381201a8-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:24,826 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:24,826 - services.external_task_worker - INFO - Executing task 3819c9f3-88f3-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:24:24,826 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923864.7359197}', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923864.7359197}, "processing_timestamp": 1756923864.8094265}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:24,829 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:24:24,877 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:24:24,881 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:24:24,882 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:24:24,898 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:24:24,898 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:24:24,899 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:24:24,899 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:24:26,099 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:24:26,110 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:24:26,136 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:24:26,137 - services.qdrant_service - INFO - Found 2 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:24:26,137 - services.qdrant_service - INFO - Found 2 similar chunks for query: 'For Hardware Components what is our memory require...'
2025-09-03 14:24:26,186 - services.external_task_worker - INFO - Successfully completed task 3819c9f3-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:26,195 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:26,195 - services.external_task_worker - INFO - Executing task 38eaae97-88f3-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:24:26,196 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923864.7359197}', 'retrieved_chunks': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923864.7359197}, "processing_timestamp": 1756923864.8094265}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:26,204 - services.external_task_worker - INFO - Successfully completed task 38eaae97-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:26,213 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:26,214 - services.external_task_worker - INFO - Executing task 38ed6dce-88f3-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:24:26,214 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923864.7359197}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923864.7359197}, "processing_timestamp": 1756923864.8094265}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:26,222 - services.external_task_worker - INFO - Successfully completed task 38ed6dce-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:26,231 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:26,231 - services.external_task_worker - INFO - Executing task 38f02d03-88f3-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:24:26,231 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923864.7359197}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923864.7359197}, "processing_timestamp": 1756923864.8094265}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:26,242 - services.external_task_worker - INFO - Successfully completed task 38f02d03-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:26,249 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:26,249 - services.external_task_worker - INFO - Executing task 38f2ec36-88f3-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:24:26,249 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': 'You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn\'t contain enough information to fully answer the question, acknowledge this and provide what information you can.', 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923864.7359197}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923864.7359197}, "processing_timestamp": 1756923864.8094265}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:26,260 - services.external_task_worker - INFO - Successfully completed task 38f2ec36-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:26,268 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:26,268 - services.external_task_worker - INFO - Executing task 38f5d277-88f3-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:24:26,269 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': 'You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn\'t contain enough information to fully answer the question, acknowledge this and provide what information you can.', 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923864.7359197}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923864.7359197}, "processing_timestamp": 1756923864.8094265}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:26,278 - services.external_task_worker - INFO - Successfully completed task 38f5d277-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:26,288 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:26,288 - services.external_task_worker - INFO - Executing task 38f8dfcd-88f3-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:24:26,288 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': 'You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn\'t contain enough information to fully answer the question, acknowledge this and provide what information you can.', 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923864.7359197}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Technical Specifications\n[2] Technical Specifications\n', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923864.7359197}, "processing_timestamp": 1756923864.8094265}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:26,301 - services.external_task_worker - INFO - Successfully completed task 38f8dfcd-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:31,371 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:31,372 - services.external_task_worker - INFO - Executing task 3b6fd357-88f3-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:24:31,372 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923870.3850436}'}
2025-09-03 14:24:31,380 - services.external_task_worker - INFO - Successfully completed task 3b6fd357-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:31,386 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:31,386 - services.external_task_worker - INFO - Executing task 3c0360e2-88f3-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:24:31,387 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923870.3850436}', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923870.3850436}, "processing_timestamp": 1756923871.3723474}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:31,389 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:24:31,434 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:24:31,439 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:24:31,439 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:24:31,454 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:24:31,454 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:24:31,454 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:24:31,455 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:24:32,489 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:24:32,497 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:24:32,503 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:24:32,504 - services.qdrant_service - INFO - Found 2 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:24:32,504 - services.qdrant_service - INFO - Found 2 similar chunks for query: 'What frequency does the Communication Interfaces o...'
2025-09-03 14:24:32,523 - services.external_task_worker - INFO - Successfully completed task 3c0360e2-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:32,529 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:32,530 - services.external_task_worker - INFO - Executing task 3cb1a256-88f3-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:24:32,530 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923870.3850436}', 'retrieved_chunks': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923870.3850436}, "processing_timestamp": 1756923871.3723474}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:32,537 - services.external_task_worker - INFO - Successfully completed task 3cb1a256-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:32,544 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:32,544 - services.external_task_worker - INFO - Executing task 3cb3ec5d-88f3-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:24:32,544 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923870.3850436}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923870.3850436}, "processing_timestamp": 1756923871.3723474}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:32,551 - services.external_task_worker - INFO - Successfully completed task 3cb3ec5d-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:32,558 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:32,559 - services.external_task_worker - INFO - Executing task 3cb60e52-88f3-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:24:32,559 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923870.3850436}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923870.3850436}, "processing_timestamp": 1756923871.3723474}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:32,567 - services.external_task_worker - INFO - Successfully completed task 3cb60e52-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:32,576 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:32,576 - services.external_task_worker - INFO - Executing task 3cb87f65-88f3-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:24:32,576 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nUser Question: What frequency does the Communication Interfaces operate at?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923870.3850436}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923870.3850436}, "processing_timestamp": 1756923871.3723474}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:32,585 - services.external_task_worker - INFO - Successfully completed task 3cb87f65-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:32,594 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:32,594 - services.external_task_worker - INFO - Executing task 3cbb1786-88f3-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:24:32,594 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nUser Question: What frequency does the Communication Interfaces operate at?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923870.3850436}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923870.3850436}, "processing_timestamp": 1756923871.3723474}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:32,603 - services.external_task_worker - INFO - Successfully completed task 3cbb1786-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:32,612 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:24:32,612 - services.external_task_worker - INFO - Executing task 3cbdafac-88f3-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:24:32,612 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nUser Question: What frequency does the Communication Interfaces operate at?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923870.3850436}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Technical Specifications\n[2] Technical Specifications\n', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923870.3850436}, "processing_timestamp": 1756923871.3723474}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:24:32,626 - services.external_task_worker - INFO - Successfully completed task 3cbdafac-88f3-11f0-bc34-0242ac160003
2025-09-03 14:24:33,456 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 14:25:18,241 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756923918
2025-09-03 14:25:34,402 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:34,403 - services.external_task_worker - INFO - Executing task 61814ec6-88f3-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:25:34,403 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923934.2541115}'}
2025-09-03 14:25:34,411 - services.external_task_worker - INFO - Successfully completed task 61814ec6-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:34,417 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:34,417 - services.external_task_worker - INFO - Executing task 61952501-88f3-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:25:34,418 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923934.2541115}', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923934.2541115}, "processing_timestamp": 1756923934.4033735}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:25:34,429 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:25:34,501 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:25:34,513 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:25:34,514 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:25:34,543 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:25:34,543 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:25:34,676 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:25:34,676 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:25:36,001 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:25:36,279 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:25:36,287 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:25:36,289 - services.qdrant_service - INFO - Found 10 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:25:36,289 - services.qdrant_service - INFO - Found 10 similar chunks for query: 'What are the navigation system requirements?...'
2025-09-03 14:25:36,374 - services.external_task_worker - INFO - Successfully completed task 61952501-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:36,388 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:36,389 - services.external_task_worker - INFO - Executing task 62bfe975-88f3-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:25:36,389 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923934.2541115}', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923934.2541115}, "processing_timestamp": 1756923934.4033735}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:25:36,404 - services.external_task_worker - INFO - Successfully completed task 62bfe975-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:36,419 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:36,420 - services.external_task_worker - INFO - Executing task 62c4f29c-88f3-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:25:36,420 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923934.2541115}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923934.2541115}, "processing_timestamp": 1756923934.4033735}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:25:36,433 - services.external_task_worker - INFO - Successfully completed task 62c4f29c-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:36,449 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:36,449 - services.external_task_worker - INFO - Executing task 62c98691-88f3-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:25:36,449 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923934.2541115}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923934.2541115}, "processing_timestamp": 1756923934.4033735}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:25:36,471 - services.external_task_worker - INFO - Successfully completed task 62c98691-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:36,484 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:36,484 - services.external_task_worker - INFO - Executing task 62ce8fb4-88f3-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:25:36,485 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923934.2541115}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923934.2541115}, "processing_timestamp": 1756923934.4033735}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:25:36,499 - services.external_task_worker - INFO - Successfully completed task 62ce8fb4-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:36,512 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:36,512 - services.external_task_worker - INFO - Executing task 62d371c5-88f3-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:25:36,512 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923934.2541115}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923934.2541115}, "processing_timestamp": 1756923934.4033735}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:25:36,525 - services.external_task_worker - INFO - Successfully completed task 62d371c5-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:36,535 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:36,535 - services.external_task_worker - INFO - Executing task 62d7426b-88f3-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:25:36,535 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923934.2541115}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Navigation System Requirements\n[2] Navigation System Requirements\n[3] Technical Specifications\n', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923934.2541115}, "processing_timestamp": 1756923934.4033735}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:25:36,553 - services.external_task_worker - INFO - Successfully completed task 62d7426b-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:40,592 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:40,592 - services.external_task_worker - INFO - Executing task 650aea65-88f3-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:25:40,592 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923940.1914601}'}
2025-09-03 14:25:40,603 - services.external_task_worker - INFO - Successfully completed task 650aea65-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:40,614 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:40,615 - services.external_task_worker - INFO - Executing task 6545d0a0-88f3-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:25:40,615 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923940.1914601}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923940.1914601}, "processing_timestamp": 1756923940.5925283}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:25:40,617 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:25:40,665 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:25:40,675 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:25:40,676 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:25:40,702 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:25:40,702 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:25:40,703 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:25:40,703 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:25:41,649 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:25:41,658 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:25:41,664 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:25:41,664 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:25:41,664 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 14:25:41,678 - services.external_task_worker - INFO - Successfully completed task 6545d0a0-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:41,683 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:41,684 - services.external_task_worker - INFO - Executing task 65e9fff4-88f3-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:25:41,684 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923940.1914601}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923940.1914601}, "processing_timestamp": 1756923940.5925283}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:25:41,692 - services.external_task_worker - INFO - Successfully completed task 65e9fff4-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:41,699 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:41,699 - services.external_task_worker - INFO - Executing task 65ebfbdb-88f3-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:25:41,699 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923940.1914601}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923940.1914601}, "processing_timestamp": 1756923940.5925283}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:25:41,708 - services.external_task_worker - INFO - Successfully completed task 65ebfbdb-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:41,715 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:41,715 - services.external_task_worker - INFO - Executing task 65ee6cf0-88f3-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:25:41,715 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923940.1914601}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923940.1914601}, "processing_timestamp": 1756923940.5925283}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:25:41,724 - services.external_task_worker - INFO - Successfully completed task 65ee6cf0-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:41,731 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:41,731 - services.external_task_worker - INFO - Executing task 65f0b6f3-88f3-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:25:41,731 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923940.1914601}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923940.1914601}, "processing_timestamp": 1756923940.5925283}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:25:41,739 - services.external_task_worker - INFO - Successfully completed task 65f0b6f3-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:41,747 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:41,747 - services.external_task_worker - INFO - Executing task 65f32804-88f3-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:25:41,747 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923940.1914601}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923940.1914601}, "processing_timestamp": 1756923940.5925283}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:25:41,756 - services.external_task_worker - INFO - Successfully completed task 65f32804-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:41,764 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:25:41,764 - services.external_task_worker - INFO - Executing task 65f5991a-88f3-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:25:41,764 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923940.1914601}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923940.1914601}, "processing_timestamp": 1756923940.5925283}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:25:41,777 - services.external_task_worker - INFO - Successfully completed task 65f5991a-88f3-11f0-bc34-0242ac160003
2025-09-03 14:25:45,811 - __main__ - INFO - Received signal 2, shutting down worker...
2025-09-03 14:25:45,812 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 14:26:15,080 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756923975
2025-09-03 14:26:29,377 - __main__ - INFO - Received signal 2, shutting down worker...
2025-09-03 14:26:29,378 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 14:26:54,734 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756924014
2025-09-03 14:26:54,742 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:26:54,742 - services.external_task_worker - INFO - Executing task 8258e6e4-88f3-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:26:54,742 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923989.3484495}'}
2025-09-03 14:26:54,749 - services.external_task_worker - INFO - Successfully completed task 8258e6e4-88f3-11f0-bc34-0242ac160003
2025-09-03 14:26:54,755 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:26:54,755 - services.external_task_worker - INFO - Executing task 9177c07f-88f3-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:26:54,755 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923989.3484495}', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923989.3484495}, "processing_timestamp": 1756924014.7431371}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:26:54,765 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:26:54,823 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:26:54,826 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:26:54,826 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:26:54,839 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:26:54,839 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:26:57,355 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:26:57,355 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:26:59,357 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:26:59,660 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:26:59,683 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:26:59,684 - services.qdrant_service - INFO - Found 10 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:26:59,684 - services.qdrant_service - INFO - Found 10 similar chunks for query: 'What are the navigation system requirements?...'
2025-09-03 14:26:59,717 - services.external_task_worker - INFO - Successfully completed task 9177c07f-88f3-11f0-bc34-0242ac160003
2025-09-03 14:26:59,722 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:26:59,722 - services.external_task_worker - INFO - Executing task 946dcf13-88f3-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:26:59,723 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923989.3484495}', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923989.3484495}, "processing_timestamp": 1756924014.7431371}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:26:59,730 - services.external_task_worker - INFO - Successfully completed task 946dcf13-88f3-11f0-bc34-0242ac160003
2025-09-03 14:26:59,737 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:26:59,737 - services.external_task_worker - INFO - Executing task 946fc9fa-88f3-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:26:59,737 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923989.3484495}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923989.3484495}, "processing_timestamp": 1756924014.7431371}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:26:59,744 - services.external_task_worker - INFO - Successfully completed task 946fc9fa-88f3-11f0-bc34-0242ac160003
2025-09-03 14:26:59,749 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:26:59,750 - services.external_task_worker - INFO - Executing task 9471ecef-88f3-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:26:59,750 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923989.3484495}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923989.3484495}, "processing_timestamp": 1756924014.7431371}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:26:59,759 - services.external_task_worker - INFO - Successfully completed task 9471ecef-88f3-11f0-bc34-0242ac160003
2025-09-03 14:26:59,767 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:26:59,767 - services.external_task_worker - INFO - Executing task 9473e8d2-88f3-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:26:59,767 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923989.3484495}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923989.3484495}, "processing_timestamp": 1756924014.7431371}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:26:59,775 - services.external_task_worker - INFO - Successfully completed task 9473e8d2-88f3-11f0-bc34-0242ac160003
2025-09-03 14:26:59,784 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:26:59,784 - services.external_task_worker - INFO - Executing task 947680f3-88f3-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:26:59,784 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923989.3484495}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923989.3484495}, "processing_timestamp": 1756924014.7431371}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:26:59,792 - services.external_task_worker - INFO - Successfully completed task 947680f3-88f3-11f0-bc34-0242ac160003
2025-09-03 14:26:59,804 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:26:59,804 - services.external_task_worker - INFO - Executing task 94791919-88f3-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:26:59,804 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923989.3484495}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Navigation System Requirements\n[2] Navigation System Requirements\n[3] Technical Specifications\n', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756923989.3484495}, "processing_timestamp": 1756924014.7431371}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:26:59,817 - services.external_task_worker - INFO - Successfully completed task 94791919-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:07,891 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:07,891 - services.external_task_worker - INFO - Executing task 98f838b3-88f3-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:27:07,891 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924027.311389}'}
2025-09-03 14:27:07,897 - services.external_task_worker - INFO - Successfully completed task 98f838b3-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:07,902 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:07,902 - services.external_task_worker - INFO - Executing task 994e20fe-88f3-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:27:07,902 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924027.311389}', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924027.311389}, "processing_timestamp": 1756924027.8917356}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:27:07,904 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:27:07,965 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:27:07,971 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:27:07,971 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:27:08,005 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:27:08,005 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:27:08,005 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:27:08,005 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:27:09,024 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:27:09,031 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:27:09,036 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:27:09,037 - services.qdrant_service - INFO - Found 10 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:27:09,037 - services.qdrant_service - INFO - Found 10 similar chunks for query: 'What are the navigation system requirements?...'
2025-09-03 14:27:09,078 - services.external_task_worker - INFO - Successfully completed task 994e20fe-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:09,085 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:09,085 - services.external_task_worker - INFO - Executing task 9a022ed2-88f3-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:27:09,085 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924027.311389}', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924027.311389}, "processing_timestamp": 1756924027.8917356}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:27:09,102 - services.external_task_worker - INFO - Successfully completed task 9a022ed2-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:09,111 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:09,111 - services.external_task_worker - INFO - Executing task 9a0478d9-88f3-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:27:09,111 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924027.311389}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924027.311389}, "processing_timestamp": 1756924027.8917356}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:27:09,119 - services.external_task_worker - INFO - Successfully completed task 9a0478d9-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:09,127 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:09,127 - services.external_task_worker - INFO - Executing task 9a08497e-88f3-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:27:09,128 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924027.311389}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924027.311389}, "processing_timestamp": 1756924027.8917356}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:27:09,139 - services.external_task_worker - INFO - Successfully completed task 9a08497e-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:09,148 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:09,148 - services.external_task_worker - INFO - Executing task 9a0b08b1-88f3-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:27:09,148 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924027.311389}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924027.311389}, "processing_timestamp": 1756924027.8917356}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:27:09,157 - services.external_task_worker - INFO - Successfully completed task 9a0b08b1-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:09,166 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:09,166 - services.external_task_worker - INFO - Executing task 9a0e1602-88f3-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:27:09,166 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924027.311389}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924027.311389}, "processing_timestamp": 1756924027.8917356}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:27:09,175 - services.external_task_worker - INFO - Successfully completed task 9a0e1602-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:09,183 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:09,184 - services.external_task_worker - INFO - Executing task 9a10ae28-88f3-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:27:09,184 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924027.311389}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Navigation System Requirements\n[2] Navigation System Requirements\n[3] Technical Specifications\n', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924027.311389}, "processing_timestamp": 1756924027.8917356}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:27:09,198 - services.external_task_worker - INFO - Successfully completed task 9a10ae28-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:12,228 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:12,228 - services.external_task_worker - INFO - Executing task 9ba6dda2-88f3-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:27:12,228 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924031.813617}'}
2025-09-03 14:27:12,235 - services.external_task_worker - INFO - Successfully completed task 9ba6dda2-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:12,241 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:12,241 - services.external_task_worker - INFO - Executing task 9be3e6bd-88f3-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:27:12,241 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924031.813617}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924031.813617}, "processing_timestamp": 1756924032.2284439}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:27:12,243 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:27:12,280 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:27:12,285 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:27:12,285 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:27:12,297 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:27:12,297 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:27:12,297 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:27:12,297 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:27:13,623 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:27:13,632 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:27:13,640 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:27:13,641 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:27:13,641 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 14:27:13,657 - services.external_task_worker - INFO - Successfully completed task 9be3e6bd-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:13,665 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:13,665 - services.external_task_worker - INFO - Executing task 9cbce1b1-88f3-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:27:13,666 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924031.813617}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924031.813617}, "processing_timestamp": 1756924032.2284439}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:27:13,676 - services.external_task_worker - INFO - Successfully completed task 9cbce1b1-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:13,684 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:13,684 - services.external_task_worker - INFO - Executing task 9cbfa0e8-88f3-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:27:13,684 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924031.813617}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924031.813617}, "processing_timestamp": 1756924032.2284439}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:27:13,693 - services.external_task_worker - INFO - Successfully completed task 9cbfa0e8-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:13,700 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:13,700 - services.external_task_worker - INFO - Executing task 9cc2390d-88f3-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:27:13,700 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924031.813617}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924031.813617}, "processing_timestamp": 1756924032.2284439}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:27:13,710 - services.external_task_worker - INFO - Successfully completed task 9cc2390d-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:13,717 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:13,717 - services.external_task_worker - INFO - Executing task 9cc4d130-88f3-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:27:13,718 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924031.813617}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924031.813617}, "processing_timestamp": 1756924032.2284439}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:27:13,727 - services.external_task_worker - INFO - Successfully completed task 9cc4d130-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:13,736 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:13,736 - services.external_task_worker - INFO - Executing task 9cc79061-88f3-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:27:13,736 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924031.813617}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924031.813617}, "processing_timestamp": 1756924032.2284439}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:27:13,745 - services.external_task_worker - INFO - Successfully completed task 9cc79061-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:13,752 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:27:13,752 - services.external_task_worker - INFO - Executing task 9cca2887-88f3-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:27:13,753 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924031.813617}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924031.813617}, "processing_timestamp": 1756924032.2284439}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:27:13,766 - services.external_task_worker - INFO - Successfully completed task 9cca2887-88f3-11f0-bc34-0242ac160003
2025-09-03 14:27:14,666 - __main__ - INFO - Received signal 2, shutting down worker...
2025-09-03 14:27:14,667 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 14:29:10,865 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756924150
2025-09-03 14:29:31,028 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:31,028 - services.external_task_worker - INFO - Executing task ee938191-88f3-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:29:31,028 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924170.9299603}'}
2025-09-03 14:29:31,038 - services.external_task_worker - INFO - Successfully completed task ee938191-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:31,047 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:31,047 - services.external_task_worker - INFO - Executing task ee9f417c-88f3-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:29:31,047 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924170.9299603}', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924170.9299603}, "processing_timestamp": 1756924171.0287678}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["system", "requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:31,059 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:29:31,135 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:29:31,142 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:29:31,143 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:29:31,165 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:29:31,165 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:29:33,155 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:29:33,155 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:29:35,313 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:29:35,599 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:29:35,608 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:29:35,610 - services.qdrant_service - INFO - Found 10 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:29:35,610 - services.qdrant_service - INFO - Found 10 similar chunks for query: 'What are the navigation system requirements?...'
2025-09-03 14:29:35,677 - services.external_task_worker - INFO - Successfully completed task ee9f417c-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:35,685 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:35,686 - services.external_task_worker - INFO - Executing task f1631c80-88f3-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:29:35,686 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924170.9299603}', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924170.9299603}, "processing_timestamp": 1756924171.0287678}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["system", "requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:35,698 - services.external_task_worker - INFO - Successfully completed task f1631c80-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:35,709 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:35,709 - services.external_task_worker - INFO - Executing task f1664fe7-88f3-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:29:35,709 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924170.9299603}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924170.9299603}, "processing_timestamp": 1756924171.0287678}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["system", "requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:35,720 - services.external_task_worker - INFO - Successfully completed task f1664fe7-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:35,728 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:35,728 - services.external_task_worker - INFO - Executing task f169ab5c-88f3-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:29:35,729 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924170.9299603}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924170.9299603}, "processing_timestamp": 1756924171.0287678}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["system", "requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:35,738 - services.external_task_worker - INFO - Successfully completed task f169ab5c-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:35,747 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:35,747 - services.external_task_worker - INFO - Executing task f16c6a8f-88f3-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:29:35,747 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924170.9299603}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924170.9299603}, "processing_timestamp": 1756924171.0287678}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["system", "requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:35,757 - services.external_task_worker - INFO - Successfully completed task f16c6a8f-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:35,765 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:35,765 - services.external_task_worker - INFO - Executing task f16f77e0-88f3-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:29:35,766 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924170.9299603}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924170.9299603}, "processing_timestamp": 1756924171.0287678}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["system", "requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:35,776 - services.external_task_worker - INFO - Successfully completed task f16f77e0-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:35,783 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:35,783 - services.external_task_worker - INFO - Executing task f1723716-88f3-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:29:35,783 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924170.9299603}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Navigation System Requirements\n[2] Navigation System Requirements\n[3] Technical Specifications\n', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924170.9299603}, "processing_timestamp": 1756924171.0287678}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["system", "requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:35,797 - services.external_task_worker - INFO - Successfully completed task f1723716-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:36,814 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:36,814 - services.external_task_worker - INFO - Executing task f1a41ca0-88f3-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:29:36,814 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924176.0708761}'}
2025-09-03 14:29:36,825 - services.external_task_worker - INFO - Successfully completed task f1a41ca0-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:36,840 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:36,841 - services.external_task_worker - INFO - Executing task f21247db-88f3-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:29:36,841 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924176.0708761}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924176.0708761}, "processing_timestamp": 1756924176.8148468}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:36,843 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:29:36,888 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:29:36,894 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:29:36,895 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:29:36,909 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:29:36,910 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:29:36,910 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:29:36,910 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:29:37,845 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:29:37,851 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:29:37,857 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:29:37,857 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:29:37,858 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 14:29:37,869 - services.external_task_worker - INFO - Successfully completed task f21247db-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:37,876 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:37,876 - services.external_task_worker - INFO - Executing task f2b1e34f-88f3-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:29:37,877 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924176.0708761}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924176.0708761}, "processing_timestamp": 1756924176.8148468}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:37,883 - services.external_task_worker - INFO - Successfully completed task f2b1e34f-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:37,892 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:37,892 - services.external_task_worker - INFO - Executing task f2b40646-88f3-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:29:37,892 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924176.0708761}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924176.0708761}, "processing_timestamp": 1756924176.8148468}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:37,898 - services.external_task_worker - INFO - Successfully completed task f2b40646-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:37,906 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:37,906 - services.external_task_worker - INFO - Executing task f2b6504b-88f3-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:29:37,906 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924176.0708761}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924176.0708761}, "processing_timestamp": 1756924176.8148468}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:37,914 - services.external_task_worker - INFO - Successfully completed task f2b6504b-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:37,920 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:37,920 - services.external_task_worker - INFO - Executing task f2b8c15e-88f3-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:29:37,920 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924176.0708761}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924176.0708761}, "processing_timestamp": 1756924176.8148468}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:37,929 - services.external_task_worker - INFO - Successfully completed task f2b8c15e-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:37,935 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:37,935 - services.external_task_worker - INFO - Executing task f2bae44f-88f3-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:29:37,935 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924176.0708761}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924176.0708761}, "processing_timestamp": 1756924176.8148468}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:37,945 - services.external_task_worker - INFO - Successfully completed task f2bae44f-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:37,953 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:37,953 - services.external_task_worker - INFO - Executing task f2bd5465-88f3-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:29:37,953 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924176.0708761}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924176.0708761}, "processing_timestamp": 1756924176.8148468}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:37,970 - services.external_task_worker - INFO - Successfully completed task f2bd5465-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:38,986 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:38,986 - services.external_task_worker - INFO - Executing task f2e4647f-88f3-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:29:38,986 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924178.1721087}'}
2025-09-03 14:29:38,993 - services.external_task_worker - INFO - Successfully completed task f2e4647f-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:39,000 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:39,000 - services.external_task_worker - INFO - Executing task f35d652a-88f3-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:29:39,000 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924178.1721087}', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924178.1721087}, "processing_timestamp": 1756924178.9865403}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:39,003 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:29:39,047 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:29:39,050 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:29:39,051 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:29:39,063 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:29:39,063 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:29:39,063 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:29:39,063 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:29:40,089 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:29:40,096 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:29:40,101 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:29:40,101 - services.qdrant_service - INFO - Found 5 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:29:40,101 - services.qdrant_service - INFO - Found 5 similar chunks for query: 'What safety procedures should be followed?...'
2025-09-03 14:29:40,142 - services.external_task_worker - INFO - Successfully completed task f35d652a-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:40,149 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:40,149 - services.external_task_worker - INFO - Executing task f40cb80e-88f3-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:29:40,149 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924178.1721087}', 'retrieved_chunks': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924178.1721087}, "processing_timestamp": 1756924178.9865403}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:40,157 - services.external_task_worker - INFO - Successfully completed task f40cb80e-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:40,166 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:40,166 - services.external_task_worker - INFO - Executing task f40f0215-88f3-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:29:40,166 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924178.1721087}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924178.1721087}, "processing_timestamp": 1756924178.9865403}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:40,176 - services.external_task_worker - INFO - Successfully completed task f40f0215-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:40,184 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:40,185 - services.external_task_worker - INFO - Executing task f4119a3a-88f3-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:29:40,185 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924178.1721087}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924178.1721087}, "processing_timestamp": 1756924178.9865403}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:40,197 - services.external_task_worker - INFO - Successfully completed task f4119a3a-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:40,206 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:40,206 - services.external_task_worker - INFO - Executing task f414a78d-88f3-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:29:40,206 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nUser Question: What safety procedures should be followed?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924178.1721087}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924178.1721087}, "processing_timestamp": 1756924178.9865403}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:40,215 - services.external_task_worker - INFO - Successfully completed task f414a78d-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:40,223 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:40,224 - services.external_task_worker - INFO - Executing task f417dbee-88f3-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:29:40,224 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nUser Question: What safety procedures should be followed?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924178.1721087}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924178.1721087}, "processing_timestamp": 1756924178.9865403}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:40,232 - services.external_task_worker - INFO - Successfully completed task f417dbee-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:40,242 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:40,242 - services.external_task_worker - INFO - Executing task f41a7414-88f3-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:29:40,242 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nUser Question: What safety procedures should be followed?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924178.1721087}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Safety Protocols\n[2] Safety Protocols\n[3] Safety Protocols\n', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924178.1721087}, "processing_timestamp": 1756924178.9865403}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:40,255 - services.external_task_worker - INFO - Successfully completed task f41a7414-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:42,276 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:42,276 - services.external_task_worker - INFO - Executing task f4bca79e-88f3-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:29:42,276 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924181.268691}'}
2025-09-03 14:29:42,282 - services.external_task_worker - INFO - Successfully completed task f4bca79e-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:42,289 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:42,289 - services.external_task_worker - INFO - Executing task f5536979-88f3-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:29:42,289 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924181.268691}', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924181.268691}, "processing_timestamp": 1756924182.276839}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:42,292 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:29:42,339 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:29:42,342 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:29:42,343 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:29:42,354 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:29:42,355 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:29:42,355 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:29:42,355 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:29:43,499 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:29:43,507 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:29:43,512 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:29:43,512 - services.qdrant_service - INFO - Found 2 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:29:43,512 - services.qdrant_service - INFO - Found 2 similar chunks for query: 'For Hardware Components what is our memory require...'
2025-09-03 14:29:43,529 - services.external_task_worker - INFO - Successfully completed task f5536979-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:43,535 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:43,535 - services.external_task_worker - INFO - Executing task f611af7d-88f3-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:29:43,535 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924181.268691}', 'retrieved_chunks': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924181.268691}, "processing_timestamp": 1756924182.276839}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:43,544 - services.external_task_worker - INFO - Successfully completed task f611af7d-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:43,549 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:43,550 - services.external_task_worker - INFO - Executing task f613ab64-88f3-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:29:43,550 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924181.268691}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924181.268691}, "processing_timestamp": 1756924182.276839}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:43,559 - services.external_task_worker - INFO - Successfully completed task f613ab64-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:43,564 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:43,564 - services.external_task_worker - INFO - Executing task f615f569-88f3-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:29:43,564 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924181.268691}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924181.268691}, "processing_timestamp": 1756924182.276839}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:43,572 - services.external_task_worker - INFO - Successfully completed task f615f569-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:43,586 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:43,587 - services.external_task_worker - INFO - Executing task f617f14c-88f3-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:29:43,587 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': 'You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn\'t contain enough information to fully answer the question, acknowledge this and provide what information you can.', 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924181.268691}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924181.268691}, "processing_timestamp": 1756924182.276839}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:43,597 - services.external_task_worker - INFO - Successfully completed task f617f14c-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:43,605 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:43,605 - services.external_task_worker - INFO - Executing task f61bc1ed-88f3-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:29:43,605 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': 'You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn\'t contain enough information to fully answer the question, acknowledge this and provide what information you can.', 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924181.268691}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924181.268691}, "processing_timestamp": 1756924182.276839}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:43,614 - services.external_task_worker - INFO - Successfully completed task f61bc1ed-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:43,622 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:43,622 - services.external_task_worker - INFO - Executing task f61e5a13-88f3-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:29:43,622 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': 'You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn\'t contain enough information to fully answer the question, acknowledge this and provide what information you can.', 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924181.268691}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Technical Specifications\n[2] Technical Specifications\n', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924181.268691}, "processing_timestamp": 1756924182.276839}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:43,637 - services.external_task_worker - INFO - Successfully completed task f61e5a13-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:44,652 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:44,652 - services.external_task_worker - INFO - Executing task f696494d-88f3-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:29:44,652 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924184.3720725}'}
2025-09-03 14:29:44,660 - services.external_task_worker - INFO - Successfully completed task f696494d-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:44,666 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:44,666 - services.external_task_worker - INFO - Executing task f6bdf5a8-88f3-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:29:44,666 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924184.3720725}', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924184.3720725}, "processing_timestamp": 1756924184.6526077}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:44,669 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:29:44,713 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:29:44,717 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:29:44,717 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:29:44,729 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:29:44,730 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:29:44,730 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:29:44,730 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:29:45,727 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:29:45,733 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:29:45,740 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:29:45,741 - services.qdrant_service - INFO - Found 2 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:29:45,741 - services.qdrant_service - INFO - Found 2 similar chunks for query: 'What frequency does the Communication Interfaces o...'
2025-09-03 14:29:45,761 - services.external_task_worker - INFO - Successfully completed task f6bdf5a8-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:45,768 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:45,768 - services.external_task_worker - INFO - Executing task f7661c9c-88f3-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:29:45,768 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924184.3720725}', 'retrieved_chunks': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924184.3720725}, "processing_timestamp": 1756924184.6526077}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:45,777 - services.external_task_worker - INFO - Successfully completed task f7661c9c-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:45,783 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:45,783 - services.external_task_worker - INFO - Executing task f7688db3-88f3-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:29:45,783 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924184.3720725}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924184.3720725}, "processing_timestamp": 1756924184.6526077}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:45,793 - services.external_task_worker - INFO - Successfully completed task f7688db3-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:45,800 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:45,800 - services.external_task_worker - INFO - Executing task f76ab0a8-88f3-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:29:45,800 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924184.3720725}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924184.3720725}, "processing_timestamp": 1756924184.6526077}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:45,809 - services.external_task_worker - INFO - Successfully completed task f76ab0a8-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:45,816 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:45,817 - services.external_task_worker - INFO - Executing task f76d48cb-88f3-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:29:45,817 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nUser Question: What frequency does the Communication Interfaces operate at?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924184.3720725}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924184.3720725}, "processing_timestamp": 1756924184.6526077}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:45,827 - services.external_task_worker - INFO - Successfully completed task f76d48cb-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:45,834 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:45,834 - services.external_task_worker - INFO - Executing task f7702e0c-88f3-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:29:45,834 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nUser Question: What frequency does the Communication Interfaces operate at?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924184.3720725}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924184.3720725}, "processing_timestamp": 1756924184.6526077}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:45,844 - services.external_task_worker - INFO - Successfully completed task f7702e0c-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:45,850 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:29:45,850 - services.external_task_worker - INFO - Executing task f7729f22-88f3-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:29:45,850 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nUser Question: What frequency does the Communication Interfaces operate at?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924184.3720725}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Technical Specifications\n[2] Technical Specifications\n', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924184.3720725}, "processing_timestamp": 1756924184.6526077}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:29:45,865 - services.external_task_worker - INFO - Successfully completed task f7729f22-88f3-11f0-bc34-0242ac160003
2025-09-03 14:29:46,429 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 14:30:17,019 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756924217
2025-09-03 14:30:35,169 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:35,169 - services.external_task_worker - INFO - Executing task 1469534c-88f4-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:30:35,170 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924234.410978}'}
2025-09-03 14:30:35,179 - services.external_task_worker - INFO - Successfully completed task 1469534c-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:35,186 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:35,186 - services.external_task_worker - INFO - Executing task 14da8bc7-88f4-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:30:35,186 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924234.410978}', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924234.410978}, "processing_timestamp": 1756924235.17051}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["system", "requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:35,199 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:30:35,268 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:30:35,275 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:30:35,276 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:30:35,296 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:30:35,296 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:30:35,395 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:30:35,395 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:30:36,578 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:30:36,858 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:30:36,866 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:30:36,867 - services.qdrant_service - INFO - Found 10 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:30:36,867 - services.qdrant_service - INFO - Found 10 similar chunks for query: 'What are the navigation system requirements?...'
2025-09-03 14:30:36,958 - services.external_task_worker - INFO - Successfully completed task 14da8bc7-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:36,967 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:36,967 - services.external_task_worker - INFO - Executing task 15e9b1eb-88f4-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:30:36,967 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924234.410978}', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924234.410978}, "processing_timestamp": 1756924235.17051}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["system", "requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:36,979 - services.external_task_worker - INFO - Successfully completed task 15e9b1eb-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:36,989 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:36,989 - services.external_task_worker - INFO - Executing task 15ed3472-88f4-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:30:36,989 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924234.410978}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924234.410978}, "processing_timestamp": 1756924235.17051}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["system", "requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:37,000 - services.external_task_worker - INFO - Successfully completed task 15ed3472-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:37,010 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:37,010 - services.external_task_worker - INFO - Executing task 15f041c7-88f4-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:30:37,010 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924234.410978}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924234.410978}, "processing_timestamp": 1756924235.17051}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["system", "requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:37,020 - services.external_task_worker - INFO - Successfully completed task 15f041c7-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:37,029 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:37,029 - services.external_task_worker - INFO - Executing task 15f3762a-88f4-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:30:37,029 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924234.410978}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924234.410978}, "processing_timestamp": 1756924235.17051}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["system", "requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:37,038 - services.external_task_worker - INFO - Successfully completed task 15f3762a-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:37,050 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:37,050 - services.external_task_worker - INFO - Executing task 15f6355b-88f4-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:30:37,050 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924234.410978}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924234.410978}, "processing_timestamp": 1756924235.17051}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["system", "requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:37,063 - services.external_task_worker - INFO - Successfully completed task 15f6355b-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:37,070 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:37,071 - services.external_task_worker - INFO - Executing task 15f9def1-88f4-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:30:37,071 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924234.410978}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Navigation System Requirements\n[2] Navigation System Requirements\n[3] Technical Specifications\n', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["system", "requirements"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924234.410978}, "processing_timestamp": 1756924235.17051}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["system", "requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:37,092 - services.external_task_worker - INFO - Successfully completed task 15f9def1-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:41,136 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:41,136 - services.external_task_worker - INFO - Executing task 180195eb-88f4-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:30:41,137 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924240.438783}'}
2025-09-03 14:30:41,148 - services.external_task_worker - INFO - Successfully completed task 180195eb-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:41,162 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:41,162 - services.external_task_worker - INFO - Executing task 18693076-88f4-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:30:41,162 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924240.438783}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924240.438783}, "processing_timestamp": 1756924241.1371942}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:41,164 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:30:41,211 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:30:41,216 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:30:41,216 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:30:41,231 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:30:41,231 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:30:41,232 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:30:41,232 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:30:42,195 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:30:42,200 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:30:42,207 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:30:42,207 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:30:42,207 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 14:30:42,221 - services.external_task_worker - INFO - Successfully completed task 18693076-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:42,231 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:42,231 - services.external_task_worker - INFO - Executing task 190d11aa-88f4-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:30:42,231 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924240.438783}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924240.438783}, "processing_timestamp": 1756924241.1371942}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:42,244 - services.external_task_worker - INFO - Successfully completed task 190d11aa-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:42,252 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:42,252 - services.external_task_worker - INFO - Executing task 190ff7f1-88f4-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:30:42,252 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924240.438783}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924240.438783}, "processing_timestamp": 1756924241.1371942}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:42,263 - services.external_task_worker - INFO - Successfully completed task 190ff7f1-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:42,272 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:42,272 - services.external_task_worker - INFO - Executing task 19135366-88f4-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:30:42,272 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924240.438783}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924240.438783}, "processing_timestamp": 1756924241.1371942}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:42,282 - services.external_task_worker - INFO - Successfully completed task 19135366-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:42,290 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:42,290 - services.external_task_worker - INFO - Executing task 191660b9-88f4-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:30:42,290 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924240.438783}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924240.438783}, "processing_timestamp": 1756924241.1371942}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:42,300 - services.external_task_worker - INFO - Successfully completed task 191660b9-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:42,310 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:42,310 - services.external_task_worker - INFO - Executing task 19191fea-88f4-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:30:42,311 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924240.438783}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924240.438783}, "processing_timestamp": 1756924241.1371942}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:42,320 - services.external_task_worker - INFO - Successfully completed task 19191fea-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:42,329 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:42,329 - services.external_task_worker - INFO - Executing task 191c0630-88f4-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:30:42,329 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924240.438783}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924240.438783}, "processing_timestamp": 1756924241.1371942}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:42,346 - services.external_task_worker - INFO - Successfully completed task 191c0630-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:51,424 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:51,424 - services.external_task_worker - INFO - Executing task 1e1781ba-88f4-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:30:51,424 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924250.649008}'}
2025-09-03 14:30:51,433 - services.external_task_worker - INFO - Successfully completed task 1e1781ba-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:51,445 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:51,445 - services.external_task_worker - INFO - Executing task 1e8add15-88f4-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:30:51,445 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924250.649008}', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924250.649008}, "processing_timestamp": 1756924251.424905}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:51,448 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:30:51,503 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:30:51,509 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:30:51,509 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:30:51,527 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:30:51,527 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:30:51,528 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:30:51,528 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:30:52,413 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:30:52,422 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:30:52,429 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:30:52,429 - services.qdrant_service - INFO - Found 5 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:30:52,429 - services.qdrant_service - INFO - Found 5 similar chunks for query: 'What safety procedures should be followed?...'
2025-09-03 14:30:52,465 - services.external_task_worker - INFO - Successfully completed task 1e8add15-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:52,473 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:52,473 - services.external_task_worker - INFO - Executing task 1f2855a9-88f4-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:30:52,473 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924250.649008}', 'retrieved_chunks': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924250.649008}, "processing_timestamp": 1756924251.424905}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:52,481 - services.external_task_worker - INFO - Successfully completed task 1f2855a9-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:52,489 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:52,489 - services.external_task_worker - INFO - Executing task 1f2ac6c0-88f4-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:30:52,489 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924250.649008}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924250.649008}, "processing_timestamp": 1756924251.424905}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:52,497 - services.external_task_worker - INFO - Successfully completed task 1f2ac6c0-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:52,504 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:52,504 - services.external_task_worker - INFO - Executing task 1f2d37d5-88f4-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:30:52,504 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924250.649008}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924250.649008}, "processing_timestamp": 1756924251.424905}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:52,515 - services.external_task_worker - INFO - Successfully completed task 1f2d37d5-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:52,523 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:52,523 - services.external_task_worker - INFO - Executing task 1f2fcef8-88f4-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:30:52,523 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nUser Question: What safety procedures should be followed?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924250.649008}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924250.649008}, "processing_timestamp": 1756924251.424905}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:52,532 - services.external_task_worker - INFO - Successfully completed task 1f2fcef8-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:52,540 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:52,541 - services.external_task_worker - INFO - Executing task 1f326719-88f4-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:30:52,541 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nUser Question: What safety procedures should be followed?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924250.649008}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924250.649008}, "processing_timestamp": 1756924251.424905}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:52,550 - services.external_task_worker - INFO - Successfully completed task 1f326719-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:52,560 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:52,560 - services.external_task_worker - INFO - Executing task 1f35264f-88f4-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:30:52,560 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nUser Question: What safety procedures should be followed?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924250.649008}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Safety Protocols\n[2] Safety Protocols\n[3] Safety Protocols\n', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924250.649008}, "processing_timestamp": 1756924251.424905}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:52,575 - services.external_task_worker - INFO - Successfully completed task 1f35264f-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:56,611 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:56,611 - services.external_task_worker - INFO - Executing task 2195aba9-88f4-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:30:56,611 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924256.5123458}'}
2025-09-03 14:30:56,618 - services.external_task_worker - INFO - Successfully completed task 2195aba9-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:56,626 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:56,626 - services.external_task_worker - INFO - Executing task 21a207d4-88f4-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:30:56,626 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924256.5123458}', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924256.5123458}, "processing_timestamp": 1756924256.611791}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:56,629 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:30:56,676 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:30:56,681 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:30:56,681 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:30:56,700 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:30:56,700 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:30:56,700 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:30:56,700 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:30:57,650 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:30:57,664 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:30:57,673 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:30:57,674 - services.qdrant_service - INFO - Found 2 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:30:57,674 - services.qdrant_service - INFO - Found 2 similar chunks for query: 'For Hardware Components what is our memory require...'
2025-09-03 14:30:57,708 - services.external_task_worker - INFO - Successfully completed task 21a207d4-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:57,717 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:57,717 - services.external_task_worker - INFO - Executing task 2247e4d8-88f4-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:30:57,717 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924256.5123458}', 'retrieved_chunks': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924256.5123458}, "processing_timestamp": 1756924256.611791}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:57,743 - services.external_task_worker - INFO - Successfully completed task 2247e4d8-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:57,755 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:57,755 - services.external_task_worker - INFO - Executing task 224b8e6f-88f4-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:30:57,755 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924256.5123458}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924256.5123458}, "processing_timestamp": 1756924256.611791}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:57,767 - services.external_task_worker - INFO - Successfully completed task 224b8e6f-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:57,778 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:57,778 - services.external_task_worker - INFO - Executing task 225133d4-88f4-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:30:57,778 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924256.5123458}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924256.5123458}, "processing_timestamp": 1756924256.611791}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:57,795 - services.external_task_worker - INFO - Successfully completed task 225133d4-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:57,806 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:57,806 - services.external_task_worker - INFO - Executing task 22550477-88f4-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:30:57,807 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': 'You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn\'t contain enough information to fully answer the question, acknowledge this and provide what information you can.', 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924256.5123458}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924256.5123458}, "processing_timestamp": 1756924256.611791}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:57,817 - services.external_task_worker - INFO - Successfully completed task 22550477-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:57,828 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:57,828 - services.external_task_worker - INFO - Executing task 2258d518-88f4-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:30:57,828 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': 'You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn\'t contain enough information to fully answer the question, acknowledge this and provide what information you can.', 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924256.5123458}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924256.5123458}, "processing_timestamp": 1756924256.611791}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:57,841 - services.external_task_worker - INFO - Successfully completed task 2258d518-88f4-11f0-bc34-0242ac160003
2025-09-03 14:30:57,852 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:30:57,853 - services.external_task_worker - INFO - Executing task 225c308e-88f4-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:30:57,853 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': 'You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn\'t contain enough information to fully answer the question, acknowledge this and provide what information you can.', 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924256.5123458}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Technical Specifications\n[2] Technical Specifications\n', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924256.5123458}, "processing_timestamp": 1756924256.611791}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:30:57,869 - services.external_task_worker - INFO - Successfully completed task 225c308e-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:05,943 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:05,944 - services.external_task_worker - INFO - Executing task 26eb0798-88f4-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:31:05,944 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924265.4589338}'}
2025-09-03 14:31:05,953 - services.external_task_worker - INFO - Successfully completed task 26eb0798-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:05,961 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:05,961 - services.external_task_worker - INFO - Executing task 273221d3-88f4-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:31:05,961 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924265.4589338}', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924265.4589338}, "processing_timestamp": 1756924265.9442124}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:31:05,963 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:31:06,012 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:31:06,018 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:31:06,018 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:31:06,035 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:31:06,035 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:31:06,036 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:31:06,036 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:31:07,016 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:31:07,025 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:31:07,030 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:31:07,031 - services.qdrant_service - INFO - Found 2 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:31:07,031 - services.qdrant_service - INFO - Found 2 similar chunks for query: 'What frequency does the Communication Interfaces o...'
2025-09-03 14:31:07,048 - services.external_task_worker - INFO - Successfully completed task 273221d3-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:07,055 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:07,056 - services.external_task_worker - INFO - Executing task 27d98577-88f4-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:31:07,056 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924265.4589338}', 'retrieved_chunks': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924265.4589338}, "processing_timestamp": 1756924265.9442124}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:31:07,064 - services.external_task_worker - INFO - Successfully completed task 27d98577-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:07,071 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:07,071 - services.external_task_worker - INFO - Executing task 27dbf68e-88f4-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:31:07,071 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924265.4589338}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924265.4589338}, "processing_timestamp": 1756924265.9442124}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:31:07,079 - services.external_task_worker - INFO - Successfully completed task 27dbf68e-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:07,087 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:07,087 - services.external_task_worker - INFO - Executing task 27de4093-88f4-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:31:07,087 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924265.4589338}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924265.4589338}, "processing_timestamp": 1756924265.9442124}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:31:07,097 - services.external_task_worker - INFO - Successfully completed task 27de4093-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:07,106 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:07,106 - services.external_task_worker - INFO - Executing task 27e0b1a6-88f4-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:31:07,106 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nUser Question: What frequency does the Communication Interfaces operate at?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924265.4589338}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924265.4589338}, "processing_timestamp": 1756924265.9442124}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:31:07,115 - services.external_task_worker - INFO - Successfully completed task 27e0b1a6-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:07,123 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:07,124 - services.external_task_worker - INFO - Executing task 27e397e7-88f4-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:31:07,124 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nUser Question: What frequency does the Communication Interfaces operate at?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924265.4589338}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924265.4589338}, "processing_timestamp": 1756924265.9442124}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:31:07,136 - services.external_task_worker - INFO - Successfully completed task 27e397e7-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:07,146 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:07,146 - services.external_task_worker - INFO - Executing task 27e6571d-88f4-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:31:07,146 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nUser Question: What frequency does the Communication Interfaces operate at?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924265.4589338}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Technical Specifications\n[2] Technical Specifications\n', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924265.4589338}, "processing_timestamp": 1756924265.9442124}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:31:07,160 - services.external_task_worker - INFO - Successfully completed task 27e6571d-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:07,522 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 14:31:37,441 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756924297
2025-09-03 14:31:43,438 - __main__ - INFO - Received signal 15, shutting down worker...
2025-09-03 14:31:49,221 - services.external_task_worker - INFO - Starting external task worker: odras-worker-1756924309
2025-09-03 14:31:49,229 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:49,230 - services.external_task_worker - INFO - Executing task 3f66ba93-88f4-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:31:49,230 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924306.5313447}'}
2025-09-03 14:31:49,239 - services.external_task_worker - INFO - Successfully completed task 3f66ba93-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:49,246 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:49,246 - services.external_task_worker - INFO - Executing task 40ff34fe-88f4-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:31:49,246 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924306.5313447}', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924306.5313447}, "processing_timestamp": 1756924309.230638}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:31:49,258 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:31:49,326 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:31:49,330 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:31:49,331 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:31:49,345 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:31:49,346 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:31:49,420 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:31:49,420 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:31:50,624 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:31:50,896 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:31:50,908 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:31:50,909 - services.qdrant_service - INFO - Found 10 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:31:50,909 - services.qdrant_service - INFO - Found 10 similar chunks for query: 'What are the navigation system requirements?...'
2025-09-03 14:31:50,970 - services.external_task_worker - INFO - Successfully completed task 40ff34fe-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:50,978 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:50,978 - services.external_task_worker - INFO - Executing task 42075642-88f4-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:31:50,978 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924306.5313447}', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924306.5313447}, "processing_timestamp": 1756924309.230638}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:31:50,986 - services.external_task_worker - INFO - Successfully completed task 42075642-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:50,995 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:50,995 - services.external_task_worker - INFO - Executing task 4209ee69-88f4-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:31:50,996 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924306.5313447}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924306.5313447}, "processing_timestamp": 1756924309.230638}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:31:51,004 - services.external_task_worker - INFO - Successfully completed task 4209ee69-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:51,013 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:51,013 - services.external_task_worker - INFO - Executing task 420c858e-88f4-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:31:51,013 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924306.5313447}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924306.5313447}, "processing_timestamp": 1756924309.230638}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:31:51,023 - services.external_task_worker - INFO - Successfully completed task 420c858e-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:51,031 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:51,031 - services.external_task_worker - INFO - Executing task 420f1db1-88f4-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:31:51,031 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924306.5313447}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924306.5313447}, "processing_timestamp": 1756924309.230638}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:31:51,041 - services.external_task_worker - INFO - Successfully completed task 420f1db1-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:51,050 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:51,050 - services.external_task_worker - INFO - Executing task 421203f2-88f4-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:31:51,051 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924306.5313447}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924306.5313447}, "processing_timestamp": 1756924309.230638}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:31:51,063 - services.external_task_worker - INFO - Successfully completed task 421203f2-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:51,073 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:51,073 - services.external_task_worker - INFO - Executing task 42151148-88f4-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:31:51,073 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924306.5313447}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Navigation System Requirements\n[2] Navigation System Requirements\n[3] Technical Specifications\n', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924306.5313447}, "processing_timestamp": 1756924309.230638}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:31:51,091 - services.external_task_worker - INFO - Successfully completed task 42151148-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:59,168 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:59,168 - services.external_task_worker - INFO - Executing task 466e5962-88f4-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:31:59,168 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924318.3280485}'}
2025-09-03 14:31:59,179 - services.external_task_worker - INFO - Successfully completed task 466e5962-88f4-11f0-bc34-0242ac160003
2025-09-03 14:31:59,188 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:31:59,189 - services.external_task_worker - INFO - Executing task 46ebeded-88f4-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:31:59,189 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924318.3280485}', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924318.3280485}, "processing_timestamp": 1756924319.1687489}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:31:59,192 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:31:59,238 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:31:59,244 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:31:59,244 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:31:59,262 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:31:59,262 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:31:59,263 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:31:59,263 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:32:00,306 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:32:00,315 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:32:00,322 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:32:00,323 - services.qdrant_service - INFO - Found 10 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:32:00,323 - services.qdrant_service - INFO - Found 10 similar chunks for query: 'What are the navigation system requirements?...'
2025-09-03 14:32:00,375 - services.external_task_worker - INFO - Successfully completed task 46ebeded-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:00,383 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:00,383 - services.external_task_worker - INFO - Executing task 47a26cc1-88f4-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:32:00,383 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924318.3280485}', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924318.3280485}, "processing_timestamp": 1756924319.1687489}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:00,394 - services.external_task_worker - INFO - Successfully completed task 47a26cc1-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:00,403 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:00,404 - services.external_task_worker - INFO - Executing task 47a52bf8-88f4-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:32:00,404 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924318.3280485}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.47959125, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "content": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "source_document": "Safety Protocols", "similarity_score": 0.46008196, "chunk_metadata": {"chunk_id": "06c184ad-d62e-4037-ae05-7399a54936e5", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 66, "text": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined safe route\\n   - Do not continue mission without primary navigation", "content_preview": "#### 2.2.1 System Failure Response\\n1. **Primary Navigation Failure**\\n   - Switch to backup navigation system immediately\\n   - Report failure to control station\\n   - Return to base using predetermined ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.45862547, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "content": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "source_document": "Navigation System Requirements", "similarity_score": 0.4322413, "chunk_metadata": {"chunk_id": "49936670-8134-4076-b4db-76cd6bccdc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 5, "token_count": 75, "text": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigation events\\n- **REQ-SAFETY-003**: Emergency stop functionality SHALL be available within 1 button press", "content_preview": "### 3.1 Critical Functions\\n- **REQ-SAFETY-001**: Navigation system failures SHALL NOT affect primary vehicle systems\\n- **REQ-SAFETY-002**: The system SHALL provide audible alerts for critical navigati...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "content": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_document": "Safety Protocols", "similarity_score": 0.4016766, "chunk_metadata": {"chunk_id": "f493bbf3-d99a-4c4e-90be-a173b0cadfb4", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 2, "token_count": 36, "text": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "content_preview": "3. **Communication Systems**\\n   - Radio check with control station\\n   - Verify emergency communication channels\\n   - Test data link connectivity", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924318.3280485}, "processing_timestamp": 1756924319.1687489}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:00,415 - services.external_task_worker - INFO - Successfully completed task 47a52bf8-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:00,423 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:00,424 - services.external_task_worker - INFO - Executing task 47a8876d-88f4-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:32:00,424 - services.external_task_worker - INFO - Task variables: {'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924318.3280485}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924318.3280485}, "processing_timestamp": 1756924319.1687489}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:00,434 - services.external_task_worker - INFO - Successfully completed task 47a8876d-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:00,443 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:00,443 - services.external_task_worker - INFO - Executing task 47ab46a0-88f4-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:32:00,443 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924318.3280485}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924318.3280485}, "processing_timestamp": 1756924319.1687489}', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:00,453 - services.external_task_worker - INFO - Successfully completed task 47ab46a0-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:00,463 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:00,464 - services.external_task_worker - INFO - Executing task 47ae2ce1-88f4-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:32:00,464 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924318.3280485}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924318.3280485}, "processing_timestamp": 1756924319.1687489}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:00,475 - services.external_task_worker - INFO - Successfully completed task 47ae2ce1-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:00,482 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:00,483 - services.external_task_worker - INFO - Executing task 47b16147-88f4-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:32:00,483 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements  \n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nUser Question: What are the navigation system requirements?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What are the navigation system requirements?', 'context_quality_score': 0.59270016, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924318.3280485}', 'reranked_context': '[{"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "content": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "source_document": "Navigation System Requirements", "similarity_score": 0.680192, "chunk_metadata": {"chunk_id": "4c3217da-a133-4c17-a38c-15e2ecf715ef", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 106, "text": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)", "content_preview": "### 1.1 Core Navigation Functions\\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\\n- **REQ-NAV-002**: The system SHALL support waypoint ...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "content": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "source_document": "Navigation System Requirements", "similarity_score": 0.6318933, "chunk_metadata": {"chunk_id": "4c27e6de-9e0a-426e-897c-acb7a1e42cc7", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 102, "text": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup", "content_preview": "### 1.2 User Interface Requirements  \\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\\n- **REQ-UI-002**: The system SHALL provide a map view with zoom leve...", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}, {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "content": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "source_document": "Technical Specifications", "similarity_score": 0.60904396, "chunk_metadata": {"chunk_id": "0b911589-a27f-4564-80f2-3becd774653c", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 86, "text": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation", "content_preview": "### 2.2 Navigation Software Stack\\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\\n- **Route Pla...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.53267634, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.5096952, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Navigation System Requirements\n[2] Navigation System Requirements\n[3] Technical Specifications\n', 'processed_query': '{"original_query": "What are the navigation system requirements?", "cleaned_query": "What are the navigation system requirements?", "key_terms": ["what", "navigation", "system", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements", "system"], "word_count": 6, "char_count": 44, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924318.3280485}, "processing_timestamp": 1756924319.1687489}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Core Navigation Functions\n- **REQ-NAV-001**: The navigation system SHALL provide real-time position tracking with accuracy within 3 meters\n- **REQ-NAV-002**: The system SHALL support waypoint navigation with automatic route calculation\n- **REQ-NAV-003**: The system SHALL provide turn-by-turn guidance with voice prompts\n- **REQ-NAV-004**: The system SHALL support multiple coordinate systems (WGS84, UTM, local grid)\n[Context 2]: ### 1.2 User Interface Requirements\n- **REQ-UI-001**: The navigation interface SHALL display current position, heading, and speed\n- **REQ-UI-002**: The system SHALL provide a map view with zoom levels from 1:100 to 1:50000\n- **REQ-UI-003**: The interface SHALL support both day and night display modes\n- **REQ-UI-004**: All critical navigation information SHALL be visible within 2 seconds of system startup\n[Context 3]: ### 2.2 Navigation Software Stack\n- **Core Navigation**: Custom C++ navigation engine with real-time processing\n- **Mapping Framework**: OpenStreetMap integration with custom tile server\n- **Route Planning**: A* algorithm implementation with multi-criteria optimization\n- **Sensor Fusion**: Extended Kalman Filter for position/velocity estimation\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "navigation", "system", "requirements"], "secondary_terms": [], "search_boost_terms": ["requirements", "system"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:00,497 - services.external_task_worker - INFO - Successfully completed task 47b16147-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:05,544 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:05,544 - services.external_task_worker - INFO - Executing task 4a867961-88f4-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:32:05,544 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924325.1979635}'}
2025-09-03 14:32:05,552 - services.external_task_worker - INFO - Successfully completed task 4a867961-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:05,561 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:05,561 - services.external_task_worker - INFO - Executing task 4ab885fc-88f4-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:32:05,561 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924325.1979635}', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924325.1979635}, "processing_timestamp": 1756924325.5448527}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:05,563 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:32:05,610 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:32:05,614 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:32:05,615 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:32:05,631 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:32:05,632 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:32:05,632 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:32:05,632 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:32:06,563 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:32:06,573 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:32:06,579 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:32:06,580 - services.qdrant_service - INFO - Found 1 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:32:06,580 - services.qdrant_service - INFO - Found 1 similar chunks for query: 'What is the required position accuracy?...'
2025-09-03 14:32:06,594 - services.external_task_worker - INFO - Successfully completed task 4ab885fc-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:06,598 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:06,598 - services.external_task_worker - INFO - Executing task 4b578530-88f4-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:32:06,599 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924325.1979635}', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924325.1979635}, "processing_timestamp": 1756924325.5448527}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:06,605 - services.external_task_worker - INFO - Successfully completed task 4b578530-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:06,612 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:06,612 - services.external_task_worker - INFO - Executing task 4b5932f7-88f4-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:32:06,612 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924325.1979635}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924325.1979635}, "processing_timestamp": 1756924325.5448527}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:06,618 - services.external_task_worker - INFO - Successfully completed task 4b5932f7-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:06,627 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:06,627 - services.external_task_worker - INFO - Executing task 4b5b2edc-88f4-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:32:06,627 - services.external_task_worker - INFO - Task variables: {'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924325.1979635}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924325.1979635}, "processing_timestamp": 1756924325.5448527}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:06,635 - services.external_task_worker - INFO - Successfully completed task 4b5b2edc-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:06,643 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:06,644 - services.external_task_worker - INFO - Executing task 4b5d9fef-88f4-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:32:06,644 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924325.1979635}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924325.1979635}, "processing_timestamp": 1756924325.5448527}', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:06,650 - services.external_task_worker - INFO - Successfully completed task 4b5d9fef-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:06,658 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:06,658 - services.external_task_worker - INFO - Executing task 4b601100-88f4-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:32:06,658 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924325.1979635}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924325.1979635}, "processing_timestamp": 1756924325.5448527}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:06,667 - services.external_task_worker - INFO - Successfully completed task 4b601100-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:06,678 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:06,679 - services.external_task_worker - INFO - Executing task 4b628216-88f4-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:32:06,679 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nUser Question: What is the required position accuracy?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What is the required position accuracy?', 'context_quality_score': 0.6692845, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924325.1979635}', 'reranked_context': '[{"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "content": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_document": "Navigation System Requirements", "similarity_score": 0.6692845, "chunk_metadata": {"chunk_id": "6f88a8f5-1ed3-499f-9aab-38993d99dc03", "asset_id": "c05be765-d4f8-400d-af95-35910093f811", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 33, "text": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "content_preview": "### 2.2 Accuracy\\n- Position accuracy: 3 meters CEP (Circular Error Probable)\\n- Heading accuracy: \\u00b12 degrees\\n- Speed accuracy: \\u00b10.1 m/s", "source_asset": "Navigation System Requirements", "document_type": "requirements"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Navigation System Requirements\n', 'processed_query': '{"original_query": "What is the required position accuracy?", "cleaned_query": "What is the required position accuracy?", "key_terms": ["what", "required", "position", "accuracy"], "question_intent": ["what"], "query_type": "definition", "domain_terms": [], "word_count": 6, "char_count": 39, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924325.1979635}, "processing_timestamp": 1756924325.5448527}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.2 Accuracy\n- Position accuracy: 3 meters CEP (Circular Error Probable)\n- Heading accuracy: 2 degrees\n- Speed accuracy: 0.1 m/s\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "required", "position", "accuracy"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:06,707 - services.external_task_worker - INFO - Successfully completed task 4b628216-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:16,791 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:16,791 - services.external_task_worker - INFO - Executing task 50f88ff0-88f4-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:32:16,791 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924336.012671}'}
2025-09-03 14:32:16,799 - services.external_task_worker - INFO - Successfully completed task 50f88ff0-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:16,808 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:16,808 - services.external_task_worker - INFO - Executing task 516cae9b-88f4-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:32:16,808 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924336.012671}', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924336.012671}, "processing_timestamp": 1756924336.7916093}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:16,811 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:32:16,856 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:32:16,862 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:32:16,862 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:32:16,880 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:32:16,880 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:32:16,880 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:32:16,880 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:32:17,774 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:32:17,783 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:32:17,790 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:32:17,791 - services.qdrant_service - INFO - Found 5 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:32:17,791 - services.qdrant_service - INFO - Found 5 similar chunks for query: 'What safety procedures should be followed?...'
2025-09-03 14:32:17,835 - services.external_task_worker - INFO - Successfully completed task 516cae9b-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:17,843 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:17,844 - services.external_task_worker - INFO - Executing task 520a9c5f-88f4-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:32:17,844 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924336.012671}', 'retrieved_chunks': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924336.012671}, "processing_timestamp": 1756924336.7916093}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:17,852 - services.external_task_worker - INFO - Successfully completed task 520a9c5f-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:17,861 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:17,862 - services.external_task_worker - INFO - Executing task 520d5a96-88f4-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:32:17,862 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924336.012671}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924336.012671}, "processing_timestamp": 1756924336.7916093}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:17,870 - services.external_task_worker - INFO - Successfully completed task 520d5a96-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:17,879 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:17,880 - services.external_task_worker - INFO - Executing task 520ff2bb-88f4-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:32:17,880 - services.external_task_worker - INFO - Task variables: {'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924336.012671}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924336.012671}, "processing_timestamp": 1756924336.7916093}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:17,891 - services.external_task_worker - INFO - Successfully completed task 520ff2bb-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:17,898 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:17,899 - services.external_task_worker - INFO - Executing task 5212d8fe-88f4-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:32:17,899 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nUser Question: What safety procedures should be followed?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924336.012671}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924336.012671}, "processing_timestamp": 1756924336.7916093}', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:17,910 - services.external_task_worker - INFO - Successfully completed task 5212d8fe-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:17,918 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:17,918 - services.external_task_worker - INFO - Executing task 5215bf3f-88f4-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:32:17,919 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nUser Question: What safety procedures should be followed?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924336.012671}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924336.012671}, "processing_timestamp": 1756924336.7916093}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:17,930 - services.external_task_worker - INFO - Successfully completed task 5215bf3f-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:17,939 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:17,939 - services.external_task_worker - INFO - Executing task 5218f3a5-88f4-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:32:17,940 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nUser Question: What safety procedures should be followed?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What safety procedures should be followed?', 'context_quality_score': 0.43762456, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924336.012671}', 'reranked_context': '[{"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "content": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "source_document": "Safety Protocols", "similarity_score": 0.45991945, "chunk_metadata": {"chunk_id": "05087351-5cd1-4d1d-a711-96de15580877", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 4, "token_count": 51, "text": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimum 100m)", "content_preview": "### 2.1 Normal Operations\\n- Maintain continuous monitoring of all systems\\n- Report position updates every 15 minutes\\n- Monitor fuel/power consumption rates\\n- Maintain safe separation distances (minimu...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "content": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "source_document": "Safety Protocols", "similarity_score": 0.45425004, "chunk_metadata": {"chunk_id": "f7aea19c-4627-4849-bdea-f5668600f5fb", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 10, "token_count": 98, "text": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | Medium     | Major   | Action required within 24 hours |\\n| Medium     | Low        | Moderate| Action required within 1 week |\\n| Low        | Very Low   | Minor   | Monitor and review monthly |", "content_preview": "| Risk Level | Probability | Impact | Mitigation Required |\\n|------------|-------------|---------|-------------------|\\n| Critical   | High       | Severe  | Immediate action required |\\n| High       | ...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "content": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "source_document": "Safety Protocols", "similarity_score": 0.4409764, "chunk_metadata": {"chunk_id": "71331fe0-4b92-4e47-90a0-a7708353982d", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 8, "token_count": 65, "text": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance completion\\n- Document all maintenance activities in system logs", "content_preview": "### 3.1 Routine Maintenance\\n- All maintenance SHALL be performed by certified personnel only\\n- Use proper lockout/tagout procedures during maintenance\\n- Verify all safety systems after maintenance com...", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "content": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_document": "Safety Protocols", "similarity_score": 0.43016434, "chunk_metadata": {"chunk_id": "c94c027a-f2f4-466b-b6d0-ebfce4d8aca0", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "text", "sequence_number": 1, "token_count": 43, "text": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "content_preview": "2. **Navigation Equipment Check**\\n   - Confirm GPS signal lock (minimum 4 satellites)\\n   - Verify compass calibration within \\u00b11 degree\\n   - Test emergency beacon functionality", "source_asset": "Safety Protocols", "document_type": "safety"}}, {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "content": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "source_document": "Safety Protocols", "similarity_score": 0.40281257, "chunk_metadata": {"chunk_id": "8109c50e-4c68-4f27-923f-c5546af37834", "asset_id": "8438ceab-ff31-407d-8de0-fd9abffcb723", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 3, "token_count": 55, "text": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones and restricted areas", "content_preview": "### 1.2 Environmental Assessment\\n- Check weather conditions and forecasts\\n- Assess visibility conditions (minimum 500m required)\\n- Verify operational area is clear of obstacles\\n- Confirm no-fly zones ...", "source_asset": "Safety Protocols", "document_type": "safety"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Safety Protocols\n[2] Safety Protocols\n[3] Safety Protocols\n', 'processed_query': '{"original_query": "What safety procedures should be followed?", "cleaned_query": "What safety procedures should be followed?", "key_terms": ["what", "safety", "procedures", "followed"], "question_intent": ["what"], "query_type": "question", "domain_terms": ["should"], "word_count": 6, "char_count": 42, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924336.012671}, "processing_timestamp": 1756924336.7916093}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 2.1 Normal Operations\n- Maintain continuous monitoring of all systems\n- Report position updates every 15 minutes\n- Monitor fuel/power consumption rates\n- Maintain safe separation distances (minimum 100m)\n[Context 2]: | Risk Level | Probability | Impact | Mitigation Required |\n|------------|-------------|---------|-------------------|\n| Critical   | High       | Severe  | Immediate action required |\n| High       | Medium     | Major   | Action required within 24 hours |\n| Medium     | Low        | Moderate| Action required within 1 week |\n| Low        | Very Low   | Minor   | Monitor and review monthly |\n[Context 3]: ### 3.1 Routine Maintenance\n- All maintenance SHALL be performed by certified personnel only\n- Use proper lockout/tagout procedures during maintenance\n- Verify all safety systems after maintenance completion\n- Document all maintenance activities in system logs\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "safety", "procedures", "followed"], "secondary_terms": [], "search_boost_terms": ["should"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:17,956 - services.external_task_worker - INFO - Successfully completed task 5218f3a5-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:21,996 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:21,997 - services.external_task_worker - INFO - Executing task 544570af-88f4-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:32:21,997 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924341.5489018}'}
2025-09-03 14:32:22,005 - services.external_task_worker - INFO - Successfully completed task 544570af-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:22,013 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:22,013 - services.external_task_worker - INFO - Executing task 5486e69a-88f4-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:32:22,013 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924341.5489018}', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924341.5489018}, "processing_timestamp": 1756924341.997272}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:22,016 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:32:22,065 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:32:22,070 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:32:22,071 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:32:22,087 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:32:22,088 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:32:22,088 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:32:22,088 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:32:23,012 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:32:23,020 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:32:23,028 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:32:23,029 - services.qdrant_service - INFO - Found 2 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:32:23,029 - services.qdrant_service - INFO - Found 2 similar chunks for query: 'For Hardware Components what is our memory require...'
2025-09-03 14:32:23,052 - services.external_task_worker - INFO - Successfully completed task 5486e69a-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:23,061 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:23,061 - services.external_task_worker - INFO - Executing task 5526d02e-88f4-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:32:23,061 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924341.5489018}', 'retrieved_chunks': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924341.5489018}, "processing_timestamp": 1756924341.997272}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:23,068 - services.external_task_worker - INFO - Successfully completed task 5526d02e-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:23,077 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:23,077 - services.external_task_worker - INFO - Executing task 55294145-88f4-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:32:23,077 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924341.5489018}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924341.5489018}, "processing_timestamp": 1756924341.997272}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:23,085 - services.external_task_worker - INFO - Successfully completed task 55294145-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:23,095 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:23,095 - services.external_task_worker - INFO - Executing task 552bd96a-88f4-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:32:23,095 - services.external_task_worker - INFO - Task variables: {'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924341.5489018}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924341.5489018}, "processing_timestamp": 1756924341.997272}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:23,108 - services.external_task_worker - INFO - Successfully completed task 552bd96a-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:23,116 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:23,116 - services.external_task_worker - INFO - Executing task 552f0dcd-88f4-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:32:23,116 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': 'You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn\'t contain enough information to fully answer the question, acknowledge this and provide what information you can.', 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924341.5489018}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924341.5489018}, "processing_timestamp": 1756924341.997272}', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:23,125 - services.external_task_worker - INFO - Successfully completed task 552f0dcd-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:23,133 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:23,133 - services.external_task_worker - INFO - Executing task 5531a5ee-88f4-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:32:23,133 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': 'You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn\'t contain enough information to fully answer the question, acknowledge this and provide what information you can.', 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924341.5489018}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924341.5489018}, "processing_timestamp": 1756924341.997272}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:23,144 - services.external_task_worker - INFO - Successfully completed task 5531a5ee-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:23,151 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:23,151 - services.external_task_worker - INFO - Executing task 55346424-88f4-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:32:23,151 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': 'You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nUser Question: For Hardware Components what is our memory requirements\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn\'t contain enough information to fully answer the question, acknowledge this and provide what information you can.', 'user_query': 'For Hardware Components what is our memory requirements', 'context_quality_score': 0.517338085, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924341.5489018}', 'reranked_context': '[{"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "content": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "source_document": "Technical Specifications", "similarity_score": 0.54837537, "chunk_metadata": {"chunk_id": "2e016433-7dad-45f6-8a50-10ec1c6e92f0", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 0, "token_count": 70, "text": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchscreen\\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)", "content_preview": "### 1.1 Hardware Components\\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\\n- **Display**: 15.6\\" 1920x1080 sunlight-readable LCD touchs...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "content": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "source_document": "Technical Specifications", "similarity_score": 0.4863008, "chunk_metadata": {"chunk_id": "a6be81b6-b407-4314-ba28-5e32cb2f1590", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 6, "token_count": 74, "text": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications", "content_preview": "### 3.1 Processing Performance\\n- **CPU Utilization**: Maximum 80% under normal load\\n- **Memory Usage**: Maximum 12 GB under normal operations\\n- **Storage I/O**: Minimum 500 MB/s sequential read/write ...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Technical Specifications\n[2] Technical Specifications\n', 'processed_query': '{"original_query": "For Hardware Components what is our memory requirements", "cleaned_query": "For Hardware Components what is our memory requirements", "key_terms": ["hardware", "components", "what", "our", "memory", "requirements"], "question_intent": ["what"], "query_type": "definition", "domain_terms": ["requirements"], "word_count": 8, "char_count": 55, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924341.5489018}, "processing_timestamp": 1756924341.997272}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.1 Hardware Components\n- **Primary Processor**: ARM Cortex-A78 quad-core, 2.5 GHz\n- **Memory**: 16 GB DDR4 RAM, 512 GB NVMe SSD storage\n- **Display**: 15.6" 1920x1080 sunlight-readable LCD touchscreen\n- **GPS Receiver**: Multi-constellation GNSS (GPS, GLONASS, Galileo, BeiDou)\n[Context 2]: ### 3.1 Processing Performance\n- **CPU Utilization**: Maximum 80% under normal load\n- **Memory Usage**: Maximum 12 GB under normal operations\n- **Storage I/O**: Minimum 500 MB/s sequential read/write performance\n- **Network Throughput**: Minimum 10 Mbps data rate for mission-critical applications\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["hardware", "components", "what", "our", "memory"], "secondary_terms": ["requirements"], "search_boost_terms": ["requirements"], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:23,165 - services.external_task_worker - INFO - Successfully completed task 55346424-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:28,210 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:28,210 - services.external_task_worker - INFO - Executing task 57f8db6e-88f4-11f0-bc34-0242ac160003 for topic process-user-query
2025-09-03 14:32:28,211 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924347.758485}'}
2025-09-03 14:32:28,218 - services.external_task_worker - INFO - Successfully completed task 57f8db6e-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:28,226 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:28,226 - services.external_task_worker - INFO - Executing task 583b14a9-88f4-11f0-bc34-0242ac160003 for topic retrieve-context
2025-09-03 14:32:28,226 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924347.758485}', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924347.758485}, "processing_timestamp": 1756924348.2111547}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:28,228 - services.qdrant_service - INFO - Connecting to Qdrant at http://localhost:6333
2025-09-03 14:32:28,275 - httpx - INFO - HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"
2025-09-03 14:32:28,280 - httpx - INFO - HTTP Request: GET http://localhost:6333/collections "HTTP/1.1 200 OK"
2025-09-03 14:32:28,280 - services.qdrant_service - INFO - Qdrant connection established successfully
2025-09-03 14:32:28,297 - services.embedding_service - INFO - Embedding service initialized
2025-09-03 14:32:28,297 - services.embedding_service - INFO - Loading SentenceTransformer model: all-MiniLM-L6-v2
2025-09-03 14:32:28,298 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-09-03 14:32:28,298 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-03 14:32:29,331 - services.embedding_service - INFO - Successfully loaded model: all-MiniLM-L6-v2
2025-09-03 14:32:29,341 - services.embedding_service - INFO - Generated 1 embeddings using model 'all-MiniLM-L6-v2'
2025-09-03 14:32:29,348 - httpx - INFO - HTTP Request: POST http://localhost:6333/collections/knowledge_chunks/points/search "HTTP/1.1 200 OK"
2025-09-03 14:32:29,349 - services.qdrant_service - INFO - Found 2 results in collection 'knowledge_chunks' with threshold 0.4
2025-09-03 14:32:29,349 - services.qdrant_service - INFO - Found 2 similar chunks for query: 'What frequency does the Communication Interfaces o...'
2025-09-03 14:32:29,370 - services.external_task_worker - INFO - Successfully completed task 583b14a9-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:29,377 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:29,377 - services.external_task_worker - INFO - Executing task 58eadcbd-88f4-11f0-bc34-0242ac160003 for topic rerank-context
2025-09-03 14:32:29,377 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924347.758485}', 'retrieved_chunks': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924347.758485}, "processing_timestamp": 1756924348.2111547}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:29,384 - services.external_task_worker - INFO - Successfully completed task 58eadcbd-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:29,392 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:29,392 - services.external_task_worker - INFO - Executing task 58ecffb4-88f4-11f0-bc34-0242ac160003 for topic fallback-search
2025-09-03 14:32:29,393 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924347.758485}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924347.758485}, "processing_timestamp": 1756924348.2111547}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:29,399 - services.external_task_worker - INFO - Successfully completed task 58ecffb4-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:29,407 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:29,407 - services.external_task_worker - INFO - Executing task 58ef49b9-88f4-11f0-bc34-0242ac160003 for topic construct-prompt
2025-09-03 14:32:29,407 - services.external_task_worker - INFO - Task variables: {'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924347.758485}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924347.758485}, "processing_timestamp": 1756924348.2111547}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:29,415 - services.external_task_worker - INFO - Successfully completed task 58ef49b9-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:29,425 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:29,425 - services.external_task_worker - INFO - Executing task 58f1bacc-88f4-11f0-bc34-0242ac160003 for topic llm-generation
2025-09-03 14:32:29,425 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nUser Question: What frequency does the Communication Interfaces operate at?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924347.758485}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924347.758485}, "processing_timestamp": 1756924348.2111547}', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:29,433 - services.external_task_worker - INFO - Successfully completed task 58f1bacc-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:29,440 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:29,441 - services.external_task_worker - INFO - Executing task 58f479fd-88f4-11f0-bc34-0242ac160003 for topic process-response
2025-09-03 14:32:29,441 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nUser Question: What frequency does the Communication Interfaces operate at?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924347.758485}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924347.758485}, "processing_timestamp": 1756924348.2111547}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:29,450 - services.external_task_worker - INFO - Successfully completed task 58f479fd-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:29,458 - services.external_task_worker - INFO - Received 1 tasks
2025-09-03 14:32:29,458 - services.external_task_worker - INFO - Executing task 58f6eb13-88f4-11f0-bc34-0242ac160003 for topic log-interaction
2025-09-03 14:32:29,458 - services.external_task_worker - INFO - Task variables: {'augmented_prompt': "You are a helpful assistant answering questions based on provided context.\n\nContext:\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nUser Question: What frequency does the Communication Interfaces operate at?\n\nPlease provide a comprehensive answer based on the context provided. If the context doesn't contain enough information to fully answer the question, acknowledge this and provide what information you can.", 'user_query': 'What frequency does the Communication Interfaces operate at?', 'context_quality_score': 0.48697409999999997, 'query_metadata': '{"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924347.758485}', 'reranked_context': '[{"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "content": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "source_document": "Technical Specifications", "similarity_score": 0.5399632, "chunk_metadata": {"chunk_id": "a5b32041-e552-4e96-b3b4-3dec69c325ae", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 1, "token_count": 77, "text": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface", "content_preview": "### 1.2 Communication Interfaces\\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\\n- **Data Link**: 4G LTE cellular modem with failover to satellite\\n- **Local Connectivity**: Wi-Fi...", "source_asset": "Technical Specifications", "document_type": "specifications"}}, {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "content": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "source_document": "Technical Specifications", "similarity_score": 0.433985, "chunk_metadata": {"chunk_id": "8b062bc4-53c7-4e85-85ec-b46677359d25", "asset_id": "263d04d5-d3ee-41de-936a-ceb77078d279", "project_id": "8e929f77-e7d0-48ad-9da3-6a4e392c49f3", "chunk_type": "title", "sequence_number": 7, "token_count": 76, "text": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum 100ms for user interface interactions\\n- **Emergency Response**: Maximum 50ms for safety-critical alerts", "content_preview": "### 3.2 Real-time Requirements\\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\\n- **Command Response Time**: Maximum...", "source_asset": "Technical Specifications", "document_type": "specifications"}}]', 'retrieved_chunks': '[{"chunk_id": "fallback_expanded_1", "content": "Expanded search result providing broader context for the user query.", "similarity_score": 0.65, "source_document": "expanded_search.txt"}]', 'final_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nThis response is based on the relevant documentation found in your knowledge assets.\n\nSources:\n[1] Technical Specifications\n[2] Technical Specifications\n', 'processed_query': '{"original_query": "What frequency does the Communication Interfaces operate at?", "cleaned_query": "What frequency does the Communication Interfaces operate at?", "key_terms": ["what", "frequency", "communication", "interfaces", "operate"], "question_intent": ["what"], "query_type": "question", "domain_terms": [], "word_count": 8, "char_count": 60, "query_metadata": {"user_id": "api_user", "username": "api_user", "max_results": 5, "similarity_threshold": 0.3, "timestamp": 1756924347.758485}, "processing_timestamp": 1756924348.2111547}', 'llm_response': 'Based on the information retrieved from the knowledge base:\n\n[Context 1]: ### 1.2 Communication Interfaces\n- **Radio**: VHF/UHF dual-band transceiver, 136-174 MHz / 400-520 MHz\n- **Data Link**: 4G LTE cellular modem with failover to satellite\n- **Local Connectivity**: Wi-Fi 802.11ac, Bluetooth 5.2, Ethernet 1000BASE-T\n- **Serial Interfaces**: 4x RS-232, 2x RS-485, CAN bus interface\n[Context 2]: ### 3.2 Real-time Requirements\n- **Position Update Rate**: 10 Hz minimum, 50 Hz preferred\n- **Sensor Data Processing**: Maximum 20ms latency from sensor to display\n- **Command Response Time**: Maximum 100ms for user interface interactions\n- **Emergency Response**: Maximum 50ms for safety-critical alerts\n\nThis response is based on the relevant documentation found in your knowledge assets.', 'search_parameters': '{"primary_terms": ["what", "frequency", "communication", "interfaces", "operate"], "secondary_terms": [], "search_boost_terms": [], "semantic_search_weight": 0.7, "keyword_search_weight": 0.3, "min_similarity_threshold": 0.6, "max_results": 20, "rerank_top_k": 10}'}
2025-09-03 14:32:29,475 - services.external_task_worker - INFO - Successfully completed task 58f6eb13-88f4-11f0-bc34-0242ac160003
2025-09-03 14:32:29,823 - __main__ - INFO - Received signal 15, shutting down worker...
