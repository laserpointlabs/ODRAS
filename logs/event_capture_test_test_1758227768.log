[16:36:08] INFO: 🚀 Starting complete event capture pipeline test...
[16:36:08] INFO:    Test Session: test_1758227768
[16:36:08] INFO:    Log File: logs/event_capture_test_test_1758227768.log
[16:36:08] INFO: ✅ Authentication successful
[16:36:08] INFO: 🧪 TEST 1: Creating project and verifying project thread...
[16:36:09] INFO: ✅ Project created: dad92524-1de5-4789-b28f-85369ccdc159
[16:36:09] INFO:    Name: Event Pipeline Test test_1758227768
[16:36:11] INFO: 🔍 Querying Qdrant for project thread with project_id: dad92524-1de5-4789-b28f-85369ccdc159
[16:36:11] INFO: 🔍 Qdrant response status: 200
[16:36:11] INFO: 🔍 Found 1 project threads for project dad92524-1de5-4789-b28f-85369ccdc159
[16:36:11] INFO: 🔍 Using most recent project thread: c1d52c9d-84b3-4111-82ba-8acc8105089a
[16:36:11] INFO: 🔍 Last activity: 2025-09-18T16:36:09.319622
[16:36:11] INFO: ✅ Project thread created: c1d52c9d-84b3-4111-82ba-8acc8105089a
[16:36:11] INFO: 🔍 Verifying event: project_creation
[16:36:11] INFO: 🔍 Querying Qdrant for project thread with project_id: dad92524-1de5-4789-b28f-85369ccdc159
[16:36:11] INFO: 🔍 Qdrant response status: 200
[16:36:11] INFO: 🔍 Found 1 project threads for project dad92524-1de5-4789-b28f-85369ccdc159
[16:36:11] INFO: 🔍 Using most recent project thread: c1d52c9d-84b3-4111-82ba-8acc8105089a
[16:36:11] INFO: 🔍 Last activity: 2025-09-18T16:36:09.319622
[16:36:11] INFO: ✅ PASS: project_creation event found: project_created
[16:36:11] INFO: 🧪 TEST 2: Creating ontology and verifying capture...
[16:36:12] INFO: ✅ Ontology created successfully
[16:36:12] INFO:    Backup ID: 1199711e-f09f-46a2-a806-b89b010a3c59
[16:36:12] INFO:    Triples: 3
[16:36:14] INFO: 🔍 Verifying event: ontology_creation
[16:36:14] INFO: 🔍 Querying Qdrant for project thread with project_id: dad92524-1de5-4789-b28f-85369ccdc159
[16:36:14] INFO: 🔍 Qdrant response status: 200
[16:36:14] INFO: 🔍 Found 1 project threads for project dad92524-1de5-4789-b28f-85369ccdc159
[16:36:14] INFO: 🔍 Using most recent project thread: c1d52c9d-84b3-4111-82ba-8acc8105089a
[16:36:14] INFO: 🔍 Last activity: 2025-09-18T16:36:11.875102
[16:36:14] INFO: ✅ PASS: ontology_creation event found: Created new ontology: default
[16:36:14] INFO: 🧪 TEST 3: Performing semantic operations...
[16:36:14] INFO: ✅ Classes created: TestClass1, TestClass2
[16:36:15] INFO: ✅ Added: relationship 'relatedTo', data property 'testName', renamed TestClass1
[16:36:17] INFO: 🔍 Querying Qdrant for project thread with project_id: dad92524-1de5-4789-b28f-85369ccdc159
[16:36:17] INFO: 🔍 Qdrant response status: 200
[16:36:17] INFO: 🔍 Found 1 project threads for project dad92524-1de5-4789-b28f-85369ccdc159
[16:36:17] INFO: 🔍 Using most recent project thread: c1d52c9d-84b3-4111-82ba-8acc8105089a
[16:36:17] INFO: 🔍 Last activity: 2025-09-18T16:36:15.780591
[16:36:17] INFO: ✅ Captured 3 semantic ontology events
[16:36:17] INFO:    - Created new ontology: default
[16:36:17] INFO:    - Updated ontology with semantic changes
[16:36:17] INFO:    - Updated ontology with semantic changes
[16:36:17] INFO: 🧪 TEST 3.5: Uploading knowledge files...
[16:36:17] INFO: 📁 Uploading data/decision_matrix_template.md...
[16:36:18] INFO: ✅ Uploaded decision_matrix_template.md
[16:36:18] INFO:    File ID: f12888c0-d178-434f-9837-07699b625673
[16:36:18] INFO:    Knowledge Asset ID: 20f4ca74-94cf-11f0-ba07-0242ac140002
[16:36:18] INFO:    Message: File uploaded and BPMN knowledge processing started (workflow: 20f4ca74-94cf-11f0-ba07-0242ac140002)
[16:36:18] INFO:    Process Instance: 20f4ca74-94cf-11f0-ba07-0242ac140002
[16:36:19] INFO: 📁 Uploading data/disaster_response_requirements.md...
[16:36:19] INFO: ✅ Uploaded disaster_response_requirements.md
[16:36:19] INFO:    File ID: 881969f2-d60e-45e3-ac05-6c9ff1c1305f
[16:36:19] INFO:    Knowledge Asset ID: 21d95e28-94cf-11f0-ba07-0242ac140002
[16:36:19] INFO:    Message: File uploaded and BPMN knowledge processing started (workflow: 21d95e28-94cf-11f0-ba07-0242ac140002)
[16:36:19] INFO:    Process Instance: 21d95e28-94cf-11f0-ba07-0242ac140002
[16:36:20] INFO: 📁 Uploading data/uas_specifications.md...
[16:36:21] INFO: ✅ Uploaded uas_specifications.md
[16:36:21] INFO:    File ID: f048fbd7-2190-4d50-a6f8-959873ddaebe
[16:36:21] INFO:    Knowledge Asset ID: 22cb113c-94cf-11f0-ba07-0242ac140002
[16:36:21] INFO:    Message: File uploaded and BPMN knowledge processing started (workflow: 22cb113c-94cf-11f0-ba07-0242ac140002)
[16:36:21] INFO:    Process Instance: 22cb113c-94cf-11f0-ba07-0242ac140002
[16:36:22] INFO: ⏳ Monitoring Camunda knowledge processing workflows...
[16:36:22] INFO: 🔍 Checking for existing processes before starting monitoring...
[16:36:25] INFO: ⏳ Waiting for knowledge processing to complete...
[16:36:25] INFO: ⏳ 3 processes still active (elapsed: 0s)
[16:36:30] INFO: ⏳ 3 processes still active (elapsed: 5s)
[16:36:35] INFO: ⏳ 3 processes still active (elapsed: 10s)
[16:36:40] INFO: ⏳ 3 processes still active (elapsed: 15s)
[16:36:45] INFO: ⏳ 3 processes still active (elapsed: 20s)
[16:36:50] INFO: ⏳ 2 processes still active (elapsed: 25s)
[16:36:55] INFO: ⏳ 2 processes still active (elapsed: 30s)
[16:37:00] INFO: ⏳ 2 processes still active (elapsed: 35s)
[16:37:05] INFO: ⏳ 2 processes still active (elapsed: 40s)
[16:37:10] INFO: ⏳ 2 processes still active (elapsed: 45s)
[16:37:15] INFO: ⏳ 2 processes still active (elapsed: 50s)
[16:37:20] INFO: ⏳ 1 processes still active (elapsed: 55s)
[16:37:25] INFO: ⏳ 1 processes still active (elapsed: 60s)
[16:37:30] INFO: ⏳ 1 processes still active (elapsed: 65s)
[16:37:35] INFO: ⏳ 1 processes still active (elapsed: 70s)
[16:37:45] ERROR: ❌ Error monitoring: HTTPConnectionPool(host='localhost', port=8080): Max retries exceeded with url: /engine-rest/process-instance?processDefinitionKey=automatic_knowledge_processing (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x7f0c733e58c0>, 'Connection to localhost timed out. (connect timeout=5)'))
[16:37:45] ERROR: ❌ Knowledge processing failed or timed out
[16:37:45] WARNING: ⚠️  Knowledge file upload had issues, but continuing with DAS testing...
[16:37:45] INFO: 🧪 TEST 5: Testing DAS integration with complete project context...
[16:37:45] INFO: 🤖 Question 1/7: What is this project name and id?
[16:37:46] INFO: ⚠️  DAS Response (high): Generic response - I couldn't find any relevant information in the knowledge base to answer your qu...
[16:37:48] INFO: 🤖 Question 2/7: What ontologies does this project have?
[16:37:48] INFO: ⚠️  DAS Response (high): Generic response - I couldn't find any relevant information in the knowledge base to answer your qu...
[16:37:50] INFO: 🤖 Question 3/7: Can you tell me what classes we have in our ontologies?
[16:37:51] INFO: ⚠️  DAS Response (low): Generic response - I couldn't find any relevant information in the knowledge base to answer your qu...
[16:37:53] INFO: 🤖 Question 4/7: What files are in this project?
[16:37:53] INFO: ⚠️  DAS Response (high): Generic response - I couldn't find any relevant information in the knowledge base to answer your qu...
[16:37:55] INFO: 🤖 Question 5/7: What are the specifications of the QuadCopter T4?
[16:37:56] INFO: ⚠️  DAS Response (low): Generic response - I couldn't find any relevant information in the knowledge base to answer your qu...
[16:37:58] INFO: 🤖 Question 6/7: Tell me about the TriVector VTOL platform
[16:37:58] INFO: ⚠️  DAS Response (low): Generic response - I couldn't find any relevant information in the knowledge base to answer your qu...
[16:38:00] INFO: 🤖 Question 7/7: What did I just ask?
[16:38:02] INFO: ✅ DAS Response (high): Specific answer - You just asked: "Tell me about the TriVector VTOL platform"...
[16:38:04] INFO: 📊 DAS Performance Summary:
[16:38:04] INFO:    Specific answers: 1/7
[16:38:04] INFO:    Generic answers: 6/7
[16:38:04] INFO:    Failed answers: 0/7
[16:38:04] INFO: 🔍 Checking for DAS routing failures...
[16:38:04] INFO: ⚠️  Note: Check /tmp/odras_app.log for 'DAS routing FAILED' messages
[16:38:04] INFO: ⚠️  Routing failures indicate events are captured but not reaching project threads
[16:38:04] INFO: 📋 PROJECT THREAD SUMMARY (Real Qdrant Data):
[16:38:04] INFO: 🔍 Querying Qdrant for project thread with project_id: dad92524-1de5-4789-b28f-85369ccdc159
[16:38:04] INFO: 🔍 Qdrant response status: 200
[16:38:04] INFO: 🔍 Found 1 project threads for project dad92524-1de5-4789-b28f-85369ccdc159
[16:38:04] INFO: 🔍 Using most recent project thread: c1d52c9d-84b3-4111-82ba-8acc8105089a
[16:38:04] INFO: 🔍 Last activity: 2025-09-18T16:38:00.954027
[16:38:04] INFO:    Project ID: dad92524-1de5-4789-b28f-85369ccdc159
[16:38:04] INFO:    Thread ID: c1d52c9d-84b3-4111-82ba-8acc8105089a
[16:38:04] INFO:    Created: 2025-09-18T16:36:09.106276
[16:38:04] INFO:    Last Activity: 2025-09-18T16:38:00.954027
[16:38:04] INFO:    Total Events in Qdrant: 11
[16:38:04] INFO:    Event breakdown: {'das_command': 2, 'ontology_modified': 3, 'das_question': 6}
[16:38:04] INFO:    Event 1: [das_command] project_thread_created @ 2025-09-18T16:36:09.224190
[16:38:04] INFO:    Event 2: [das_command] project_created @ 2025-09-18T16:36:09.319622
[16:38:04] INFO:    Event 3: [ontology_modified] Created new ontology: default @ 2025-09-18T16:36:11.875102
[16:38:04] INFO:    Event 4: [ontology_modified] Updated ontology with semantic changes @ 2025-09-18T16:36:14.386673
[16:38:04] INFO:    Event 5: [ontology_modified] Updated ontology with semantic changes @ 2025-09-18T16:36:15.780591
[16:38:04] INFO:    Event 6: [das_question] unknown @ 2025-09-18T16:37:46.035094
[16:38:04] INFO:    Event 7: [das_question] unknown @ 2025-09-18T16:37:48.551618
[16:38:04] INFO:    Event 8: [das_question] unknown @ 2025-09-18T16:37:51.076355
[16:38:04] INFO:    Event 9: [das_question] unknown @ 2025-09-18T16:37:53.619425
[16:38:04] INFO:    Event 10: [das_question] unknown @ 2025-09-18T16:37:56.124327
[16:38:04] INFO:    Event 11: [das_question] unknown @ 2025-09-18T16:37:58.722656
[16:38:04] INFO:    Expected events found: ['project_thread_created', 'project_created', 'ontology', 'ontology', 'ontology']
[16:38:04] INFO: 🎉 ALL TESTS PASSED! Event capture pipeline is working correctly.
[16:38:04] INFO: 📊 FINAL RESULTS:
[16:38:04] INFO:    Project ID: dad92524-1de5-4789-b28f-85369ccdc159
[16:38:04] INFO:    Project Thread ID: c1d52c9d-84b3-4111-82ba-8acc8105089a
[16:38:04] INFO:    Log File: logs/event_capture_test_test_1758227768.log
