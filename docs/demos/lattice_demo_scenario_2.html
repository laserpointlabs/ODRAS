<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ODRAS Project Lattice Visualization</title>
    <script src="https://unpkg.com/cytoscape@3.28.1/dist/cytoscape.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0b1220;
            color: #e2e8f0;
        }
        #cy {
            width: 100vw;
            height: 100vh;
            background: #0b1220;
        }
        .info-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 16px;
            max-width: 300px;
            z-index: 1000;
        }
        .info-panel h3 {
            margin: 0 0 12px 0;
            color: #60a5fa;
        }
        .legend {
            display: flex;
            flex-direction: column;
            gap: 8px;
            font-size: 12px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 1px solid #334155;
        }
    </style>
</head>
<body>
    <div class="info-panel">
        <h3>Project Lattice</h3>
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: #3b82f6;"></div>
                <span>L0 Foundation</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #10b981;"></div>
                <span>L1 Strategy</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #f59e0b;"></div>
                <span>L2 Tactical</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ef4444;"></div>
                <span>L3 Implementation</span>
            </div>
            <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #334155;">
                <div style="font-size: 11px; color: #94a3b8;">
                    Solid lines: Parent-Child<br>
                    Dashed lines: Cousin/Relationship
                </div>
            </div>
        </div>
    </div>
    <div id="cy"></div>
    <script>
        const nodes = [
  {
    "data": {
      "id": "cdf79c49-6284-4dba-834d-3629b1ba0e2a",
      "label": "aircraft-cost",
      "level": 0,
      "domain": "cost",
      "type": "project"
    },
    "classes": "level-0 domain-cost"
  },
  {
    "data": {
      "id": "8d88c09b-6558-4672-9a6c-1705da01463c",
      "label": "aircraft-fea",
      "level": 3,
      "domain": "analysis",
      "type": "project"
    },
    "classes": "level-3 domain-analysis"
  },
  {
    "data": {
      "id": "9da0cd83-7196-48bd-95f5-603c09909de3",
      "label": "aircraft-loads",
      "level": 0,
      "domain": "structures",
      "type": "project"
    },
    "classes": "level-0 domain-structures"
  },
  {
    "data": {
      "id": "6b953c89-a139-424f-ac7d-811e25405b5f",
      "label": "aircraft-requirements",
      "level": 0,
      "domain": "systems-engineering",
      "type": "project"
    },
    "classes": "level-0 domain-systems_engineering"
  },
  {
    "data": {
      "id": "81de96cd-795f-4180-9db0-e533b7851816",
      "label": "aircraft-foundation",
      "level": 0,
      "domain": "foundation",
      "type": "project"
    },
    "classes": "level-0 domain-foundation"
  },
  {
    "data": {
      "id": "5684d3d8-bc89-469d-ac12-938a10443a76",
      "label": "aircraft-cost",
      "level": 0,
      "domain": "cost",
      "type": "project"
    },
    "classes": "level-0 domain-cost"
  },
  {
    "data": {
      "id": "e647327d-826b-4453-b683-c21dbab69590",
      "label": "aircraft-fea",
      "level": 3,
      "domain": "analysis",
      "type": "project"
    },
    "classes": "level-3 domain-analysis"
  },
  {
    "data": {
      "id": "046a9b27-edd1-4cd5-a6bb-a53f9e07f066",
      "label": "aircraft-loads",
      "level": 0,
      "domain": "structures",
      "type": "project"
    },
    "classes": "level-0 domain-structures"
  },
  {
    "data": {
      "id": "75ade262-a944-4f77-ba37-c4e32c010eda",
      "label": "aircraft-requirements",
      "level": 0,
      "domain": "systems-engineering",
      "type": "project"
    },
    "classes": "level-0 domain-systems_engineering"
  },
  {
    "data": {
      "id": "03d1490f-3e9e-4df4-b8a7-1d7f16f7a693",
      "label": "aircraft-foundation",
      "level": 0,
      "domain": "foundation",
      "type": "project"
    },
    "classes": "level-0 domain-foundation"
  },
  {
    "data": {
      "id": "143ce190-4809-4c3f-86d2-076014c15003",
      "label": "aircraft-cost",
      "level": 0,
      "domain": "cost",
      "type": "project"
    },
    "classes": "level-0 domain-cost"
  },
  {
    "data": {
      "id": "30eba573-1ccd-4f44-9479-bb39500d9cf8",
      "label": "aircraft-fea",
      "level": 3,
      "domain": "analysis",
      "type": "project"
    },
    "classes": "level-3 domain-analysis"
  },
  {
    "data": {
      "id": "db471f2a-e8db-4ab3-95d2-4dc2eb52ab60",
      "label": "aircraft-loads",
      "level": 0,
      "domain": "structures",
      "type": "project"
    },
    "classes": "level-0 domain-structures"
  },
  {
    "data": {
      "id": "b677b34a-fe8f-4f4a-abd1-1888a3bc4f0f",
      "label": "aircraft-requirements",
      "level": 0,
      "domain": "systems-engineering",
      "type": "project"
    },
    "classes": "level-0 domain-systems_engineering"
  },
  {
    "data": {
      "id": "0faff0ab-ff18-4e07-9361-0dfa285eba83",
      "label": "aircraft-foundation",
      "level": 0,
      "domain": "foundation",
      "type": "project"
    },
    "classes": "level-0 domain-foundation"
  }
];
        const edges = [
  {
    "data": {
      "id": "8d88c09b-6558-4672-9a6c-1705da01463c-cdf79c49-6284-4dba-834d-3629b1ba0e2a",
      "source": "8d88c09b-6558-4672-9a6c-1705da01463c",
      "target": "cdf79c49-6284-4dba-834d-3629b1ba0e2a",
      "type": "cousin"
    }
  },
  {
    "data": {
      "id": "8d88c09b-6558-4672-9a6c-1705da01463c-rel-cdf79c49-6284-4dba-834d-3629b1ba0e2a",
      "source": "8d88c09b-6558-4672-9a6c-1705da01463c",
      "target": "cdf79c49-6284-4dba-834d-3629b1ba0e2a",
      "type": "relationship",
      "relationship_type": "coordinates_with"
    }
  },
  {
    "data": {
      "id": "cdf79c49-6284-4dba-834d-3629b1ba0e2a-8d88c09b-6558-4672-9a6c-1705da01463c",
      "source": "cdf79c49-6284-4dba-834d-3629b1ba0e2a",
      "target": "8d88c09b-6558-4672-9a6c-1705da01463c",
      "type": "cousin"
    }
  },
  {
    "data": {
      "id": "cdf79c49-6284-4dba-834d-3629b1ba0e2a-rel-cdf79c49-6284-4dba-834d-3629b1ba0e2a",
      "source": "cdf79c49-6284-4dba-834d-3629b1ba0e2a",
      "target": "cdf79c49-6284-4dba-834d-3629b1ba0e2a",
      "type": "relationship",
      "relationship_type": "coordinates_with"
    }
  },
  {
    "data": {
      "id": "9da0cd83-7196-48bd-95f5-603c09909de3-8d88c09b-6558-4672-9a6c-1705da01463c",
      "source": "9da0cd83-7196-48bd-95f5-603c09909de3",
      "target": "8d88c09b-6558-4672-9a6c-1705da01463c",
      "type": "parent-child"
    }
  },
  {
    "data": {
      "id": "6b953c89-a139-424f-ac7d-811e25405b5f-9da0cd83-7196-48bd-95f5-603c09909de3",
      "source": "6b953c89-a139-424f-ac7d-811e25405b5f",
      "target": "9da0cd83-7196-48bd-95f5-603c09909de3",
      "type": "parent-child"
    }
  },
  {
    "data": {
      "id": "81de96cd-795f-4180-9db0-e533b7851816-6b953c89-a139-424f-ac7d-811e25405b5f",
      "source": "81de96cd-795f-4180-9db0-e533b7851816",
      "target": "6b953c89-a139-424f-ac7d-811e25405b5f",
      "type": "parent-child"
    }
  },
  {
    "data": {
      "id": "e647327d-826b-4453-b683-c21dbab69590-5684d3d8-bc89-469d-ac12-938a10443a76",
      "source": "e647327d-826b-4453-b683-c21dbab69590",
      "target": "5684d3d8-bc89-469d-ac12-938a10443a76",
      "type": "cousin"
    }
  },
  {
    "data": {
      "id": "e647327d-826b-4453-b683-c21dbab69590-rel-5684d3d8-bc89-469d-ac12-938a10443a76",
      "source": "e647327d-826b-4453-b683-c21dbab69590",
      "target": "5684d3d8-bc89-469d-ac12-938a10443a76",
      "type": "relationship",
      "relationship_type": "coordinates_with"
    }
  },
  {
    "data": {
      "id": "5684d3d8-bc89-469d-ac12-938a10443a76-e647327d-826b-4453-b683-c21dbab69590",
      "source": "5684d3d8-bc89-469d-ac12-938a10443a76",
      "target": "e647327d-826b-4453-b683-c21dbab69590",
      "type": "cousin"
    }
  },
  {
    "data": {
      "id": "5684d3d8-bc89-469d-ac12-938a10443a76-rel-5684d3d8-bc89-469d-ac12-938a10443a76",
      "source": "5684d3d8-bc89-469d-ac12-938a10443a76",
      "target": "5684d3d8-bc89-469d-ac12-938a10443a76",
      "type": "relationship",
      "relationship_type": "coordinates_with"
    }
  },
  {
    "data": {
      "id": "046a9b27-edd1-4cd5-a6bb-a53f9e07f066-e647327d-826b-4453-b683-c21dbab69590",
      "source": "046a9b27-edd1-4cd5-a6bb-a53f9e07f066",
      "target": "e647327d-826b-4453-b683-c21dbab69590",
      "type": "parent-child"
    }
  },
  {
    "data": {
      "id": "75ade262-a944-4f77-ba37-c4e32c010eda-046a9b27-edd1-4cd5-a6bb-a53f9e07f066",
      "source": "75ade262-a944-4f77-ba37-c4e32c010eda",
      "target": "046a9b27-edd1-4cd5-a6bb-a53f9e07f066",
      "type": "parent-child"
    }
  },
  {
    "data": {
      "id": "03d1490f-3e9e-4df4-b8a7-1d7f16f7a693-75ade262-a944-4f77-ba37-c4e32c010eda",
      "source": "03d1490f-3e9e-4df4-b8a7-1d7f16f7a693",
      "target": "75ade262-a944-4f77-ba37-c4e32c010eda",
      "type": "parent-child"
    }
  },
  {
    "data": {
      "id": "30eba573-1ccd-4f44-9479-bb39500d9cf8-143ce190-4809-4c3f-86d2-076014c15003",
      "source": "30eba573-1ccd-4f44-9479-bb39500d9cf8",
      "target": "143ce190-4809-4c3f-86d2-076014c15003",
      "type": "cousin"
    }
  },
  {
    "data": {
      "id": "30eba573-1ccd-4f44-9479-bb39500d9cf8-rel-143ce190-4809-4c3f-86d2-076014c15003",
      "source": "30eba573-1ccd-4f44-9479-bb39500d9cf8",
      "target": "143ce190-4809-4c3f-86d2-076014c15003",
      "type": "relationship",
      "relationship_type": "coordinates_with"
    }
  },
  {
    "data": {
      "id": "143ce190-4809-4c3f-86d2-076014c15003-30eba573-1ccd-4f44-9479-bb39500d9cf8",
      "source": "143ce190-4809-4c3f-86d2-076014c15003",
      "target": "30eba573-1ccd-4f44-9479-bb39500d9cf8",
      "type": "cousin"
    }
  },
  {
    "data": {
      "id": "143ce190-4809-4c3f-86d2-076014c15003-rel-143ce190-4809-4c3f-86d2-076014c15003",
      "source": "143ce190-4809-4c3f-86d2-076014c15003",
      "target": "143ce190-4809-4c3f-86d2-076014c15003",
      "type": "relationship",
      "relationship_type": "coordinates_with"
    }
  },
  {
    "data": {
      "id": "db471f2a-e8db-4ab3-95d2-4dc2eb52ab60-30eba573-1ccd-4f44-9479-bb39500d9cf8",
      "source": "db471f2a-e8db-4ab3-95d2-4dc2eb52ab60",
      "target": "30eba573-1ccd-4f44-9479-bb39500d9cf8",
      "type": "parent-child"
    }
  },
  {
    "data": {
      "id": "b677b34a-fe8f-4f4a-abd1-1888a3bc4f0f-db471f2a-e8db-4ab3-95d2-4dc2eb52ab60",
      "source": "b677b34a-fe8f-4f4a-abd1-1888a3bc4f0f",
      "target": "db471f2a-e8db-4ab3-95d2-4dc2eb52ab60",
      "type": "parent-child"
    }
  },
  {
    "data": {
      "id": "0faff0ab-ff18-4e07-9361-0dfa285eba83-b677b34a-fe8f-4f4a-abd1-1888a3bc4f0f",
      "source": "0faff0ab-ff18-4e07-9361-0dfa285eba83",
      "target": "b677b34a-fe8f-4f4a-abd1-1888a3bc4f0f",
      "type": "parent-child"
    }
  }
];

        const cy = cytoscape({
            container: document.getElementById('cy'),
            elements: [...nodes, ...edges],
            style: [
                {
                    selector: 'node',
                    style: {
                        'label': 'data(label)',
                        'width': 80,
                        'height': 80,
                        'shape': 'round-rectangle',
                        'background-color': function(ele) {
                            const level = ele.data('level');
                            if (level === 0) return '#3b82f6';
                            if (level === 1) return '#10b981';
                            if (level === 2) return '#f59e0b';
                            if (level === 3) return '#ef4444';
                            return '#64748b';
                        },
                        'color': '#ffffff',
                        'text-valign': 'center',
                        'text-halign': 'center',
                        'font-size': '12px',
                        'font-weight': 'bold',
                        'border-width': 2,
                        'border-color': '#334155'
                    }
                },
                {
                    selector: 'edge[type="parent-child"]',
                    style: {
                        'width': 3,
                        'line-color': '#60a5fa',
                        'target-arrow-color': '#60a5fa',
                        'target-arrow-shape': 'triangle',
                        'curve-style': 'bezier'
                    }
                },
                {
                    selector: 'edge[type="cousin"], edge[type="relationship"]',
                    style: {
                        'width': 2,
                        'line-color': '#94a3b8',
                        'line-style': 'dashed',
                        'target-arrow-color': '#94a3b8',
                        'target-arrow-shape': 'triangle',
                        'curve-style': 'bezier'
                    }
                }
            ],
            layout: {
                name: 'breadthfirst',
                directed: true,
                spacingFactor: 1.5,
                avoidOverlap: true,
                nodeDimensionsIncludeLabels: true,
                animate: true,
                animationDuration: 1000
            }
        });

        // Add hover effects
        cy.on('mouseover', 'node', function(evt) {
            const node = evt.target;
            node.style('border-color', '#60a5fa');
            node.style('border-width', 4);
        });

        cy.on('mouseout', 'node', function(evt) {
            const node = evt.target;
            node.style('border-color', '#334155');
            node.style('border-width', 2);
        });
    </script>
</body>
</html>